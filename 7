(self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([[3815], {
    67: function() {},
    2061: function() {},
    6175: function(e, t, s) {
        Promise.resolve().then(s.bind(s, 5909))
    },
    5909: function(e, t, s) {
        "use strict";
        s.d(t, {
            default: function() {
                return P
            }
        });
        var r = s(7437)
          , a = s(2265)
          , n = s(9376)
          , l = s(4362)
          , o = s(3504)
          , i = s(5978)
          , c = s(6410)
          , d = s(3496)
          , m = s(8810)
          , u = s(6294)
          , x = s(4508)
          , p = s(7390)
          , h = s(2158)
          , g = s(1259);
        function f(e) {
            var t;
            let {isOpen: s, onClose: n, onJobsImported: d, selectedTech: m} = e
              , {user: u, company: x} = (0,
            l.a)()
              , {addNotification: f} = (0,
            o.z)()
              , [b,j] = (0,
            a.useState)({
                workAppUsername: "",
                workAppPassword: ""
            })
              , [y,v] = (0,
            a.useState)(!1);
            (0,
            a.useEffect)( () => {
                s && (u || m) && x && N()
            }
            , [s, u, m, x]);
            let N = async () => {
                try {
                    let e = m || u
                      , t = (0,
                    i.doc)(c.db, "companies", x.companyId, "users", e.id)
                      , s = await (0,
                    i.getDoc)(t);
                    if (s.exists()) {
                        let e = s.data();
                        j({
                            workAppUsername: e.workAppUsername || "",
                            workAppPassword: e.workAppPassword || ""
                        })
                    }
                } catch (e) {
                    console.error("Error loading saved settings:", e)
                }
            }
              , w = async () => {
                if (!u && !m || !x) {
                    f({
                        title: "Error",
                        body: "Invalid user or company",
                        type: "error"
                    });
                    return
                }
                if (!b.workAppUsername.trim() || !b.workAppPassword.trim()) {
                    f({
                        title: "Error",
                        body: "Work App Username and Password are required. Please update them in the user profile.",
                        type: "error"
                    });
                    return
                }
                try {
                    v(!0);
                    let e = (0,
                    i.doc)(c.db, "companies", x.companyId)
                      , t = await (0,
                    i.getDoc)(e);
                    if (!t.exists())
                        throw Error("Company not found");
                    let s = t.data().technetPartnership;
                    if (!s || !s.isActive) {
                        f({
                            title: "Error",
                            body: "No active TechNet partnership found. Please contact your admin.",
                            type: "error"
                        });
                        return
                    }
                    let r = m || u;
                    if (r.catvProvider !== s.applicableCatvProvider) {
                        f({
                            title: "Error",
                            body: "TechNet parser is only available for ".concat(s.applicableCatvProvider, " technicians. This tech's CATV provider is ").concat(r.catvProvider || "not set", "."),
                            type: "error"
                        });
                        return
                    }
                    let[a,l,o] = await Promise.all([(0,
                    h.KM)(x.companyId), (0,
                    h.Nb)(x.companyId), (0,
                    h.mR)(x.companyId)]);
                    console.log("\uD83D\uDD25 STARTING TECHNET IMPORT..."),
                    console.log("Target User:", r),
                    console.log("Company ID:", x.companyId);
                    let j = await (0,
                    p.$)({
                        technicianNumber: b.workAppUsername.trim(),
                        techPassword: b.workAppPassword.trim()
                    }, a, l, o, r.id, b.workAppUsername.trim(), x.companyId, u.id, "".concat(u.firstName, " ").concat(u.lastName), (0,
                    g.RS)((null == x ? void 0 : x.timezone) || "America/New_York"), e => console.log(e));
                    console.log("\uD83D\uDD25 TECHNET IMPORT COMPLETED:", j);
                    let y = j.filter(e => e.success).length
                      , N = j.filter(e => {
                        var t;
                        return !e.success && (null === (t = e.error) || void 0 === t ? void 0 : t.includes("Duplicate job skipped"))
                    }
                    ).length
                      , w = j.filter(e => {
                        var t;
                        return !e.success && !(null === (t = e.error) || void 0 === t ? void 0 : t.includes("Duplicate job skipped"))
                    }
                    ).length;
                    if (y > 0) {
                        let e = "Imported ".concat(y, " jobs successfully");
                        N > 0 && (e += ", ".concat(N, " skipped (duplicates)")),
                        w > 0 && (e += ", ".concat(w, " failed")),
                        f({
                            title: "Import Successful",
                            body: e,
                            type: "success"
                        }),
                        null == d || d(),
                        n()
                    } else
                        N > 0 ? (f({
                            title: "Import Complete",
                            body: "All ".concat(N, " jobs were skipped as duplicates. No new jobs to import."),
                            type: "info"
                        }),
                        n()) : f({
                            title: "Import Failed",
                            body: w > 0 ? "No jobs were imported. Check your credentials and try again." : "No jobs found to import.",
                            type: "error"
                        })
                } catch (e) {
                    console.error("Import error:", e),
                    f({
                        title: "Import Error",
                        body: e.message || "Failed to import jobs from TechNet",
                        type: "error"
                    })
                } finally {
                    v(!1)
                }
            }
            ;
            return s ? (0,
            r.jsx)("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
                onClick: e => {
                    e.target === e.currentTarget && n()
                }
                ,
                children: (0,
                r.jsxs)("div", {
                    className: "bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-hidden flex flex-col",
                    children: [(0,
                    r.jsxs)("div", {
                        className: "px-6 py-4 border-b border-gray-200 flex-shrink-0",
                        children: [(0,
                        r.jsx)("h3", {
                            className: "text-lg font-semibold text-gray-900",
                            children: "TechNet Import"
                        }), (0,
                        r.jsx)("p", {
                            className: "text-sm text-gray-500 mt-1",
                            children: "Import jobs from TechNet system"
                        })]
                    }), (0,
                    r.jsx)("div", {
                        className: "flex-1 overflow-y-auto px-6 py-4",
                        children: (0,
                        r.jsxs)("div", {
                            className: "space-y-4",
                            children: [(0,
                            r.jsxs)("div", {
                                className: "p-4 bg-gray-50 rounded-md border border-gray-200",
                                children: [(0,
                                r.jsx)("h4", {
                                    className: "text-sm font-semibold text-gray-900 mb-3",
                                    children: "Login Credentials"
                                }), (0,
                                r.jsxs)("div", {
                                    className: "space-y-2",
                                    children: [(0,
                                    r.jsxs)("div", {
                                        children: [(0,
                                        r.jsx)("span", {
                                            className: "text-xs font-medium text-gray-600",
                                            children: "Work App Username:"
                                        }), (0,
                                        r.jsx)("p", {
                                            className: "text-sm text-gray-900 font-medium",
                                            children: b.workAppUsername || (0,
                                            r.jsx)("span", {
                                                className: "text-red-600",
                                                children: "Not set"
                                            })
                                        })]
                                    }), (0,
                                    r.jsxs)("div", {
                                        children: [(0,
                                        r.jsx)("span", {
                                            className: "text-xs font-medium text-gray-600",
                                            children: "Work App Password:"
                                        }), (0,
                                        r.jsx)("p", {
                                            className: "text-sm text-gray-900 font-medium",
                                            children: b.workAppPassword ? "••••••••" : (0,
                                            r.jsx)("span", {
                                                className: "text-red-600",
                                                children: "Not set"
                                            })
                                        })]
                                    })]
                                }), (0,
                                r.jsx)("p", {
                                    className: "text-xs text-gray-500 mt-3",
                                    children: "These credentials are loaded from the user profile. To update them, edit the user's Work App Username and Work App Password fields."
                                })]
                            }), ((null == m ? void 0 : m.catvProvider) || (null == u ? void 0 : u.catvProvider)) && (0,
                            r.jsxs)("div", {
                                className: "mt-4 p-3 bg-blue-50 rounded-md",
                                children: [(0,
                                r.jsxs)("p", {
                                    className: "text-sm text-blue-800",
                                    children: [(0,
                                    r.jsx)("strong", {
                                        children: "CATV Provider:"
                                    }), " ", null === (t = m || u) || void 0 === t ? void 0 : t.catvProvider]
                                }), (0,
                                r.jsx)("p", {
                                    className: "text-xs text-blue-600 mt-1",
                                    children: "TechNet import is available for this CATV provider."
                                })]
                            })]
                        })
                    }), (0,
                    r.jsxs)("div", {
                        className: "px-6 py-4 border-t border-gray-200 flex justify-between space-x-3 flex-shrink-0",
                        children: [(0,
                        r.jsx)("button", {
                            onClick: n,
                            className: "px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors text-sm font-medium",
                            children: "Cancel"
                        }), (0,
                        r.jsx)("div", {
                            className: "flex space-x-2",
                            children: (0,
                            r.jsx)("button", {
                                onClick: w,
                                disabled: y || !b.workAppUsername.trim() || !b.workAppPassword.trim(),
                                className: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium disabled:bg-gray-400",
                                children: y ? "Importing..." : "Import"
                            })
                        })]
                    })]
                })
            }) : null
        }
        function b(e) {
            let {isOpen: t, onClose: s} = e
              , {user: n, company: d} = (0,
            l.a)()
              , {addNotification: m} = (0,
            o.z)()
              , [x,p] = (0,
            a.useState)([])
              , [h,g] = (0,
            a.useState)(!0)
              , [f,b] = (0,
            a.useState)(!1)
              , [j,y] = (0,
            a.useState)(null)
              , [v,N] = (0,
            a.useState)(!1);
            (0,
            a.useEffect)( () => {
                if (!t || !d) {
                    console.log("\uD83D\uDD25 IMPORT LOG MODAL - Not loading:", {
                        isOpen: t,
                        hasCompany: !!d
                    });
                    return
                }
                console.log("\uD83D\uDD25 IMPORT LOG MODAL - Setting up listener for company:", d.companyId);
                let e = (0,
                i.collection)(c.db, "companies", d.companyId, "importLogs")
                  , s = (0,
                i.query)(e, (0,
                i.orderBy)("timestamp", "desc"), (0,
                i.limit)(50))
                  , r = (0,
                i.onSnapshot)(s, e => {
                    if (console.log("\uD83D\uDD25 IMPORT LOG MODAL - Snapshot received:", e.docs.length, "docs"),
                    console.log("\uD83D\uDD25 IMPORT LOG MODAL - Snapshot empty?", e.empty),
                    e.empty) {
                        console.log("\uD83D\uDD25 IMPORT LOG MODAL - No documents found in importLogs collection"),
                        p([]),
                        g(!1);
                        return
                    }
                    let t = e.docs.map(e => {
                        var t;
                        let s = e.data();
                        return console.log("\uD83D\uDD25 IMPORT LOG DATA for doc", e.id, ":", s),
                        {
                            id: e.id,
                            ...s,
                            timestamp: (null === (t = s.timestamp) || void 0 === t ? void 0 : t.toDate) ? s.timestamp.toDate() : new Date(s.timestamp)
                        }
                    }
                    );
                    console.log("\uD83D\uDD25 PROCESSED IMPORT LOGS:", t),
                    p(t),
                    g(!1)
                }
                , e => {
                    console.error("\uD83D\uDD25 IMPORT LOG MODAL - Snapshot error:", e),
                    console.error("\uD83D\uDD25 IMPORT LOG MODAL - Error code:", e.code),
                    console.error("\uD83D\uDD25 IMPORT LOG MODAL - Error message:", e.message),
                    g(!1)
                }
                );
                return () => r()
            }
            , [t, d]);
            let w = async e => {
                if (d)
                    try {
                        await (0,
                        i.deleteDoc)((0,
                        i.doc)(c.db, "companies", d.companyId, "importLogs", e)),
                        m({
                            title: "Success",
                            body: "Import log deleted successfully",
                            type: "success"
                        })
                    } catch (e) {
                        console.error("Error deleting log:", e),
                        m({
                            title: "Error",
                            body: "Failed to delete import log",
                            type: "error"
                        })
                    }
            }
              , D = async () => {
                if (d && confirm("Are you sure you want to delete all import logs? This action cannot be undone."))
                    try {
                        let e = x.map(e => (0,
                        i.deleteDoc)((0,
                        i.doc)(c.db, "companies", d.companyId, "importLogs", e.id)));
                        await Promise.all(e),
                        m({
                            title: "Success",
                            body: "All import logs deleted successfully",
                            type: "success"
                        })
                    } catch (e) {
                        console.error("Error clearing logs:", e),
                        m({
                            title: "Error",
                            body: "Failed to clear import logs",
                            type: "error"
                        })
                    }
            }
              , k = async (e, t) => {
                if (d)
                    try {
                        let s;
                        if (N(!0),
                        t) {
                            let e = (0,
                            i.doc)(c.db, "companies", d.companyId, "jobs", t);
                            s = await (0,
                            i.getDoc)(e)
                        }
                        if (!(null == s ? void 0 : s.exists())) {
                            let t = (0,
                            i.collection)(c.db, "companies", d.companyId, "jobs")
                              , r = (0,
                            i.query)(t, (0,
                            i.where)("jobId", "==", e))
                              , a = await (0,
                            i.getDocs)(r);
                            a.empty || (s = a.docs[0])
                        }
                        if (!(null == s ? void 0 : s.exists())) {
                            m({
                                title: "Job Not Found",
                                body: "This job may have been deleted or archived.",
                                type: "error"
                            });
                            return
                        }
                        let r = {
                            id: s.id,
                            ...s.data()
                        };
                        y(r),
                        b(!0)
                    } catch (e) {
                        console.error("Error fetching job:", e),
                        m({
                            title: "Error",
                            body: "Failed to load job details",
                            type: "error"
                        })
                    } finally {
                        N(!1)
                    }
            }
              , A = e => e.toLocaleString()
              , C = (e, t, s) => t > 0 || s > 0 ? "text-red-600" : e > 0 ? "text-green-600" : "text-yellow-600"
              , S = (e, t, s) => t > 0 || s > 0 ? "Failed" : e > 0 ? "Success" : "Partial";
            return t ? (0,
            r.jsxs)("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
                onClick: e => {
                    e.target === e.currentTarget && s()
                }
                ,
                children: [(0,
                r.jsxs)("div", {
                    className: "bg-white rounded-lg w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",
                    children: [(0,
                    r.jsx)("div", {
                        className: "px-6 py-4 border-b border-gray-200 flex-shrink-0",
                        children: (0,
                        r.jsxs)("div", {
                            className: "flex items-center justify-between",
                            children: [(0,
                            r.jsxs)("div", {
                                children: [(0,
                                r.jsx)("h3", {
                                    className: "text-xl font-semibold text-gray-900",
                                    children: "TechNet Import Logs"
                                }), (0,
                                r.jsx)("p", {
                                    className: "text-sm text-gray-500 mt-1",
                                    children: "View detailed logs of TechNet import operations"
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "flex items-center space-x-2",
                                children: [x.length > 0 && (0,
                                r.jsx)("button", {
                                    onClick: D,
                                    className: "px-3 py-1.5 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors",
                                    children: "Clear All"
                                }), (0,
                                r.jsx)("button", {
                                    onClick: s,
                                    className: "p-2 text-gray-400 hover:text-gray-600 transition-colors",
                                    children: (0,
                                    r.jsx)("svg", {
                                        className: "w-5 h-5",
                                        fill: "none",
                                        stroke: "currentColor",
                                        viewBox: "0 0 24 24",
                                        children: (0,
                                        r.jsx)("path", {
                                            strokeLinecap: "round",
                                            strokeLinejoin: "round",
                                            strokeWidth: 2,
                                            d: "M6 18L18 6M6 6l12 12"
                                        })
                                    })
                                })]
                            })]
                        })
                    }), (0,
                    r.jsx)("div", {
                        className: "flex-1 overflow-y-auto",
                        children: (0,
                        r.jsx)("div", {
                            className: "p-4",
                            children: h ? (0,
                            r.jsx)("div", {
                                className: "flex items-center justify-center h-32",
                                children: (0,
                                r.jsx)("div", {
                                    className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"
                                })
                            }) : v ? (0,
                            r.jsxs)("div", {
                                className: "flex flex-col items-center justify-center h-32 space-y-2",
                                children: [(0,
                                r.jsx)("div", {
                                    className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"
                                }), (0,
                                r.jsx)("p", {
                                    className: "text-sm text-gray-600",
                                    children: "Loading job details..."
                                })]
                            }) : 0 === x.length ? (0,
                            r.jsxs)("div", {
                                className: "text-center py-8",
                                children: [(0,
                                r.jsx)("svg", {
                                    className: "mx-auto h-12 w-12 text-gray-400",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: (0,
                                    r.jsx)("path", {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                    })
                                }), (0,
                                r.jsx)("h3", {
                                    className: "mt-2 text-sm font-medium text-gray-900",
                                    children: "No import logs"
                                }), (0,
                                r.jsx)("p", {
                                    className: "mt-1 text-sm text-gray-500",
                                    children: "Import logs will appear here after TechNet imports are performed."
                                })]
                            }) : (0,
                            r.jsx)("div", {
                                className: "space-y-6",
                                children: x.map(e => (0,
                                r.jsxs)("div", {
                                    className: "bg-white border border-gray-200 rounded-lg shadow-sm",
                                    children: [(0,
                                    r.jsx)("div", {
                                        className: "px-6 py-4 border-b border-gray-200",
                                        children: (0,
                                        r.jsxs)("div", {
                                            className: "flex items-center justify-between",
                                            children: [(0,
                                            r.jsxs)("div", {
                                                className: "flex items-center space-x-4",
                                                children: [(0,
                                                r.jsxs)("div", {
                                                    className: "flex items-center space-x-2",
                                                    children: [(0,
                                                    r.jsxs)("span", {
                                                        className: "font-semibold text-gray-900",
                                                        children: ["Tech #", e.technicianNumber]
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "px-2 py-1 text-xs font-medium rounded-full ".concat(C(e.successfulJobs, e.failedJobs, (e.errors || []).length), " bg-opacity-20"),
                                                        children: S(e.successfulJobs, e.failedJobs, (e.errors || []).length)
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "text-sm text-gray-600",
                                                    children: [A(e.timestamp), " • ", e.jobOrigin, " • ", e.createdByName]
                                                })]
                                            }), (0,
                                            r.jsxs)("div", {
                                                className: "flex items-center space-x-4",
                                                children: [(0,
                                                r.jsxs)("div", {
                                                    className: "flex items-center space-x-4 text-sm",
                                                    children: [(0,
                                                    r.jsxs)("span", {
                                                        className: "text-green-600",
                                                        children: ["✓ ", e.successfulJobs, " successful"]
                                                    }), e.failedJobs > 0 && (0,
                                                    r.jsxs)("span", {
                                                        className: "text-red-600",
                                                        children: ["✗ ", e.failedJobs, " failed"]
                                                    }), e.warnings.length > 0 && (0,
                                                    r.jsxs)("span", {
                                                        className: "text-yellow-600",
                                                        children: ["⚠ ", e.warnings.length, " warnings"]
                                                    })]
                                                }), (0,
                                                r.jsx)("button", {
                                                    onClick: () => w(e.id),
                                                    className: "p-1 text-gray-400 hover:text-red-600 transition-colors",
                                                    children: (0,
                                                    r.jsx)("svg", {
                                                        className: "w-4 h-4",
                                                        fill: "none",
                                                        stroke: "currentColor",
                                                        viewBox: "0 0 24 24",
                                                        children: (0,
                                                        r.jsx)("path", {
                                                            strokeLinecap: "round",
                                                            strokeLinejoin: "round",
                                                            strokeWidth: 2,
                                                            d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                                                        })
                                                    })
                                                })]
                                            })]
                                        })
                                    }), e.jobDetails.length > 0 && (0,
                                    r.jsxs)("div", {
                                        className: "px-6 py-4 border-b border-gray-200",
                                        children: [(0,
                                        r.jsx)("h4", {
                                            className: "text-sm font-medium text-gray-900 mb-3",
                                            children: "Job Results"
                                        }), (0,
                                        r.jsx)("div", {
                                            className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",
                                            children: e.jobDetails.map( (e, t) => (0,
                                            r.jsxs)("div", {
                                                onClick: () => e.success && k(e.jobId, e.jobDocumentId),
                                                className: "p-3 rounded-lg border transition-all ".concat(e.success ? "border-green-200 bg-green-50 cursor-pointer hover:bg-green-100 hover:shadow-md" : "border-red-200 bg-red-50 cursor-not-allowed"),
                                                title: e.success ? "Click to view job details" : "Failed job cannot be viewed",
                                                children: [(0,
                                                r.jsxs)("div", {
                                                    className: "flex items-center justify-between",
                                                    children: [(0,
                                                    r.jsxs)("span", {
                                                        className: "font-medium text-sm",
                                                        children: ["Job ", e.jobId]
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "text-xs font-medium ".concat(e.success ? "text-green-600" : "text-red-600"),
                                                        children: e.success ? "✓ Success" : "✗ Failed"
                                                    })]
                                                }), e.error && (0,
                                                r.jsx)("p", {
                                                    className: "text-xs text-red-600 mt-1",
                                                    children: e.error
                                                }), e.warnings && e.warnings.length > 0 && (0,
                                                r.jsx)("div", {
                                                    className: "mt-1",
                                                    children: e.warnings.map( (e, t) => (0,
                                                    r.jsxs)("p", {
                                                        className: "text-xs text-yellow-600",
                                                        children: ["⚠ ", e]
                                                    }, t))
                                                })]
                                            }, t))
                                        })]
                                    }), (0,
                                    r.jsxs)("div", {
                                        className: "px-6 py-4",
                                        children: [(0,
                                        r.jsx)("h4", {
                                            className: "text-sm font-medium text-gray-900 mb-3",
                                            children: "Import Process Logs"
                                        }), (0,
                                        r.jsx)("div", {
                                            className: "bg-white border border-gray-200 text-gray-900 p-4 rounded-lg font-mono text-xs max-h-64 overflow-y-auto",
                                            children: e.logs.map( (e, t) => (0,
                                            r.jsx)("div", {
                                                className: "mb-1",
                                                children: e
                                            }, t))
                                        })]
                                    })]
                                }, e.id))
                            })
                        })
                    })]
                }), f && j && (0,
                r.jsx)(u.Z, {
                    isOpen: f,
                    onClose: () => {
                        b(!1),
                        y(null)
                    }
                    ,
                    onJobUpdated: () => {
                        b(!1),
                        y(null)
                    }
                    ,
                    mode: "manage",
                    context: "tech-route",
                    selectedJob: j,
                    isArchivedJob: !1
                })]
            }) : null
        }
        var j = s(3426);
        function y(e) {
            let {isOpen: t, onClose: s, selectedDate: n} = e
              , {company: d, user: m} = (0,
            l.a)()
              , {addNotification: u} = (0,
            o.z)()
              , [x,f] = (0,
            a.useState)([])
              , [b,y] = (0,
            a.useState)(new Set)
              , [v,N] = (0,
            a.useState)(!1)
              , [w,D] = (0,
            a.useState)(!1)
              , [k,A] = (0,
            a.useState)({
                current: 0,
                total: 0,
                currentTech: ""
            })
              , [C,S] = (0,
            a.useState)([])
              , E = (0,
            a.useRef)(null)
              , I = (0,
            a.useRef)(!1)
              , [T,P] = (0,
            a.useState)(!1)
              , [L,M] = (0,
            a.useState)(30)
              , [R,O] = (0,
            a.useState)("08:00")
              , [F,J] = (0,
            a.useState)("18:00")
              , [W,B] = (0,
            a.useState)(null)
              , [z,U] = (0,
            a.useState)(null)
              , [V,H] = (0,
            a.useState)(!1)
              , [_,q] = (0,
            a.useState)(0)
              , [G,Y] = (0,
            a.useState)(0)
              , [Z,X] = (0,
            a.useState)("")
              , [K,Q] = (0,
            a.useState)("")
              , [$,ee] = (0,
            a.useState)(null)
              , [et,es] = (0,
            a.useState)([])
              , er = (e, t) => {
                var s;
                let r = null === (s = e.workingDays) || void 0 === s ? void 0 : s[t];
                return r && !r.isWorking ? {
                    hasDayOff: !0,
                    reason: r.reason,
                    notes: r.notes,
                    status: r.status,
                    requestedBy: r.requestedBy
                } : {
                    hasDayOff: !1
                }
            }
              , ea = async () => {
                if (!d || !m)
                    return;
                let e = d.timezone || "America/New_York"
                  , t = e => {
                    if (!e)
                        return "00:00";
                    let t = e.trim().toLowerCase()
                      , s = t.match(/^(\d{1,2}):(\d{2})\s*(am|pm|a|p|pi|ap|pm)?$/i);
                    if (s) {
                        let e = parseInt(s[1], 10)
                          , t = parseInt(s[2], 10)
                          , r = (s[3] || "").toLowerCase();
                        return r.startsWith("p") && e < 12 && (e += 12),
                        r.startsWith("a") && 12 === e && (e = 0),
                        "".concat(String(e).padStart(2, "0"), ":").concat(String(t).padStart(2, "0"))
                    }
                    let r = t.match(/^(\d{1,2}):(\d{2})/);
                    if (r) {
                        let e = parseInt(r[1], 10)
                          , t = parseInt(r[2], 10);
                        return "".concat(String(e).padStart(2, "0"), ":").concat(String(t).padStart(2, "0"))
                    }
                    return "00:00"
                }
                  , s = t(R)
                  , r = t(F)
                  , a = new Date(new Date().toLocaleString("en-US", {
                    timeZone: e
                }))
                  , n = (s || "").split(":")
                  , l = (r || "").split(":")
                  , o = 2 === n.length ? 60 * parseInt(n[0]) + parseInt(n[1]) : 0
                  , i = 2 === l.length ? 60 * parseInt(l[0]) + parseInt(l[1]) : 0
                  , c = 60 * a.getHours() + a.getMinutes()
                  , x = Math.max(1, L)
                  , p = new Date(a.getTime())
                  , h = !0;
                if (o !== i && (h = o < i ? c >= o && c <= i : c >= o || c <= i),
                h) {
                    let e = c + x
                      , t = new Date(a.getTime());
                    t.setMinutes(a.getMinutes() + x);
                    let s = o > i;
                    if (!s && e > i || s && e % 1440 > i && c <= i) {
                        let e = new Date(a.getTime());
                        s || e.setDate(e.getDate() + 1),
                        e.setHours(Math.floor(o / 60), o % 60, 0, 0),
                        p = e
                    } else
                        p = t
                } else {
                    let e = new Date(a.getTime());
                    !(o > i) && c > i && e.setDate(e.getDate() + 1),
                    e.setHours(Math.floor(o / 60), o % 60, 0, 0),
                    p = e
                }
                await (0,
                j.De)(d.companyId, {
                    enabled: T,
                    frequencyMinutes: L,
                    windowStart: s,
                    windowEnd: r,
                    timezone: e,
                    lastSetByUserId: m.id,
                    lastSetByUserName: "".concat(m.firstName, " ").concat(m.lastName),
                    nextRunAt: p
                }),
                B(p),
                u({
                    type: "success",
                    title: "Settings Saved",
                    message: "Auto import settings updated",
                    duration: 3e3
                })
            }
              , en = e => {
                try {
                    return ["sun", "mon", "tue", "wed", "thu", "fri", "sat"][(e ? new Date(new Date().toLocaleString("en-US", {
                        timeZone: e
                    })) : new Date).getDay()]
                } catch (e) {
                    return ["sun", "mon", "tue", "wed", "thu", "fri", "sat"][new Date().getDay()]
                }
            }
              , el = (e, t) => {
                let s = (e.schedule || "").toLowerCase();
                if (!s.trim())
                    return null;
                let r = en(t);
                return s.split(",").map(e => e.trim()).filter(Boolean).includes(r)
            }
            ;
            (0,
            a.useEffect)( () => {
                t && d && (async () => {
                    N(!0);
                    try {
                        let e = (0,
                        i.doc)(c.db, "companies", d.companyId)
                          , t = await (0,
                        i.getDoc)(e);
                        if (!t.exists()) {
                            u({
                                type: "error",
                                title: "Error",
                                message: "Company data not found",
                                duration: 5e3
                            });
                            return
                        }
                        let s = t.data()
                          , r = null == s ? void 0 : s.technetPartnership;
                        if (!r || !r.isActive) {
                            u({
                                type: "warning",
                                title: "No Partnership Configured",
                                message: "Please configure CATV Provider Partnership in company settings first",
                                duration: 5e3
                            }),
                            f([]);
                            return
                        }
                        let a = (0,
                        i.collection)(c.db, "companies", d.companyId, "users")
                          , n = (0,
                        i.query)(a, (0,
                        i.where)("role", "==", "tech"))
                          , l = (await (0,
                        i.getDocs)(n)).docs.filter(e => !0 !== e.data().archived).map(e => ({
                            id: e.id,
                            ...e.data()
                        })).filter(e => e.catvProvider === r.applicableCatvProvider)
                          , o = e => {
                            let t = el(e, null == s ? void 0 : s.timezone);
                            return !0 === t ? 0 : !1 === t ? 1 : 2
                        }
                        ;
                        l = l.sort( (e, t) => {
                            let s = o(e)
                              , r = o(t);
                            if (s !== r)
                                return s - r;
                            let a = "".concat(e.firstName || "", " ").concat(e.lastName || "").trim().toLowerCase()
                              , n = "".concat(t.firstName || "", " ").concat(t.lastName || "").trim().toLowerCase();
                            return a.localeCompare(n)
                        }
                        ),
                        f(l)
                    } catch (e) {
                        console.error("Error loading techs:", e),
                        u({
                            type: "error",
                            title: "Error",
                            message: "Failed to load technicians",
                            duration: 5e3
                        })
                    } finally {
                        N(!1)
                    }
                }
                )()
            }
            , [t, d, u]),
            (0,
            a.useEffect)( () => {
                if (!t || !d)
                    return;
                let e = (0,
                j.Ky)(d.companyId, e => {
                    e ? (P(!!e.enabled),
                    M(e.frequencyMinutes || 30),
                    O(e.windowStart || "08:00"),
                    J(e.windowEnd || "18:00"),
                    B(e.nextRunAt && e.nextRunAt.toDate ? e.nextRunAt.toDate() : e.nextRunAt ? new Date(e.nextRunAt) : null),
                    U({
                        id: e.lastSetByUserId,
                        name: e.lastSetByUserName
                    })) : (P(!1),
                    M(30),
                    O("08:00"),
                    J("18:00"),
                    B(null),
                    U(null))
                }
                );
                return () => e()
            }
            , [t, d]),
            (0,
            a.useEffect)( () => {
                if (!t || !d)
                    return;
                let e = (0,
                j.RZ)(d.companyId, e => {
                    if (e) {
                        H(!!e.running),
                        q(e.current || 0),
                        Y(e.total || 0),
                        X(e.currentTechName || ""),
                        ee(e.lastTickAt && e.lastTickAt.toDate ? e.lastTickAt.toDate() : e.lastTickAt ? new Date(e.lastTickAt) : null),
                        Q(e.lastTickReason || "");
                        let t = e.lastLoginFailures || [];
                        es(Array.isArray(t) ? t : [])
                    } else
                        H(!1),
                        q(0),
                        Y(0),
                        X(""),
                        ee(null),
                        Q(""),
                        es([])
                }
                );
                return () => e()
            }
            , [t, d]);
            let eo = async () => {
                let e = b.size === x.length ? new Set : new Set(x.map(e => e.id));
                if (y(e),
                d && m)
                    try {
                        let t = (0,
                        i.doc)(c.db, "companies", d.companyId, "settings", "alticeCSGImport_selection");
                        await (0,
                        i.setDoc)(t, {
                            selectedTechIds: Array.from(e),
                            updatedAt: new Date().toISOString(),
                            updatedBy: m.id
                        }, {
                            merge: !0
                        })
                    } catch (e) {
                        console.error("Error saving shared selection:", e)
                    }
            }
              , ei = async e => {
                let t = new Set(b);
                if (t.has(e) ? t.delete(e) : t.add(e),
                y(t),
                d && m)
                    try {
                        let e = (0,
                        i.doc)(c.db, "companies", d.companyId, "settings", "alticeCSGImport_selection");
                        await (0,
                        i.setDoc)(e, {
                            selectedTechIds: Array.from(t),
                            updatedAt: new Date().toISOString(),
                            updatedBy: m.id
                        }, {
                            merge: !0
                        })
                    } catch (e) {
                        console.error("Error saving shared selection:", e)
                    }
            }
            ;
            (0,
            a.useEffect)( () => {
                if (!t || !d)
                    return;
                let e = (0,
                i.doc)(c.db, "companies", d.companyId, "settings", "alticeCSGImport_selection")
                  , s = (0,
                i.onSnapshot)(e, e => {
                    if (e.exists()) {
                        let t = e.data();
                        y(new Set((Array.isArray(t.selectedTechIds) ? t.selectedTechIds : []).filter(e => x.some(t => t.id === e))))
                    } else
                        y(new Set)
                }
                , e => {
                    console.error("Error subscribing to shared selection:", e)
                }
                );
                return () => s()
            }
            , [t, d, x]);
            let ec = async () => {
                if (0 === b.size) {
                    u({
                        type: "warning",
                        title: "No Selection",
                        message: "Please select at least one technician",
                        duration: 3e3
                    });
                    return
                }
                let e = x.filter(e => b.has(e.id));
                I.current = !1,
                E.current = new AbortController,
                D(!0),
                A({
                    current: 0,
                    total: e.length,
                    currentTech: ""
                }),
                S([]);
                try {
                    for (let s = 0; s < e.length && !I.current; s++) {
                        let r = e[s];
                        A({
                            current: s + 1,
                            total: e.length,
                            currentTech: "".concat(r.firstName, " ").concat(r.lastName)
                        });
                        try {
                            var t;
                            let e = [];
                            if (r.workAppUsername || e.push("workAppUsername"),
                            r.workAppPassword || e.push("workAppPassword"),
                            e.length > 0)
                                continue;
                            let[s,a,l] = await Promise.all([(0,
                            h.KM)(d.companyId), (0,
                            h.Nb)(d.companyId), (0,
                            h.mR)(d.companyId)])
                              , o = r.workAppUsername
                              , i = r.workAppPassword
                              , c = r.workAppUsername;
                            await (0,
                            p.$)({
                                technicianNumber: o,
                                techPassword: i
                            }, s, a, l, r.id, c, d.companyId, m.id, "".concat(m.firstName, " ").concat(m.lastName), n || (0,
                            g.RS)((null == d ? void 0 : d.timezone) || "America/New_York"), e => {}
                            , {
                                signal: null === (t = E.current) || void 0 === t ? void 0 : t.signal
                            }),
                            await new Promise(e => setTimeout(e, 1e3))
                        } catch (a) {
                            if (console.error("❌ ERROR importing for tech ".concat(r.firstName, " ").concat(r.lastName, ":"), a),
                            (null == a ? void 0 : a.name) === "AbortError")
                                break;
                            let e = String(r.workAppUsername || r.techNumber || "")
                              , t = "".concat(r.firstName || "", " ").concat(r.lastName || "").trim() || (e ? "Tech #".concat(e) : "Tech")
                              , s = (null == a ? void 0 : a.code) === "technet-login-failed" ? (null == a ? void 0 : a.reason) || "Invalid credentials" : (null == a ? void 0 : a.message) || "Unknown error";
                            try {
                                u({
                                    type: "error",
                                    title: "Login Failed",
                                    message: "⚠️ Login failed for ".concat(t).concat(e ? " (".concat(e, ")") : "", " — ").concat(s),
                                    duration: 7e3
                                })
                            } catch (e) {}
                            try {
                                S(r => [...r, {
                                    number: e,
                                    name: t,
                                    reason: s,
                                    at: new Date
                                }])
                            } catch (e) {}
                        }
                    }
                    if (I.current)
                        u({
                            type: "info",
                            title: "Import Cancelled",
                            message: "Parsing stopped by user",
                            duration: 4e3
                        });
                    else {
                        if (C.length > 0)
                            try {
                                u({
                                    type: "warning",
                                    title: "Bulk Import Summary",
                                    message: "".concat(C.length, " technicians failed to log in"),
                                    duration: 8e3
                                })
                            } catch (e) {}
                        u({
                            type: "success",
                            title: "Bulk Import Complete",
                            message: "Successfully processed ".concat(e.length, " technicians"),
                            duration: 5e3
                        })
                    }
                    y(new Set),
                    s()
                } catch (e) {
                    console.error("Error during bulk import:", e),
                    u({
                        type: "error",
                        title: "Import Failed",
                        message: "Failed to complete bulk import",
                        duration: 5e3
                    })
                } finally {
                    E.current = null,
                    D(!1),
                    A({
                        current: 0,
                        total: 0,
                        currentTech: ""
                    })
                }
            }
            ;
            return t ? (0,
            r.jsx)("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
                children: (0,
                r.jsxs)("div", {
                    className: "bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",
                    children: [(0,
                    r.jsxs)("div", {
                        className: "px-6 py-4 border-b border-gray-200",
                        children: [(0,
                        r.jsxs)("div", {
                            className: "flex items-center justify-between",
                            children: [(0,
                            r.jsx)("h3", {
                                className: "text-lg font-semibold text-gray-900",
                                children: "Altice CSG Import"
                            }), (0,
                            r.jsx)("button", {
                                onClick: s,
                                className: "text-gray-400 hover:text-gray-600 transition-colors",
                                children: (0,
                                r.jsx)("svg", {
                                    className: "w-6 h-6",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: (0,
                                    r.jsx)("path", {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M6 18L18 6M6 6l12 12"
                                    })
                                })
                            })]
                        }), (0,
                        r.jsx)("p", {
                            className: "text-sm text-gray-600 mt-1",
                            children: "Select technicians to import jobs from Altice CSG system"
                        }), (C.length > 0 || et.length > 0) && (0,
                        r.jsx)("div", {
                            className: "mt-2 p-2 rounded border",
                            style: {
                                background: "#ffe5e5",
                                borderColor: "#ff6b6b",
                                color: "#8b0000"
                            },
                            children: "Technet login failed for ".concat(C.length + et.length, " technician").concat(C.length + et.length > 1 ? "s" : "", ".")
                        })]
                    }), (0,
                    r.jsxs)("div", {
                        className: "px-6 py-4 overflow-y-auto flex-1",
                        children: [V && T && (0,
                        r.jsxs)("div", {
                            className: "mb-4 p-3 bg-purple-50 border border-purple-200 rounded",
                            children: [(0,
                            r.jsx)("div", {
                                className: "font-medium text-purple-800",
                                children: "Auto Import Running"
                            }), (0,
                            r.jsx)("div", {
                                className: "text-sm text-purple-700",
                                children: Z ? "Current: ".concat(Z) : "Preparing..."
                            }), (0,
                            r.jsx)("div", {
                                className: "w-full bg-purple-100 h-2 rounded mt-2",
                                children: (0,
                                r.jsx)("div", {
                                    className: "bg-purple-600 h-2 rounded",
                                    style: {
                                        width: "".concat(G ? Math.min(100, Math.round(_ / Math.max(1, G) * 100)) : 0, "%")
                                    }
                                })
                            }), (0,
                            r.jsxs)("div", {
                                className: "text-xs text-purple-700 mt-1",
                                children: [_, " / ", G]
                            })]
                        }), !T && V && (0,
                        r.jsxs)("div", {
                            className: "mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded",
                            children: [(0,
                            r.jsx)("div", {
                                className: "font-medium text-yellow-800",
                                children: "Auto Import status is stuck"
                            }), (0,
                            r.jsx)("div", {
                                className: "text-sm text-yellow-700",
                                children: "Auto import is disabled, but status shows running. You can reset it below."
                            }), (0,
                            r.jsx)("button", {
                                onClick: async () => {
                                    try {
                                        if (!d)
                                            return;
                                        let e = d.companyId;
                                        await (0,
                                        i.setDoc)((0,
                                        i.doc)(c.db, "companies", e, "settings", "csgAutoImportStatus"), {
                                            running: !1,
                                            updatedAt: new Date
                                        }, {
                                            merge: !0
                                        }),
                                        await (0,
                                        i.setDoc)((0,
                                        i.doc)(c.db, "companies", e, "settings", "csgAutoImportLock"), {
                                            locked: !1,
                                            updatedAt: new Date
                                        }, {
                                            merge: !0
                                        }),
                                        await (0,
                                        i.setDoc)((0,
                                        i.doc)(c.db, "companies", e, "settings", "csgAutoImportRun"), {
                                            status: "completed",
                                            endedAt: new Date,
                                            updatedAt: new Date
                                        }, {
                                            merge: !0
                                        }),
                                        H(!1),
                                        u({
                                            type: "success",
                                            title: "Auto Import Reset",
                                            message: "Auto import status was reset",
                                            duration: 4e3
                                        })
                                    } catch (e) {
                                        u({
                                            type: "error",
                                            title: "Reset Failed",
                                            message: "Could not reset auto import status",
                                            duration: 4e3
                                        })
                                    }
                                }
                                ,
                                className: "mt-2 px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700",
                                children: "Reset Auto Import Status"
                            })]
                        }), (0,
                        r.jsxs)("div", {
                            className: "mb-4 grid grid-cols-1 md:grid-cols-4 gap-4",
                            children: [(0,
                            r.jsx)("div", {
                                className: "p-3 bg-gray-50 rounded-lg",
                                children: (0,
                                r.jsxs)("label", {
                                    className: "flex items-center space-x-2",
                                    children: [(0,
                                    r.jsx)("input", {
                                        type: "checkbox",
                                        className: "w-4 h-4",
                                        checked: T,
                                        onChange: e => P(e.target.checked)
                                    }), (0,
                                    r.jsx)("span", {
                                        className: "font-medium text-gray-900",
                                        children: "Enable Auto Import"
                                    })]
                                })
                            }), (0,
                            r.jsxs)("div", {
                                className: "p-3 bg-gray-50 rounded-lg",
                                children: [(0,
                                r.jsx)("label", {
                                    className: "block text-sm font-medium mb-2",
                                    children: "Frequency"
                                }), (0,
                                r.jsx)("select", {
                                    className: "w-full p-2 border rounded-md",
                                    value: L,
                                    onChange: e => M(Number(e.target.value)),
                                    children: [10, 20, 30, 60, 120, 240, 480].map(e => (0,
                                    r.jsx)("option", {
                                        value: e,
                                        children: "".concat(e, " min")
                                    }, e))
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "p-3 bg-gray-50 rounded-lg",
                                children: [(0,
                                r.jsx)("label", {
                                    className: "block text-sm font-medium mb-2",
                                    children: "Start"
                                }), (0,
                                r.jsx)("input", {
                                    type: "time",
                                    className: "w-full p-2 border rounded-md",
                                    value: R,
                                    onChange: e => O(e.target.value)
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "p-3 bg-gray-50 rounded-lg",
                                children: [(0,
                                r.jsx)("label", {
                                    className: "block text-sm font-medium mb-2",
                                    children: "Until"
                                }), (0,
                                r.jsx)("input", {
                                    type: "time",
                                    className: "w-full p-2 border rounded-md",
                                    value: F,
                                    onChange: e => J(e.target.value)
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "md:col-span-4 flex items-center justify-between",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "text-sm text-gray-600",
                                    children: ["Timezone: ", (null == d ? void 0 : d.timezone) || "America/New_York"]
                                }), (0,
                                r.jsx)("button", {
                                    onClick: ea,
                                    className: "px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",
                                    children: "Save Auto Import Settings"
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "md:col-span-4 grid grid-cols-1 md:grid-cols-3 gap-4",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "p-2 bg-gray-50 rounded",
                                    children: ["Status: ", T ? "Enabled" : "Disabled"]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "p-2 bg-gray-50 rounded",
                                    children: ["Next run: ", W ? W.toLocaleString("en-US", {
                                        timeZone: (null == d ? void 0 : d.timezone) || "America/New_York"
                                    }) : "N/A"]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "p-2 bg-gray-50 rounded",
                                    children: ["Last set by: ", z ? z.name : "N/A"]
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "md:col-span-4 grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "p-2 bg-gray-50 rounded",
                                    children: ["Last tick: ", $ ? "".concat($.toLocaleString("en-US", {
                                        timeZone: (null == d ? void 0 : d.timezone) || "America/New_York"
                                    })) : "N/A"]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "p-2 bg-gray-50 rounded",
                                    children: ["Reason: ", K || "N/A"]
                                })]
                            })]
                        }), v ? (0,
                        r.jsxs)("div", {
                            className: "text-center py-8",
                            children: [(0,
                            r.jsx)("div", {
                                className: "animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"
                            }), (0,
                            r.jsx)("p", {
                                className: "text-gray-600 mt-2",
                                children: "Loading technicians..."
                            })]
                        }) : 0 === x.length ? (0,
                        r.jsxs)("div", {
                            className: "text-center py-8",
                            children: [(0,
                            r.jsx)("p", {
                                className: "text-gray-600",
                                children: "No technicians found for Altice CSG Import"
                            }), (0,
                            r.jsx)("p", {
                                className: "text-sm text-gray-500 mt-1",
                                children: "No technicians found with the CATV provider from the active partnership"
                            }), (0,
                            r.jsx)("p", {
                                className: "text-xs text-gray-400 mt-2",
                                children: "Check CATV Provider Partnership settings in company configuration"
                            })]
                        }) : (0,
                        r.jsxs)(r.Fragment, {
                            children: [(0,
                            r.jsx)("div", {
                                className: "mb-4 p-3 bg-gray-50 rounded-lg",
                                children: (0,
                                r.jsxs)("label", {
                                    className: "flex items-center space-x-3 cursor-pointer",
                                    children: [(0,
                                    r.jsx)("input", {
                                        type: "checkbox",
                                        checked: b.size === x.length && x.length > 0,
                                        onChange: eo,
                                        className: "w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"
                                    }), (0,
                                    r.jsxs)("span", {
                                        className: "font-medium text-gray-900",
                                        children: ["Select All (", x.length, " technicians)"]
                                    })]
                                })
                            }), (0,
                            r.jsx)("div", {
                                className: "space-y-2",
                                children: x.map(e => (er(e, n || (0,
                                g.RS)((null == d ? void 0 : d.timezone) || "America/New_York")),
                                el(e, null == d ? void 0 : d.timezone),
                                (0,
                                r.jsxs)("div", {
                                    className: "flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",
                                    children: [(0,
                                    r.jsx)("input", {
                                        type: "checkbox",
                                        checked: b.has(e.id),
                                        onChange: () => ei(e.id),
                                        className: "w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"
                                    }), (0,
                                    r.jsxs)("div", {
                                        className: "flex-1",
                                        children: [(0,
                                        r.jsxs)("div", {
                                            className: "flex items-center space-x-2 flex-wrap",
                                            children: [(0,
                                            r.jsxs)("span", {
                                                className: "font-medium text-gray-900",
                                                children: [e.firstName, " ", e.lastName]
                                            }), (0,
                                            r.jsxs)("span", {
                                                className: "text-sm text-gray-500",
                                                children: ["(", e.techNumber || e.workAppUsername, ")"]
                                            }), ( () => {
                                                let t = el(e, null == d ? void 0 : d.timezone)
                                                  , s = null === t ? "Schedule N/A" : t ? "Working Day" : "Day Off";
                                                return (0,
                                                r.jsx)("span", {
                                                    className: "px-2 py-0.5 rounded-full text-[10px] font-semibold ring-1 ring-inset ".concat(null === t ? "bg-gray-50 text-gray-500 ring-gray-200" : t ? "bg-blue-100 text-blue-700 ring-blue-200" : "bg-yellow-100 text-yellow-700 ring-yellow-200"),
                                                    title: "".concat(s).concat(e.schedule ? " • Schedule: ".concat(e.schedule) : ""),
                                                    children: s
                                                })
                                            }
                                            )()]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "text-sm text-gray-600",
                                            children: [(0,
                                            r.jsxs)("span", {
                                                children: ["Tech ID: ", e.techNumber || e.workAppUsername || e.loginId || "N/A"]
                                            }), e.catvProvider && (0,
                                            r.jsxs)("span", {
                                                className: "ml-2",
                                                children: ["• ", e.catvProvider]
                                            }), e.areaOfWork && (0,
                                            r.jsxs)("span", {
                                                className: "ml-2",
                                                children: ["• ", e.areaOfWork]
                                            })]
                                        }), (0,
                                        r.jsx)("div", {
                                            className: "text-xs mt-1",
                                            children: e.workAppUsername && e.workAppPassword ? (0,
                                            r.jsx)("span", {
                                                className: "text-green-600",
                                                children: "✅ Ready for import"
                                            }) : (0,
                                            r.jsxs)("span", {
                                                className: "text-orange-600",
                                                children: ["⚠️ Missing: ", [!e.workAppUsername && "workAppUsername", !e.workAppPassword && "workAppPassword"].filter(Boolean).join(", "), e.techNumber && (0,
                                                r.jsxs)("span", {
                                                    className: "text-gray-500",
                                                    children: [" (Has techNumber: ", e.techNumber, ")"]
                                                })]
                                            })
                                        })]
                                    })]
                                }, e.id)))
                            }), (C.length > 0 || et.length > 0) && (0,
                            r.jsxs)("div", {
                                className: "mt-3",
                                children: [(0,
                                r.jsx)("div", {
                                    className: "text-sm font-semibold mb-1",
                                    children: "Failed Logins (".concat(C.length + et.length, ")")
                                }), [...et, ...C].slice(-5).map( (e, t) => (0,
                                r.jsx)("div", {
                                    className: "text-xs",
                                    style: {
                                        color: "#8b0000"
                                    },
                                    children: "".concat(e.name, " (").concat(e.number, ") • ").concat(e.reason)
                                }, t))]
                            })]
                        })]
                    }), w && (0,
                    r.jsxs)("div", {
                        className: "px-6 py-4 bg-blue-50 border-t border-blue-200",
                        children: [(0,
                        r.jsxs)("div", {
                            className: "flex items-center space-x-3",
                            children: [(0,
                            r.jsx)("div", {
                                className: "animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"
                            }), (0,
                            r.jsxs)("div", {
                                className: "flex-1",
                                children: [(0,
                                r.jsxs)("p", {
                                    className: "text-sm font-medium text-blue-900",
                                    children: ["Importing jobs... (", k.current, "/", k.total, ")"]
                                }), k.currentTech && (0,
                                r.jsxs)("p", {
                                    className: "text-xs text-blue-700",
                                    children: ["Current: ", k.currentTech]
                                })]
                            })]
                        }), (0,
                        r.jsx)("div", {
                            className: "mt-2 w-full bg-blue-200 rounded-full h-2",
                            children: (0,
                            r.jsx)("div", {
                                className: "bg-blue-600 h-2 rounded-full transition-all duration-300",
                                style: {
                                    width: "".concat(k.current / k.total * 100, "%")
                                }
                            })
                        })]
                    }), (0,
                    r.jsxs)("div", {
                        className: "px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",
                        children: [(0,
                        r.jsx)("button", {
                            onClick: () => {
                                if (I.current = !0,
                                E.current)
                                    try {
                                        E.current.abort()
                                    } catch (e) {}
                                s()
                            }
                            ,
                            className: "px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",
                            children: "Cancel"
                        }), (0,
                        r.jsx)("button", {
                            onClick: ec,
                            disabled: 0 === b.size || w || T && V,
                            className: "px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                            children: w ? "Importing..." : T && V ? "Auto import running" : "Import Jobs (".concat(b.size, ")")
                        })]
                    })]
                })
            }) : null
        }
        var v = s(2130)
          , N = s(2093);
        async function w(e) {
            var t, s, r;
            let a = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}
              , n = null !== (t = a.sheetName) && void 0 !== t ? t : "Prev Repeat Detail"
              , l = null !== (s = a.startRow) && void 0 !== s ? s : 15
              , o = new Uint8Array(await e.arrayBuffer())
              , i = N.ij(o, {
                type: "array"
            });
            if (!i.SheetNames.includes(n))
                throw Error("Sheet '".concat(n, "' not found. Available: ").concat(i.SheetNames.join(", ")));
            let c = i.Sheets[n]
              , d = N.P6.sheet_to_json(c, {
                header: 1,
                raw: !0
            })
              , m = d.length - 1;
            for (; m >= 0; ) {
                let e = null === (r = d[m]) || void 0 === r ? void 0 : r[0];
                if (null != e && "" !== String(e).trim())
                    break;
                m--
            }
            let u = []
              , x = Math.max(0, l - 1);
            for (let e = x; e <= m; e++) {
                let t = d[e] || []
                  , s = t[0]
                  , r = t[6];
                if (null == s)
                    continue;
                let a = function(e) {
                    if (null == e)
                        return null;
                    let t = String(e).trim()
                      , s = t.match(/^(\d+)-(\d+)-\s*.*/);
                    if (s)
                        return "0".concat(s[1]).concat(s[2]);
                    let r = t.replace(/\D/g, "");
                    return r ? "0".concat(r) : null
                }(s)
                  , n = function(e) {
                    if (null == e)
                        return null;
                    if ("number" == typeof e)
                        try {
                            var t;
                            let s = (null === (t = N.kS) || void 0 === t ? void 0 : t.parse_date_code) ? N.kS.parse_date_code(e) : null;
                            if (s) {
                                let e = s.y
                                  , t = String(s.m).padStart(2, "0")
                                  , r = String(s.d).padStart(2, "0");
                                return "".concat(e, "-").concat(t, "-").concat(r)
                            }
                        } catch (e) {
                            return null
                        }
                    if (e instanceof Date) {
                        let t = e.getFullYear()
                          , s = String(e.getMonth() + 1).padStart(2, "0")
                          , r = String(e.getDate()).padStart(2, "0");
                        return "".concat(t, "-").concat(s, "-").concat(r)
                    }
                    let s = String(e).trim()
                      , r = s.match(/^(\d{4}-\d{2}-\d{2})/);
                    if (r)
                        return r[1];
                    let a = new Date(s);
                    if (!isNaN(a.getTime())) {
                        let e = a.getFullYear()
                          , t = String(a.getMonth() + 1).padStart(2, "0")
                          , s = String(a.getDate()).padStart(2, "0");
                        return "".concat(e, "-").concat(t, "-").concat(s)
                    }
                    return null
                }(r);
                a && u.push({
                    rowIndex: e + 1,
                    jobNumber: a,
                    scheduleDate: null != n ? n : "",
                    comments: "",
                    jobOrigin: "OS2110 Import",
                    timeFrame: "8-11",
                    description: "",
                    rawData: t
                })
            }
            return u
        }
        function D(e) {
            let {isOpen: t, onClose: s, selectedDate: n} = e
              , {company: d, user: m} = (0,
            l.a)()
              , {addNotification: u} = (0,
            o.z)()
              , [x,p] = (0,
            a.useState)(null)
              , [h,f] = (0,
            a.useState)(!1)
              , [b,j] = (0,
            a.useState)(!1)
              , [y,D] = (0,
            a.useState)({
                current: 0,
                total: 0,
                currentJob: ""
            })
              , [k,A] = (0,
            a.useState)([])
              , [C,S] = (0,
            a.useState)(null)
              , [E,I] = (0,
            a.useState)(0)
              , [T,P] = (0,
            a.useState)([])
              , [L,M] = (0,
            a.useState)(!1)
              , [R,O] = (0,
            a.useState)([])
              , F = (0,
            a.useRef)(new Map)
              , J = e => {
                let t = new Date().toLocaleTimeString()
                  , s = "[".concat(t, "] ").concat(e);
                console.log(s),
                O(e => [...e.slice(-9), s])
            }
              , W = e => {
                if (!e)
                    return null;
                let t = e.split("-").map(Number);
                if (3 !== t.length || t.some(isNaN))
                    return null;
                let[s,r,a] = t;
                return new Date(s,r - 1,a)
            }
              , B = e => {
                if (null == e)
                    return !0;
                let t = String(e).trim();
                return "" === t || "(blank)" === t.toLowerCase()
            }
              , z = e => {
                let t = null == e ? void 0 : e[9]
                  , s = null == e ? void 0 : e[10]
                  , r = null == e ? void 0 : e[11]
                  , a = []
                  , n = [];
                return B(t) || n.push(String(t).trim()),
                B(s) || n.push(String(s).trim()),
                n.length > 0 && a.push(...n),
                B(r) || a.push(String(r).trim()),
                a
            }
              , U = {
                "8AM-11AM": "8-11",
                "9AM-12PM": "9-12",
                "11AM-2PM": "11-14",
                "12PM-3PM": "12-15",
                "2PM-5PM": "14-17",
                "3PM-6PM": "15-18",
                "5PM-8PM": "17-20"
            };
            (0,
            a.useEffect)( () => {
                console.log("\uD83D\uDD25 ALTICE REPEATS - useEffect: Modal state changed, isOpen:", t),
                t ? (console.log("\uD83D\uDD25 ALTICE REPEATS - useEffect: Modal opened"),
                J("Modal opened")) : (console.log("\uD83D\uDD25 ALTICE REPEATS - useEffect: Modal closed, resetting all state"),
                p(null),
                A([]),
                S(null),
                D({
                    current: 0,
                    total: 0,
                    currentJob: ""
                }),
                I(0),
                P([]),
                M(!1),
                f(!1),
                j(!1),
                O([]))
            }
            , [t]);
            let V = e => new Promise( (t, s) => {
                console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Starting file reading process");
                let r = new FileReader;
                r.onload = e => {
                    try {
                        var r, a, l, o, i, c, m, u, x;
                        console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: File read successfully, processing data...");
                        let p = new Uint8Array(null === (r = e.target) || void 0 === r ? void 0 : r.result)
                          , h = N.ij(p, {
                            type: "array"
                        });
                        console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Workbook loaded, sheet names:", h.SheetNames);
                        let f = h.SheetNames.find(e => e.toLowerCase().includes("pending data"));
                        if (!f) {
                            console.log('\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Could not find "Pending Data" sheet'),
                            s(Error('Could not find "Pending Data" sheet in the Excel file'));
                            return
                        }
                        console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Found sheet:", f);
                        let b = h.Sheets[f]
                          , j = N.P6.sheet_to_json(b, {
                            header: 1
                        });
                        console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Converted to JSON, total rows:", j.length);
                        let y = []
                          , v = (0,
                        g.fO)(d)
                          , w = n ? new Date(n + "T00:00:00") : (0,
                        g.ZN)(v);
                        console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Current date for filtering:", w.toISOString());
                        for (let e = 1; e < j.length; e++) {
                            let t;
                            let s = j[e];
                            if (!s || 0 === s.length) {
                                console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Skipping empty row ".concat(e + 1));
                                continue
                            }
                            let r = (null === (a = s[7]) || void 0 === a ? void 0 : a.toString()) || ""
                              , n = (null === (l = s[8]) || void 0 === l ? void 0 : l.toString()) || ""
                              , d = (null === (o = s[14]) || void 0 === o ? void 0 : o.toString()) || ""
                              , p = (null === (i = s[19]) || void 0 === i ? void 0 : i.toString()) || ""
                              , h = (null === (c = s[20]) || void 0 === c ? void 0 : c.toString()) || ""
                              , f = (null === (m = s[21]) || void 0 === m ? void 0 : m.toString()) || ""
                              , b = (null === (u = s[23]) || void 0 === u ? void 0 : u.toString()) || ""
                              , N = (null === (x = s[50]) || void 0 === x ? void 0 : x.toString()) || "";
                            if (console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Row ".concat(e + 1, " data:"), {
                                columnH: r,
                                columnI: n,
                                columnO: d,
                                columnT: p,
                                columnU: h,
                                columnV: f,
                                columnX: b,
                                columnAY: N
                            }),
                            !r || !n || !d) {
                                console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Skipping row ".concat(e + 1, " - missing essential data"));
                                continue
                            }
                            let D = "0".concat(r).concat(n);
                            console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Created job number: ".concat(D));
                            try {
                                if (d.includes("-")) {
                                    let[e,s,r] = d.split("-").map(e => parseInt(e));
                                    t = new Date(r,e - 1,s),
                                    console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Parsed date from MM-DD-YYYY format: ".concat(t.toISOString()))
                                } else
                                    t = new Date(d),
                                    console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Parsed date from other format: ".concat(t.toISOString()));
                                if (isNaN(t.getTime()) || t < w) {
                                    console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Skipping row ".concat(e + 1, " - invalid or past date: ").concat(d));
                                    continue
                                }
                            } catch (t) {
                                console.warn("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Invalid date format in row ".concat(e + 1, ": ").concat(d), t);
                                continue
                            }
                            let k = U[h] || "8-11";
                            console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Mapped time frame: ".concat(h, " -> ").concat(k));
                            let A = [f, b].filter(Boolean).join(" ").trim()
                              , C = {
                                rowIndex: e + 1,
                                jobNumber: D,
                                scheduleDate: (0,
                                g.cE)(t, v),
                                comments: p,
                                jobOrigin: N,
                                timeFrame: k,
                                description: A,
                                rawData: s
                            };
                            console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Adding parsed row:", C),
                            y.push(C)
                        }
                        console.log("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Parsing complete, total valid rows:", y.length),
                        t(y)
                    } catch (e) {
                        console.error("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Error processing file:", e),
                        s(e)
                    }
                }
                ,
                r.onerror = () => {
                    console.error("\uD83D\uDD25 ALTICE REPEATS - parseExcelFile: Failed to read file"),
                    s(Error("Failed to read file"))
                }
                ,
                r.readAsArrayBuffer(e)
            }
            )
              , H = async (e, t) => {
                if (console.log("\uD83D\uDD25 ALTICE REPEATS - checkIfJobIsRepeat called for job ".concat(e, ", date ").concat(t)),
                !d)
                    return console.log("\uD83D\uDD25 ALTICE REPEATS - No company found, returning false"),
                    {
                        isRepeat: !1
                    };
                if (!t)
                    return console.log("\uD83D\uDD25 ALTICE REPEATS - No excel schedule date provided, returning false"),
                    {
                        isRepeat: !1
                    };
                let s = "".concat(e, "|").concat(t);
                if (F.current.has(s))
                    return console.log("\uD83D\uDD25 ALTICE REPEATS - Using cached repeat check result for", s),
                    F.current.get(s);
                try {
                    let a;
                    console.log("\uD83D\uDD25 ALTICE REPEATS - Building optimized query for company ".concat(d.companyId));
                    let n = (0,
                    i.collection)(c.db, "companies", d.companyId, "jobs")
                      , l = new Date(t)
                      , o = new Date(l);
                    o.setDate(o.getDate() + 31);
                    let m = "".concat(o.getFullYear(), "-").concat(String(o.getMonth() + 1).padStart(2, "0"), "-").concat(String(o.getDate()).padStart(2, "0"))
                      , u = (0,
                    i.query)(n, (0,
                    i.where)("jobId", "==", e), (0,
                    i.where)("archived", "==", !0), (0,
                    i.where)("status", "==", "completed"), (0,
                    i.where)("scheduleDate", ">=", t), (0,
                    i.where)("scheduleDate", "<=", m), (0,
                    i.orderBy)("scheduleDate", "asc"), (0,
                    i.limit)(1));
                    console.log("\uD83D\uDD25 ALTICE REPEATS - Executing Firestore query for job ".concat(e, "..."));
                    try {
                        a = await (0,
                        i.getDocs)(u)
                    } catch (d) {
                        var r;
                        console.warn("\uD83D\uDD25 ALTICE REPEATS - Optimized query failed, likely due to missing composite index. Falling back to broad query.", null !== (r = null == d ? void 0 : d.message) && void 0 !== r ? r : d);
                        let a = (0,
                        i.query)(n, (0,
                        i.where)("jobId", "==", e), (0,
                        i.where)("archived", "==", !0), (0,
                        i.where)("status", "==", "completed"))
                          , l = await (0,
                        i.getDocs)(a)
                          , o = new Date(t)
                          , c = null;
                        for (let e = 0; e < l.docs.length; e++) {
                            let t = l.docs[e]
                              , s = t.data();
                            if ("SRO" === s.type)
                                continue;
                            let r = new Date(s.scheduleDate);
                            if (r < o)
                                continue;
                            let a = Math.floor((o.getTime() - r.getTime()) / 864e5);
                            if (a <= 31 && a >= 0) {
                                c = t;
                                break
                            }
                        }
                        if (c) {
                            let t = c.data()
                              , r = new Date(t.scheduleDate)
                              , a = Math.floor((o.getTime() - r.getTime()) / 864e5)
                              , n = {
                                isRepeat: !0,
                                repeatInfo: {
                                    isRepeat: !0,
                                    originalJobDate: t.scheduleDate,
                                    daysSinceOriginal: a,
                                    originalJobId: t.jobId
                                },
                                parentJobData: t
                            };
                            return F.current.set(s, n),
                            console.log("\uD83D\uDD25 ALTICE REPEATS - Fallback matched repeat for job ".concat(e, " with parent ").concat(t.jobId)),
                            n
                        }
                        {
                            let t = {
                                isRepeat: !1
                            };
                            return F.current.set(s, t),
                            console.log("\uD83D\uDD25 ALTICE REPEATS - Fallback found no repeat for job ".concat(e)),
                            t
                        }
                    }
                    if (console.log("\uD83D\uDD25 ALTICE REPEATS - Query completed, found ".concat(a.docs.length, " archived jobs")),
                    a.docs.length > 0) {
                        let r = a.docs[0].data();
                        if ("SRO" === r.type) {
                            console.log("\uD83D\uDD25 ALTICE REPEATS - Skipping SRO job ".concat(r.jobId));
                            let e = {
                                isRepeat: !1
                            };
                            return F.current.set(s, e),
                            e
                        }
                        let n = new Date(t)
                          , l = new Date(r.scheduleDate)
                          , o = Math.floor((n.getTime() - l.getTime()) / 864e5)
                          , i = {
                            isRepeat: !0,
                            repeatInfo: {
                                isRepeat: !0,
                                originalJobDate: r.scheduleDate,
                                daysSinceOriginal: o,
                                originalJobId: r.jobId
                            },
                            parentJobData: r
                        };
                        return F.current.set(s, i),
                        console.log("\uD83D\uDD25 ALTICE REPEATS - Job ".concat(e, " is a repeat! Found parent job ").concat(r.jobId)),
                        i
                    }
                    console.log("\uD83D\uDD25 ALTICE REPEATS - Job ".concat(e, " is not a repeat"));
                    let x = {
                        isRepeat: !1
                    };
                    return F.current.set(s, x),
                    x
                } catch (t) {
                    return console.error("\uD83D\uDD25 ALTICE REPEATS - Error checking if job ".concat(e, " is repeat:"), t),
                    {
                        isRepeat: !1
                    }
                }
            }
              , _ = async e => {
                var t, s, r;
                console.log("\uD83D\uDD25 ALTICE REPEATS - Starting file selection process");
                let a = null === (t = e.target.files) || void 0 === t ? void 0 : t[0];
                if (!a) {
                    console.log("\uD83D\uDD25 ALTICE REPEATS - No file selected");
                    return
                }
                if (console.log("\uD83D\uDD25 ALTICE REPEATS - File selected:", {
                    name: a.name,
                    size: a.size,
                    type: a.type,
                    lastModified: new Date(a.lastModified).toISOString()
                }),
                !a.name.toLowerCase().endsWith(".xlsx") && !a.name.toLowerCase().endsWith(".xls")) {
                    console.log("\uD83D\uDD25 ALTICE REPEATS - Invalid file type:", a.name),
                    u({
                        title: "Invalid File Type",
                        message: "Please select an Excel file (.xlsx or .xls)",
                        type: "error"
                    });
                    return
                }
                S(a),
                f(!0),
                J("Loading state set to true, starting file parsing...");
                try {
                    console.log("\uD83D\uDD25 ALTICE REPEATS - Calling parseExcelFile...");
                    let e = await V(a);
                    J("File parsed successfully, found ".concat(e.length, " rows")),
                    A(e),
                    J("Starting repeat job checking process...");
                    let t = []
                      , n = []
                      , l = (0,
                    g.fO)(d)
                      , o = (0,
                    g.cE)((0,
                    g.ZN)(l));
                    for (let a = 0; a < e.length; a++) {
                        let l = e[a];
                        console.log("\uD83D\uDD25 ALTICE REPEATS - Checking job ".concat(a + 1, "/").concat(e.length, ": ").concat(l.jobNumber));
                        try {
                            if (l.scheduleDate < o) {
                                console.log("\uD83D\uDD25 ALTICE REPEATS - Skipping ".concat(l.jobNumber, " — schedule date ").concat(l.scheduleDate, " is before today ").concat(o));
                                continue
                            }
                            let e = await H(l.jobNumber, l.scheduleDate);
                            if (console.log("\uD83D\uDD25 ALTICE REPEATS - Repeat check result for ".concat(l.jobNumber, ":"), {
                                isRepeat: e.isRepeat,
                                hasParentJobData: !!e.parentJobData,
                                hasRepeatInfo: !!e.repeatInfo
                            }),
                            e.isRepeat) {
                                t.push(l),
                                console.log("\uD83D\uDD25 ALTICE REPEATS - Job ".concat(l.jobNumber, " is a repeat, adding to import list"));
                                let a = e.parentJobData
                                  , o = [a.comment || "", l.comments || ""].filter(Boolean).join(" | ");
                                n.push({
                                    jobNumber: l.jobNumber,
                                    scheduleDate: l.scheduleDate,
                                    timeFrame: l.timeFrame,
                                    description: l.description,
                                    jobOrigin: l.jobOrigin,
                                    address: a.address || "",
                                    city: a.city || "",
                                    customerName: a.customerName || "",
                                    customerPhone: a.customerPhone || "",
                                    priority: a.priority || "medium",
                                    comment: o,
                                    originalJobDate: null === (s = e.repeatInfo) || void 0 === s ? void 0 : s.originalJobDate,
                                    daysSinceOriginal: null === (r = e.repeatInfo) || void 0 === r ? void 0 : r.daysSinceOriginal
                                })
                            } else
                                console.log("\uD83D\uDD25 ALTICE REPEATS - Job ".concat(l.jobNumber, " is not a repeat, skipping"))
                        } catch (e) {
                            console.error("\uD83D\uDD25 ALTICE REPEATS - Error checking repeat status for job ".concat(l.jobNumber, ":"), e)
                        }
                    }
                    J("Repeat checking complete: ".concat(t.length, " repeat jobs found out of ").concat(e.length, " total")),
                    I(t.length),
                    P(n),
                    M(!0),
                    J("State updated, showing preview"),
                    u({
                        title: "File Parsed Successfully",
                        message: "Found ".concat(e.length, " valid job entries (").concat(t.length, " repeat jobs to import)"),
                        type: "success"
                    })
                } catch (e) {
                    console.error("\uD83D\uDD25 ALTICE REPEATS - Error parsing file:", e),
                    u({
                        title: "Parse Error",
                        message: e instanceof Error ? e.message : "Failed to parse Excel file",
                        type: "error"
                    })
                } finally {
                    J("Setting loading to false"),
                    f(!1)
                }
            }
              , q = async e => {
                var t, s, r, a, n;
                console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Starting file selection process");
                let l = null === (t = e.target.files) || void 0 === t ? void 0 : t[0];
                if (!l) {
                    console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: No file selected");
                    return
                }
                if (console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: File selected:", {
                    name: l.name,
                    size: l.size,
                    type: l.type,
                    lastModified: new Date(l.lastModified).toISOString()
                }),
                !l.name.toLowerCase().endsWith(".xlsm") && !l.name.toLowerCase().endsWith(".xlsx")) {
                    console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Invalid file type:", l.name),
                    u({
                        title: "Invalid File Type",
                        message: "Please select an Excel macro-enabled file (.xlsm) or .xlsx",
                        type: "error"
                    });
                    return
                }
                S(l),
                f(!0),
                J("OS2110: Loading state set to true, starting file parsing...");
                try {
                    console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Calling parseOS2110File...");
                    let e = await w(l);
                    J("OS2110: File parsed successfully, found ".concat(e.length, " rows")),
                    A(e),
                    J("OS2110: Starting repeat job checking process...");
                    let t = []
                      , o = []
                      , i = (0,
                    g.fO)(d)
                      , c = (0,
                    g.cE)((0,
                    g.ZN)(i));
                    for (let l = 0; l < e.length; l++) {
                        let i = e[l];
                        console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Checking job ".concat(l + 1, "/").concat(e.length, ": ").concat(i.jobNumber));
                        try {
                            if (i.scheduleDate < c) {
                                console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Skipping ".concat(i.jobNumber, " — schedule date ").concat(i.scheduleDate, " is before today ").concat(c));
                                continue
                            }
                            let e = await H(i.jobNumber, i.scheduleDate);
                            if (console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Repeat check result for ".concat(i.jobNumber, ":"), {
                                isRepeat: e.isRepeat,
                                hasParentJobData: !!e.parentJobData,
                                hasRepeatInfo: !!e.repeatInfo
                            }),
                            e.isRepeat) {
                                let l = W(null === (s = e.repeatInfo) || void 0 === s ? void 0 : s.originalJobDate)
                                  , c = W(i.scheduleDate);
                                if (l && c && l < c) {
                                    console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Skipping ".concat(i.jobNumber, " — parent job date ").concat(null === (n = e.repeatInfo) || void 0 === n ? void 0 : n.originalJobDate, " is before parsed G date ").concat(i.scheduleDate));
                                    continue
                                }
                                t.push(i),
                                console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Job ".concat(i.jobNumber, " is a repeat, adding to import list"));
                                let d = e.parentJobData
                                  , m = z(i.rawData);
                                [d.comment || "", ...m].filter(Boolean).join(" | "),
                                o.push({
                                    jobNumber: i.jobNumber,
                                    scheduleDate: i.scheduleDate,
                                    timeFrame: "N/A",
                                    description: d.description || "",
                                    jobOrigin: "N/A",
                                    address: d.address || "",
                                    city: d.city || "",
                                    customerName: d.customerName || "",
                                    customerPhone: d.customerPhone || "",
                                    priority: d.priority || "medium",
                                    comment: d.comment || "",
                                    originalJobDate: null === (r = e.repeatInfo) || void 0 === r ? void 0 : r.originalJobDate,
                                    daysSinceOriginal: null === (a = e.repeatInfo) || void 0 === a ? void 0 : a.daysSinceOriginal
                                })
                            } else
                                console.log("\uD83D\uDD25 ALTICE REPEATS - OS2110: Job ".concat(i.jobNumber, " is not a repeat, skipping"))
                        } catch (e) {
                            console.error("\uD83D\uDD25 ALTICE REPEATS - OS2110: Error checking repeat status for ".concat(i.jobNumber, ":"), e)
                        }
                    }
                    J("OS2110: Repeat checking complete: ".concat(t.length, " repeat jobs found out of ").concat(e.length, " total")),
                    I(t.length),
                    P(o),
                    M(!0),
                    J("OS2110: State updated, showing preview"),
                    u({
                        title: "File Parsed Successfully",
                        message: "Found ".concat(e.length, " valid job entries (").concat(t.length, " repeat jobs to import)"),
                        type: "success"
                    })
                } catch (e) {
                    console.error("\uD83D\uDD25 ALTICE REPEATS - OS2110: Error parsing file:", e),
                    u({
                        title: "Parse Error",
                        message: e instanceof Error ? e.message : "Failed to parse Excel file",
                        type: "error"
                    })
                } finally {
                    J("OS2110: Setting loading to false"),
                    f(!1)
                }
            }
              , G = async () => {
                if (console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Starting import process"),
                !d || !m || 0 === k.length) {
                    console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Missing required data:", {
                        hasCompany: !!d,
                        hasUser: !!m,
                        parsedDataLength: k.length
                    });
                    return
                }
                J("Setting importing state to true"),
                j(!0),
                D({
                    current: 0,
                    total: k.length,
                    currentJob: ""
                });
                let e = 0
                  , t = 0
                  , r = 0
                  , a = 0;
                try {
                    console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Starting to process ".concat(k.length, " jobs"));
                    let o = (0,
                    g.fO)(d)
                      , i = (0,
                    g.cE)((0,
                    g.ZN)(o));
                    for (let s = 0; s < k.length; s++) {
                        let o = k[s];
                        console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Processing job ".concat(s + 1, "/").concat(k.length, ": ").concat(o.jobNumber)),
                        D({
                            current: s + 1,
                            total: k.length,
                            currentJob: o.jobNumber
                        });
                        try {
                            if (o.scheduleDate < i) {
                                r++,
                                console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Skipping ".concat(o.jobNumber, " — schedule date ").concat(o.scheduleDate, " is before today ").concat(i));
                                continue
                            }
                            console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Checking if job ".concat(o.jobNumber, " is a repeat..."));
                            let s = await H(o.jobNumber, o.scheduleDate);
                            if (!s.isRepeat) {
                                r++,
                                console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Skipping job ".concat(o.jobNumber, " - not a repeat job"));
                                continue
                            }
                            if ("OS2110" === x) {
                                var n, l;
                                let e = W(null === (n = s.repeatInfo) || void 0 === n ? void 0 : n.originalJobDate)
                                  , t = W(o.scheduleDate);
                                if (e && t && e < t) {
                                    r++,
                                    console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Skipping ".concat(o.jobNumber, " — parent job date ").concat(null === (l = s.repeatInfo) || void 0 === l ? void 0 : l.originalJobDate, " is before parsed G date ").concat(o.scheduleDate));
                                    continue
                                }
                            }
                            let a = s.repeatInfo
                              , c = s.parentJobData;
                            t++,
                            console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Job ".concat(o.jobNumber, " is a repeat, creating job..."));
                            let u = "OS2110" === x
                              , p = u ? [c.comment || "", ...z(o.rawData)].filter(Boolean).join(" | ") : [c.comment || "", o.comments || ""].filter(Boolean).join(" | ")
                              , h = {
                                jobId: o.jobNumber,
                                type: "In-house",
                                address: c.address || "",
                                unitNumber: c.unitNumber || "",
                                city: c.city || "",
                                customerName: c.customerName || "",
                                customerPhone: c.customerPhone || "",
                                timeFrame: u ? "N/A" : o.timeFrame,
                                scheduleDate: o.scheduleDate,
                                priority: c.priority || "medium",
                                description: u ? c.description || "" : o.description || "",
                                assignedTechId: "N/A",
                                position: c.position || void 0,
                                originalId: u ? "N/A" : o.jobOrigin || "Altice Repeats Import",
                                jobOrigin: u ? "N/A" : o.jobOrigin || "Altice Repeats Import",
                                isExternalReassignment: !1,
                                source: "altice-repeats-import",
                                catvProvider: "Altice/Optimum",
                                additionalPhone: c.additionalPhone || "",
                                comment: p,
                                dispatchComment: c.dispatchComment || "",
                                fullAccountNumber: c.fullAccountNumber || "",
                                resolutionCodes: c.resolutionCodes || "",
                                auditLogs: c.auditLogs || [],
                                completionPhotos: c.completionPhotos || [],
                                selfQCPhotos: c.selfQCPhotos || [],
                                isRepeat: !0,
                                repeatInfo: {
                                    type: "WITHIN_31_DAYS",
                                    originalJobId: a.originalJobId,
                                    originalJobDate: a.originalJobDate ? new Date(a.originalJobDate) : void 0,
                                    daysSinceOriginal: a.daysSinceOriginal
                                }
                            };
                            console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Job request created for ".concat(o.jobNumber, ":"), h),
                            console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Calling createJob for ".concat(o.jobNumber, "...")),
                            await (0,
                            v.Cq)(d.companyId, h, m.id, "".concat(m.firstName, " ").concat(m.lastName)),
                            e++,
                            console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Successfully created job ".concat(o.jobNumber))
                        } catch (e) {
                            console.error("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Error creating job ".concat(o.jobNumber, ":"), e),
                            a++
                        }
                    }
                    console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Import process completed:", {
                        successCount: e,
                        repeatCount: t,
                        skippedCount: r,
                        errorCount: a
                    }),
                    u({
                        title: "Import Complete",
                        message: "Successfully imported ".concat(e, " repeat jobs (").concat(r, " skipped - not repeats, ").concat(a, " errors)"),
                        type: e > 0 ? "success" : "error"
                    }),
                    e > 0 && (console.log("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Closing modal due to successful import"),
                    s())
                } catch (e) {
                    console.error("\uD83D\uDD25 ALTICE REPEATS - handleConfirmImport: Import error:", e),
                    u({
                        title: "Import Failed",
                        message: "An error occurred during import",
                        type: "error"
                    })
                } finally {
                    J("Setting importing state to false"),
                    j(!1),
                    D({
                        current: 0,
                        total: 0,
                        currentJob: ""
                    })
                }
            }
              , Y = () => {
                console.log("\uD83D\uDD25 ALTICE REPEATS - handleBackToFileSelection: Going back to file selection"),
                M(!1),
                P([]),
                A([]),
                S(null),
                I(0),
                f(!1),
                j(!1),
                D({
                    current: 0,
                    total: 0,
                    currentJob: ""
                }),
                O([]),
                J("State reset complete")
            }
            ;
            return t ? (0,
            r.jsx)("div", {
                className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
                children: (0,
                r.jsxs)("div", {
                    className: "bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",
                    children: [(0,
                    r.jsx)("div", {
                        className: "bg-gradient-to-r from-purple-600 to-purple-700 text-white p-6 rounded-t-2xl",
                        children: (0,
                        r.jsxs)("div", {
                            className: "flex justify-between items-center",
                            children: [(0,
                            r.jsxs)("div", {
                                children: [(0,
                                r.jsx)("h2", {
                                    className: "text-2xl font-bold",
                                    children: "Altice Repeats Import"
                                }), (0,
                                r.jsx)("p", {
                                    className: "text-purple-100 mt-1",
                                    children: "Import repeat jobs from Altice Excel file"
                                })]
                            }), (0,
                            r.jsx)("button", {
                                onClick: s,
                                className: "p-2 bg-white/20 rounded-xl hover:bg-white/30 transition-colors duration-200",
                                children: (0,
                                r.jsx)("svg", {
                                    className: "w-6 h-6",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: (0,
                                    r.jsx)("path", {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M6 18L18 6M6 6l12 12"
                                    })
                                })
                            })]
                        })
                    }), (0,
                    r.jsxs)("div", {
                        className: "p-6",
                        children: [(0,
                        r.jsxs)("div", {
                            className: "mb-6",
                            children: [(0,
                            r.jsx)("h3", {
                                className: "text-lg font-semibold text-gray-900",
                                children: "Choose Import Type"
                            }), (0,
                            r.jsxs)("div", {
                                className: "mt-3 flex flex-wrap gap-3",
                                children: [(0,
                                r.jsx)("button", {
                                    onClick: () => p("PENDING_DASHBOARD"),
                                    className: "px-4 py-2 rounded-lg border transition-colors ".concat("PENDING_DASHBOARD" === x ? "bg-purple-600 text-white border-purple-600" : "bg-white text-purple-700 border-purple-300 hover:bg-purple-50"),
                                    children: "Pending repeat dashboard.xlsx import"
                                }), (0,
                                r.jsx)("button", {
                                    onClick: () => p("OS2110"),
                                    className: "px-4 py-2 rounded-lg border transition-colors ".concat("OS2110" === x ? "bg-purple-600 text-white border-purple-600" : "bg-white text-purple-700 border-purple-300 hover:bg-purple-50"),
                                    children: "OS2110.xlsm import"
                                })]
                            }), !x && (0,
                            r.jsx)("p", {
                                className: "text-xs text-gray-500 mt-2",
                                children: "Select an import type to continue."
                            })]
                        }), "PENDING_DASHBOARD" === x && (L ? (0,
                        r.jsx)(r.Fragment, {
                            children: (0,
                            r.jsxs)("div", {
                                className: "mb-6",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "flex justify-between items-center mb-4",
                                    children: [(0,
                                    r.jsxs)("h3", {
                                        className: "text-lg font-semibold text-gray-900",
                                        children: ["Preview Jobs to Import (", T.length, " repeat jobs)"]
                                    }), (0,
                                    r.jsx)("button", {
                                        onClick: Y,
                                        className: "text-sm text-purple-600 hover:text-purple-700 underline",
                                        children: "← Back to File Selection"
                                    })]
                                }), (0,
                                r.jsx)("div", {
                                    className: "bg-gray-50 rounded-lg p-4 max-h-96 overflow-y-auto",
                                    children: (0,
                                    r.jsx)("div", {
                                        className: "space-y-4",
                                        children: T.map( (e, t) => (0,
                                        r.jsx)("div", {
                                            className: "bg-white rounded-lg p-4 border border-gray-200",
                                            children: (0,
                                            r.jsxs)("div", {
                                                className: "grid grid-cols-2 gap-4 text-sm",
                                                children: [(0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Job Number:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.jobNumber
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Schedule Date:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.scheduleDate
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Time Frame:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.timeFrame
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Priority:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.priority
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Customer:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.customerName
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Address:"
                                                    }), (0,
                                                    r.jsxs)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: [e.address, ", ", e.city]
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Phone:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.customerPhone
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Description:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.description
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Comment:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.comment
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Job Origin:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.jobOrigin
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Repeat Info:"
                                                    }), (0,
                                                    r.jsxs)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: ["Original job from ", e.originalJobDate, " (", e.daysSinceOriginal, " days ago)"]
                                                    })]
                                                })]
                                            })
                                        }, t))
                                    })
                                })]
                            })
                        }) : (0,
                        r.jsx)(r.Fragment, {
                            children: (0,
                            r.jsxs)("div", {
                                className: "mb-6",
                                children: [(0,
                                r.jsx)("label", {
                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                    children: "Select Excel File"
                                }), (0,
                                r.jsx)("input", {
                                    type: "file",
                                    accept: ".xlsx,.xls",
                                    onChange: _,
                                    className: "block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",
                                    disabled: h || b
                                }), (0,
                                r.jsx)("p", {
                                    className: "text-xs text-gray-500 mt-1",
                                    children: 'The file should contain a "Pending Data" sheet with job information'
                                })]
                            })
                        })), "OS2110" === x && (L ? (0,
                        r.jsx)(r.Fragment, {
                            children: (0,
                            r.jsxs)("div", {
                                className: "mb-6",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "flex justify-between items-center mb-4",
                                    children: [(0,
                                    r.jsxs)("h3", {
                                        className: "text-lg font-semibold text-gray-900",
                                        children: ["Preview Jobs to Import (", T.length, " repeat jobs)"]
                                    }), (0,
                                    r.jsx)("button", {
                                        onClick: Y,
                                        className: "text-sm text-purple-600 hover:text-purple-700 underline",
                                        children: "← Back to File Selection"
                                    })]
                                }), (0,
                                r.jsx)("div", {
                                    className: "bg-gray-50 rounded-lg p-4 max-h-96 overflow-y-auto",
                                    children: (0,
                                    r.jsx)("div", {
                                        className: "space-y-4",
                                        children: T.map( (e, t) => (0,
                                        r.jsx)("div", {
                                            className: "bg-white rounded-lg p-4 border border-gray-200",
                                            children: (0,
                                            r.jsxs)("div", {
                                                className: "grid grid-cols-2 gap-4 text-sm",
                                                children: [(0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Job Number:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.jobNumber
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Schedule Date:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.scheduleDate
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Time Frame:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.timeFrame
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Priority:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.priority
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Customer:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.customerName
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Address:"
                                                    }), (0,
                                                    r.jsxs)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: [e.address, ", ", e.city]
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Phone:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.customerPhone
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Description:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.description
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Comment:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.comment
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Job Origin:"
                                                    }), (0,
                                                    r.jsx)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: e.jobOrigin
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "col-span-2",
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "font-medium text-gray-700",
                                                        children: "Repeat Info:"
                                                    }), (0,
                                                    r.jsxs)("span", {
                                                        className: "ml-2 text-gray-900",
                                                        children: ["Original job from ", e.originalJobDate, " (", e.daysSinceOriginal, " days ago)"]
                                                    })]
                                                })]
                                            })
                                        }, t))
                                    })
                                })]
                            })
                        }) : (0,
                        r.jsx)(r.Fragment, {
                            children: (0,
                            r.jsxs)("div", {
                                className: "mb-6",
                                children: [(0,
                                r.jsx)("label", {
                                    className: "block text-sm font-medium text-gray-700 mb-2",
                                    children: "Select OS2110 .xlsm or .xlsx File"
                                }), (0,
                                r.jsx)("input", {
                                    type: "file",
                                    accept: ".xlsm,.xlsx",
                                    onChange: q,
                                    className: "block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100",
                                    disabled: h || b
                                }), (0,
                                r.jsx)("p", {
                                    className: "text-xs text-gray-500 mt-1",
                                    children: 'The file should contain the "Prev Repeat Detail" sheet starting at row 15.'
                                })]
                            })
                        })), h && (0,
                        r.jsxs)("div", {
                            className: "text-center py-8",
                            children: [(0,
                            r.jsx)("div", {
                                className: "animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"
                            }), (0,
                            r.jsx)("p", {
                                className: "mt-2 text-gray-600",
                                children: "Parsing Excel file..."
                            })]
                        }), b && (0,
                        r.jsx)("div", {
                            className: "mb-6",
                            children: (0,
                            r.jsxs)("div", {
                                className: "bg-blue-50 rounded-lg p-4",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "flex items-center justify-between mb-2",
                                    children: [(0,
                                    r.jsx)("span", {
                                        className: "text-sm font-medium text-blue-900",
                                        children: "Importing Jobs"
                                    }), (0,
                                    r.jsxs)("span", {
                                        className: "text-sm text-blue-700",
                                        children: [y.current, " / ", y.total]
                                    })]
                                }), (0,
                                r.jsx)("div", {
                                    className: "w-full bg-blue-200 rounded-full h-2",
                                    children: (0,
                                    r.jsx)("div", {
                                        className: "bg-blue-600 h-2 rounded-full transition-all duration-300",
                                        style: {
                                            width: "".concat(y.current / y.total * 100, "%")
                                        }
                                    })
                                }), y.currentJob && (0,
                                r.jsxs)("p", {
                                    className: "text-sm text-blue-700 mt-2",
                                    children: ["Processing: ", y.currentJob]
                                })]
                            })
                        }), x && R.length > 0 && (0,
                        r.jsx)("div", {
                            className: "mb-6",
                            children: (0,
                            r.jsxs)("details", {
                                className: "bg-gray-100 rounded-lg p-4",
                                children: [(0,
                                r.jsxs)("summary", {
                                    className: "cursor-pointer font-medium text-gray-700 mb-2",
                                    children: ["\uD83D\uDD0D Debug Logs (", R.length, ")"]
                                }), (0,
                                r.jsx)("div", {
                                    className: "bg-black text-green-400 p-3 rounded text-xs font-mono max-h-40 overflow-y-auto",
                                    children: R.map( (e, t) => (0,
                                    r.jsx)("div", {
                                        className: "mb-1",
                                        children: e
                                    }, t))
                                })]
                            })
                        }), (0,
                        r.jsxs)("div", {
                            className: "flex justify-end space-x-3",
                            children: [(0,
                            r.jsx)("button", {
                                onClick: s,
                                disabled: b,
                                className: "px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors disabled:opacity-50",
                                children: "Cancel"
                            }), x && (L ? (0,
                            r.jsx)("button", {
                                onClick: G,
                                disabled: b || 0 === T.length,
                                className: "px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                                children: b ? "Importing..." : "Confirm Import ".concat(T.length, " Jobs")
                            }) : (0,
                            r.jsx)("button", {
                                disabled: 0 === k.length || b || 0 === E,
                                className: "px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
                                children: b ? "Importing..." : E > 0 ? "Import ".concat(E, " Repeat Jobs") : "No Repeat Jobs to Import"
                            }))]
                        })]
                    })]
                })
            }) : null
        }
        var k = s(2832)
          , A = s(7618)
          , C = s(3050);
        function S(e) {
            var t, s, p;
            let {selectedDate: h, providerFilter: j, enableAlticeFeatures: v=!0} = e
              , {company: N, user: w} = (0,
            l.a)()
              , {isMobile: S} = (0,
            C.h)()
              , E = (0,
            a.useMemo)( () => {
                let e = (j || "").toLowerCase().replace(/[^a-z0-9]+/g, " ").trim().replace(/\s+/g, " ");
                return "altice" === e || "optimum" === e || "altice optimum" === e
            }
            , [j])
              , [I,T] = (0,
            a.useState)({})
              , P = h || (0,
            g.RS)((0,
            g.fO)(N))
              , L = (0,
            a.useRef)({})
              , M = e => {
                let[t,s,r] = e.split("-");
                return "".concat(parseInt(s), "/").concat(parseInt(r), "/").concat(t)
            }
            ;
            (0,
            a.useEffect)( () => {
                (async () => {
                    if (N)
                        try {
                            let e = (0,
                            i.collection)(c.db, "companies", N.companyId, "vehicles")
                              , t = await (0,
                            i.getDocs)(e)
                              , s = {};
                            t.docs.forEach(e => {
                                s[e.id] = {
                                    id: e.id,
                                    ...e.data()
                                }
                            }
                            ),
                            T(s)
                        } catch (e) {
                            console.error("Error loading vehicles:", e)
                        }
                }
                )()
            }
            , [N]);
            let R = (e, t) => {
                var s;
                let r = null === (s = e.workingDays) || void 0 === s ? void 0 : s[t];
                return r && !r.isWorking ? {
                    hasDayOff: !0,
                    reason: r.reason,
                    notes: r.notes,
                    status: r.status,
                    requestedBy: r.requestedBy
                } : {
                    hasDayOff: !1
                }
            }
              , O = (e, t) => {
                var s;
                if (!(e.notes && e.notes.trim() || e.notesHistory && e.notesHistory.length > 0) || e.id === t)
                    return 0;
                let r = null === (s = e.notesReadBy) || void 0 === s ? void 0 : s[t];
                if (!r)
                    return e.notesHistory ? e.notesHistory.length : 1;
                let a = e.notesHistory ? JSON.stringify(e.notesHistory) : e.notes;
                if (r.lastNotesContent !== a) {
                    if (e.notesHistory)
                        try {
                            let t = JSON.parse(r.lastNotesContent || "[]")
                              , s = e.notesHistory.length - t.length;
                            return Math.max(0, s)
                        } catch (t) {
                            return console.error("Error parsing lastReadHistory:", t),
                            e.notesHistory.length
                        }
                    return 1
                }
                return 0
            }
            ;
            a.useEffect( () => {
                let e = document.createElement("style");
                return e.textContent = "\n      @keyframes slideInFromTop {\n        from {\n          opacity: 0;\n          transform: translateY(-10px) scale(0.95);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0) scale(1);\n        }\n      }\n      \n      @keyframes fadeIn {\n        from {\n          opacity: 0;\n        }\n        to {\n          opacity: 1;\n        }\n      }\n    ",
                document.head.appendChild(e),
                () => {
                    document.head.removeChild(e)
                }
            }
            , []);
            let {addNotification: F} = (0,
            o.z)()
              , J = (0,
            n.useRouter)()
              , [W,B] = (0,
            a.useState)([])
              , z = (0,
            a.useMemo)( () => {
                if (!j || "" === j.trim())
                    return W;
                let e = e => (e || "").toLowerCase().replace(/[^a-z0-9]+/g, " ").trim().replace(/\s+/g, " ")
                  , t = e(j);
                return W.filter(s => {
                    let r = e(s.catvProvider);
                    return "altice optimum" === t ? "altice optimum" === r || "altice" === r || "optimum" === r : r === t
                }
                )
            }
            , [W, j])
              , [U,V] = (0,
            a.useState)(!0)
              , [H,_] = (0,
            a.useState)(null)
              , [q,G] = (0,
            a.useState)(new Set)
              , [Y,Z] = (0,
            a.useState)(null)
              , [X,K] = (0,
            a.useState)(!1)
              , [Q,$] = (0,
            a.useState)(null)
              , [ee,et] = (0,
            a.useState)("")
              , [es,er] = (0,
            a.useState)(!1)
              , [ea,en] = (0,
            a.useState)(null)
              , [el,eo] = (0,
            a.useState)(!1)
              , [ei,ec] = (0,
            a.useState)(!1)
              , [ed,em] = (0,
            a.useState)(!1)
              , [eu,ex] = (0,
            a.useState)(null)
              , [ep,eh] = (0,
            a.useState)(new Set)
              , [eg,ef] = (0,
            a.useState)(!1)
              , [eb,ej] = (0,
            a.useState)(null)
              , [ey,ev] = (0,
            a.useState)({})
              , [eN,ew] = (0,
            a.useState)(!1)
              , [eD,ek] = (0,
            a.useState)(null)
              , [eA,eC] = (0,
            a.useState)(!1)
              , [eS,eE] = (0,
            a.useState)(!1)
              , [eI,eT] = (0,
            a.useState)(!1)
              , [eP,eL] = (0,
            a.useState)({})
              , [eM,eR] = (0,
            a.useState)(!1)
              , [eO,eF] = (0,
            a.useState)(null)
              , [eJ,eW] = (0,
            a.useState)({})
              , [eB,ez] = (0,
            a.useState)({})
              , [eU,eV] = (0,
            a.useState)(!1)
              , [eH,e_] = (0,
            a.useState)([])
              , eq = e => {
                eW(t => ({
                    ...t,
                    [e]: !t[e]
                })),
                eJ[e] && ez(t => ({
                    ...t,
                    [e]: []
                }))
            }
              , eG = (e, t, s) => {
                ez(r => {
                    let a = r[e] || [];
                    return s ? {
                        ...r,
                        [e]: [...a, t]
                    } : {
                        ...r,
                        [e]: a.filter(e => e !== t)
                    }
                }
                )
            }
              , eY = e => {
                let t = eB[e] || [];
                if (0 === t.length) {
                    F({
                        title: "No Jobs Selected",
                        body: "Please select at least one job to reassign.",
                        type: "error"
                    });
                    return
                }
                e_((ey[e] || []).filter(e => t.includes(e.id))),
                eV(!0)
            }
              , eZ = e => {
                try {
                    return ["sun", "mon", "tue", "wed", "thu", "fri", "sat"][(e ? new Date(new Date().toLocaleString("en-US", {
                        timeZone: e
                    })) : new Date).getDay()]
                } catch (e) {
                    return ["sun", "mon", "tue", "wed", "thu", "fri", "sat"][new Date().getDay()]
                }
            }
              , eX = (e, t) => {
                let s = (e.schedule || "").toLowerCase();
                if (!s.trim())
                    return null;
                let r = eZ(t);
                return s.split(",").map(e => e.trim()).filter(Boolean).includes(r)
            }
              , eK = (0,
            a.useMemo)( () => {
                let e = {};
                return z.forEach(t => {
                    let s = t.areaOfWork || "Unassigned"
                      , r = t.vendor || "Unassigned";
                    e[s] || (e[s] = {}),
                    e[s][r] || (e[s][r] = []),
                    e[s][r].push(t)
                }
                ),
                Object.keys(e).forEach(t => {
                    Object.keys(e[t]).forEach(s => {
                        e[t][s].sort( (e, t) => {
                            if (e.isClockedIn && !t.isClockedIn)
                                return -1;
                            if (!e.isClockedIn && t.isClockedIn)
                                return 1;
                            let s = eX(e, null == N ? void 0 : N.timezone)
                              , r = eX(t, null == N ? void 0 : N.timezone);
                            if (!0 === s && !0 !== r)
                                return -1;
                            if (!0 !== s && !0 === r)
                                return 1;
                            let a = parseInt(e.techNumber || e.technumber || e.techId || "999999")
                              , n = parseInt(t.techNumber || t.technumber || t.techId || "999999");
                            if (a !== n)
                                return a - n;
                            let l = "".concat(e.firstName, " ").concat(e.lastName).toLowerCase()
                              , o = "".concat(t.firstName, " ").concat(t.lastName).toLowerCase();
                            return l.localeCompare(o)
                        }
                        )
                    }
                    )
                }
                ),
                e
            }
            , [z, null == N ? void 0 : N.timezone])
              , eQ = async () => {
                if (N)
                    try {
                        V(!0);
                        let e = (0,
                        i.collection)(c.db, "companies", N.companyId, "users")
                          , t = (0,
                        i.query)(e, (0,
                        i.where)("role", "==", "tech"), (0,
                        i.where)("archived", "!=", !0))
                          , s = await (0,
                        i.getDocs)(t)
                          , r = [];
                        s.forEach(e => {
                            var t, s, a, n, l, o, i, c;
                            let d = e.data()
                              , m = !0 === d.archived;
                            r.push({
                                ...d,
                                archived: m,
                                id: e.id,
                                createdAt: (null === (s = d.createdAt) || void 0 === s ? void 0 : null === (t = s.toDate) || void 0 === t ? void 0 : t.call(s)) || new Date,
                                updatedAt: (null === (n = d.updatedAt) || void 0 === n ? void 0 : null === (a = n.toDate) || void 0 === a ? void 0 : a.call(n)) || new Date,
                                lastClockIn: (null === (o = d.lastClockIn) || void 0 === o ? void 0 : null === (l = o.toDate) || void 0 === l ? void 0 : l.call(o)) || void 0,
                                lastClockOut: (null === (c = d.lastClockOut) || void 0 === c ? void 0 : null === (i = c.toDate) || void 0 === i ? void 0 : i.call(c)) || void 0
                            })
                        }
                        ),
                        B(r),
                        r.forEach(e => {
                            te(e)
                        }
                        )
                    } catch (e) {
                        console.error("Error fetching techs:", e)
                    } finally {
                        V(!1)
                    }
            }
            ;
            (0,
            a.useEffect)( () => {
                if (!N)
                    return;
                "Notification"in window && "default" === Notification.permission && Notification.requestPermission(),
                (async () => {
                    await eQ()
                }
                )();
                let e = null;
                if ((null == w ? void 0 : w.role) === "dispatcher" || (null == w ? void 0 : w.role) === "admin") {
                    let t = (0,
                    i.collection)(c.db, "companies", N.companyId, "users")
                      , s = (0,
                    i.query)(t, (0,
                    i.where)("role", "==", "tech"), (0,
                    i.where)("archived", "!=", !0));
                    e = (0,
                    i.onSnapshot)(s, e => {
                        let t = []
                          , s = new Set;
                        e.forEach(e => {
                            var r, a, n, l, o, i, c, d;
                            let m = e.data()
                              , u = !0 === m.archived
                              , x = {
                                ...m,
                                archived: u,
                                id: e.id,
                                createdAt: (null === (a = m.createdAt) || void 0 === a ? void 0 : null === (r = a.toDate) || void 0 === r ? void 0 : r.call(a)) || new Date,
                                updatedAt: (null === (l = m.updatedAt) || void 0 === l ? void 0 : null === (n = l.toDate) || void 0 === n ? void 0 : n.call(l)) || new Date,
                                lastClockIn: (null === (i = m.lastClockIn) || void 0 === i ? void 0 : null === (o = i.toDate) || void 0 === o ? void 0 : o.call(i)) || void 0,
                                lastClockOut: (null === (d = m.lastClockOut) || void 0 === d ? void 0 : null === (c = d.toDate) || void 0 === c ? void 0 : c.call(d)) || void 0
                            };
                            t.push(x);
                            let p = W.find(t => t.id === e.id);
                            if (p && p.isClockedIn !== x.isClockedIn) {
                                s.add(e.id);
                                let t = x.isClockedIn ? "clocked in" : "clocked out";
                                tr(x, t),
                                setTimeout( () => {
                                    G(t => {
                                        let s = new Set(t);
                                        return s.delete(e.id),
                                        s
                                    }
                                    )
                                }
                                , 3e3)
                            }
                        }
                        ),
                        B(t),
                        G(s),
                        V(!1),
                        _(null),
                        Object.values(L.current).forEach(e => {
                            try {
                                e()
                            } catch (e) {}
                        }
                        ),
                        L.current = {},
                        t.forEach(e => {
                            te(e)
                        }
                        )
                    }
                    , e => {
                        console.error("Error listening to tech updates:", e),
                        _("Failed to load technicians"),
                        V(!1)
                    }
                    )
                }
                return () => {
                    e && e(),
                    Object.values(L.current).forEach(e => {
                        try {
                            e()
                        } catch (e) {}
                    }
                    ),
                    L.current = {}
                }
            }
            , [N, P]),
            (0,
            a.useEffect)( () => {
                W.length > 0 && (ev({}),
                setTimeout( () => {
                    Object.values(L.current).forEach(e => {
                        try {
                            e()
                        } catch (e) {}
                    }
                    ),
                    L.current = {},
                    W.forEach(e => {
                        te(e)
                    }
                    )
                }
                , 100))
            }
            , [P, W]),
            (0,
            a.useEffect)( () => {
                if (!N || !Y || !X)
                    return;
                let e = (0,
                i.doc)(c.db, "companies", N.companyId, "users", Y.id)
                  , t = (0,
                i.onSnapshot)(e, e => {
                    if (e.exists()) {
                        var t, s, r, a, n, l, o, i;
                        let c = e.data()
                          , d = !0 === c.archived
                          , m = {
                            ...c,
                            archived: d,
                            id: e.id,
                            createdAt: (null === (s = c.createdAt) || void 0 === s ? void 0 : null === (t = s.toDate) || void 0 === t ? void 0 : t.call(s)) || new Date,
                            updatedAt: (null === (a = c.updatedAt) || void 0 === a ? void 0 : null === (r = a.toDate) || void 0 === r ? void 0 : r.call(a)) || new Date,
                            lastClockIn: (null === (l = c.lastClockIn) || void 0 === l ? void 0 : null === (n = l.toDate) || void 0 === n ? void 0 : n.call(l)) || void 0,
                            lastClockOut: (null === (i = c.lastClockOut) || void 0 === i ? void 0 : null === (o = i.toDate) || void 0 === o ? void 0 : o.call(i)) || void 0
                        };
                        Z(m),
                        B(e => e.map(e => e.id === Y.id ? m : e))
                    }
                }
                , e => {
                    console.error("Error listening to selected tech updates:", e)
                }
                );
                return () => {
                    t()
                }
            }
            , [N, null == Y ? void 0 : Y.id, X]);
            let e$ = e => e ? e.toLocaleTimeString("en-US", {
                hour: "2-digit",
                minute: "2-digit",
                hour12: !0
            }) : "N/A"
              , e0 = e => {
                Z(e),
                K(!0)
            }
              , e1 = e => {
                en(e),
                er(!0)
            }
              , e2 = e => {
                ex(e),
                em(!0)
            }
              , e3 = () => {
                K(!1),
                Z(null),
                $(null),
                et("")
            }
              , e4 = async () => {
                if (N && w && Y)
                    try {
                        if ("admin" !== w.role && "dispatcher" !== w.role) {
                            F({
                                title: "Access Denied",
                                body: "Only administrators and dispatchers can force clock technicians.",
                                type: "error"
                            });
                            return
                        }
                        let e = new Date
                          , t = (0,
                        i.doc)(c.db, "companies", N.companyId, "users", Y.id)
                          , s = Y.isClockedIn;
                        s ? await (0,
                        i.updateDoc)(t, {
                            isClockedIn: !1,
                            lastClockOut: e,
                            updatedAt: e
                        }) : await (0,
                        i.updateDoc)(t, {
                            isClockedIn: !0,
                            lastClockIn: e,
                            updatedAt: e
                        }),
                        eo(!1),
                        F({
                            title: "Force Clock ".concat(s ? "Out" : "In", " Successful"),
                            body: "".concat(Y.firstName, " ").concat(Y.lastName, " has been force ").concat(s ? "clocked out" : "clocked in", "."),
                            type: "success"
                        })
                    } catch (e) {
                        console.error("Error force clocking technician:", e),
                        F({
                            title: "Force Clock Action Failed",
                            body: "Failed to perform the force clock action. Please try again.",
                            type: "error"
                        }),
                        eo(!1)
                    }
            }
              , e5 = (e, t) => {
                $(e),
                et(t || "")
            }
              , e6 = async () => {
                if (Y && Q)
                    try {
                        let e = (0,
                        i.doc)(c.db, "companies", N.id, "users", Y.id)
                          , t = {};
                        t[Q] = ee,
                        t.updatedAt = new Date,
                        await (0,
                        i.updateDoc)(e, t),
                        Z({
                            ...Y,
                            [Q]: ee,
                            updatedAt: new Date
                        }),
                        B(e => e.map(e => e.id === Y.id ? {
                            ...e,
                            [Q]: ee,
                            updatedAt: new Date
                        } : e)),
                        $(null),
                        et(""),
                        F({
                            title: "Success",
                            body: "Tech information updated successfully!",
                            type: "success"
                        })
                    } catch (e) {
                        console.error("Error updating tech information:", e),
                        alert("Failed to update information. Please try again.")
                    }
            }
              , e8 = () => {
                $(null),
                et("")
            }
              , e9 = e => {
                "Escape" === e.key && X && e3()
            }
            ;
            (0,
            a.useEffect)( () => (X && document.addEventListener("keydown", e9),
            () => {
                document.removeEventListener("keydown", e9)
            }
            ), [X]),
            (0,
            a.useEffect)( () => {
                if (eO && eO.assignedTechId) {
                    let e = W.find(e => e.id === eO.assignedTechId);
                    if (e && e.route && e.route.jobs) {
                        let t = e.route.jobs.find(e => e.id === eO.id || e.jobId === eO.jobId);
                        t && t.status !== eO.status && eF(t)
                    }
                }
            }
            , [W]);
            let e7 = e => {
                let t = new Set(ep);
                if (t.has(e))
                    t.delete(e);
                else {
                    t.add(e);
                    let s = W.find(t => t.id === e);
                    s && te(s)
                }
                eh(t)
            }
              , te = e => {
                if (N) {
                    if (L.current[e.id]) {
                        try {
                            L.current[e.id]()
                        } catch (e) {}
                        delete L.current[e.id]
                    }
                    try {
                        let t = (0,
                        i.collection)(c.db, "companies", N.companyId, "jobs")
                          , s = (0,
                        i.query)(t, (0,
                        i.where)("assignedTechNumber", "==", e.techNumber), (0,
                        i.where)("scheduleDate", "==", P), (0,
                        i.orderBy)("createdAt", "desc"))
                          , r = (0,
                        i.onSnapshot)(s, t => {
                            let s = t.docs.map(e => ({
                                id: e.id,
                                ...e.data()
                            }));
                            ev(t => ({
                                ...t,
                                [e.id]: s
                            }))
                        }
                        , s => {
                            if ((null == s ? void 0 : s.code) === "failed-precondition" || /index/i.test((null == s ? void 0 : s.message) || "")) {
                                console.warn("Composite index not ready; using scheduleDate-only fallback for", e.techNumber);
                                try {
                                    let s = (0,
                                    i.query)(t, (0,
                                    i.where)("scheduleDate", "==", P))
                                      , r = (0,
                                    i.onSnapshot)(s, t => {
                                        let s = t.docs.map(e => ({
                                            id: e.id,
                                            ...e.data()
                                        })).filter(t => t.assignedTechNumber === e.techNumber).sort( (e, t) => {
                                            var s, r, a, n;
                                            let l = (null === (r = e.createdAt) || void 0 === r ? void 0 : null === (s = r.toMillis) || void 0 === s ? void 0 : s.call(r)) ? e.createdAt.toMillis() : e.createdAt ? new Date(e.createdAt).getTime() : 0;
                                            return ((null === (n = t.createdAt) || void 0 === n ? void 0 : null === (a = n.toMillis) || void 0 === a ? void 0 : a.call(n)) ? t.createdAt.toMillis() : t.createdAt ? new Date(t.createdAt).getTime() : 0) - l
                                        }
                                        );
                                        ev(t => ({
                                            ...t,
                                            [e.id]: s
                                        }))
                                    }
                                    , t => {
                                        console.error("Fallback subscription failed:", t),
                                        ev(t => ({
                                            ...t,
                                            [e.id]: []
                                        }))
                                    }
                                    );
                                    L.current[e.id] = r
                                } catch (t) {
                                    console.error("Error setting up fallback route subscription:", t),
                                    ev(t => ({
                                        ...t,
                                        [e.id]: []
                                    }))
                                }
                            } else
                                console.error("Error subscribing to tech jobs:", s),
                                ev(t => ({
                                    ...t,
                                    [e.id]: []
                                }))
                        }
                        );
                        L.current[e.id] = r
                    } catch (t) {
                        console.error("Error setting up tech route subscription:", t),
                        ev(t => ({
                            ...t,
                            [e.id]: []
                        }))
                    }
                }
            }
              , tt = e => {
                ej(e),
                ef(!0)
            }
              , ts = e => {
                eF(e),
                eR(!0)
            }
              , tr = (e, t) => {
                "Notification"in window && "granted" === Notification.permission && new Notification("".concat(e.firstName, " ").concat(e.lastName, " ").concat(t),{
                    body: "".concat(e.firstName, " ").concat(e.lastName, " has ").concat(t, " at ").concat(e$(new Date)),
                    icon: "/favicon.ico",
                    tag: "tech-".concat(e.id)
                })
            }
              , ta = async () => {
                if (N && w && window.confirm("Are you sure you want to archive jobs for ".concat(M(P), "?\n\n") + "This action will:\n" + "• Archive all jobs scheduled for ".concat(M(P), "\n") + "• Move job data and audit logs to the archive\n• This action cannot be undone")) {
                    ec(!0);
                    try {
                        await (0,
                        d.RF)(N.companyId, w.id, "".concat(w.firstName, " ").concat(w.lastName), P),
                        F({
                            title: "Archived",
                            body: "All jobs for ".concat(M(P), " have been archived successfully"),
                            type: "success"
                        })
                    } catch (e) {
                        console.error("Error archiving all jobs:", e),
                        F({
                            title: "Error",
                            body: "Failed to archive jobs".concat((null == e ? void 0 : e.message) ? ": ".concat(e.message) : ""),
                            type: "error"
                        })
                    } finally {
                        ec(!1)
                    }
                }
            }
            ;
            return U ? (0,
            r.jsxs)("div", {
                className: "bg-white rounded-lg shadow p-6",
                children: [(0,
                r.jsx)("h3", {
                    className: "text-lg font-medium text-gray-900 mb-4",
                    children: "Technicians"
                }), (0,
                r.jsxs)("div", {
                    className: "text-center py-8",
                    children: [(0,
                    r.jsx)("div", {
                        className: "animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"
                    }), (0,
                    r.jsx)("p", {
                        className: "mt-2 text-gray-600",
                        children: "Loading technicians..."
                    })]
                })]
            }) : H ? (0,
            r.jsxs)("div", {
                className: "bg-white rounded-lg shadow p-6",
                children: [(0,
                r.jsx)("h3", {
                    className: "text-lg font-medium text-gray-900 mb-4",
                    children: "Technicians"
                }), (0,
                r.jsxs)("div", {
                    className: "text-center py-8 text-red-600",
                    children: [(0,
                    r.jsx)("p", {
                        children: H
                    }), (0,
                    r.jsx)("button", {
                        onClick: () => window.location.reload(),
                        className: "mt-2 text-blue-600 hover:text-blue-800",
                        children: "Try again"
                    })]
                })]
            }) : 0 === z.length ? (0,
            r.jsxs)("div", {
                className: "bg-white rounded-lg shadow p-6",
                children: [(0,
                r.jsx)("h3", {
                    className: "text-lg font-medium text-gray-900 mb-4",
                    children: "Technicians"
                }), (0,
                r.jsxs)("div", {
                    className: "text-center py-8 text-gray-500",
                    children: [(0,
                    r.jsx)("p", {
                        children: "No technicians found."
                    }), (0,
                    r.jsx)("p", {
                        className: "text-sm mt-2",
                        children: "Technicians will appear here once they are added to the company."
                    })]
                })]
            }) : (0,
            r.jsxs)(r.Fragment, {
                children: [(0,
                r.jsxs)("div", {
                    className: "bg-white rounded-lg shadow p-6",
                    children: [(0,
                    r.jsxs)("div", {
                        className: "flex justify-between items-center mb-4",
                        children: [(0,
                        r.jsxs)("div", {
                            className: "flex items-center space-x-3",
                            children: [(0,
                            r.jsxs)("h3", {
                                className: "text-lg font-medium text-gray-900",
                                children: ["Technicians (", z.length, ")"]
                            }), (0,
                            r.jsxs)("div", {
                                className: "flex items-center space-x-2",
                                children: [(0,
                                r.jsx)("div", {
                                    className: "w-2 h-2 rounded-full bg-green-500 animate-pulse"
                                }), (0,
                                r.jsx)("span", {
                                    className: "text-xs text-green-600 font-medium",
                                    children: "LIVE"
                                })]
                            })]
                        }), (0,
                        r.jsxs)("div", {
                            className: "flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",
                            children: [E && (0,
                            r.jsxs)("button", {
                                onClick: () => eT(!0),
                                className: S ? "inline-flex items-center justify-center px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg shadow-sm" : "inline-flex items-center justify-center px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white text-sm font-medium rounded-lg hover:from-indigo-600 hover:to-indigo-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-sm hover:shadow-md",
                                title: "Import Altice Repeats",
                                children: [(0,
                                r.jsx)("svg", {
                                    className: "w-4 h-4 mr-1",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: (0,
                                    r.jsx)("path", {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                                    })
                                }), (0,
                                r.jsx)("span", {
                                    className: "hidden sm:inline",
                                    children: "Altice Repeats"
                                }), (0,
                                r.jsx)("span", {
                                    className: "sm:hidden",
                                    children: "Repeats"
                                })]
                            }), E && (0,
                            r.jsxs)("button", {
                                onClick: () => eC(!0),
                                className: S ? "inline-flex items-center justify-center px-3 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg shadow-sm" : "inline-flex items-center justify-center px-3 py-1.5 bg-gradient-to-r from-orange-500 to-orange-600 text-white text-sm font-medium rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-sm hover:shadow-md",
                                title: "View Import Logs",
                                children: [(0,
                                r.jsx)("svg", {
                                    className: "w-4 h-4 mr-1",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: (0,
                                    r.jsx)("path", {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                                    })
                                }), (0,
                                r.jsx)("span", {
                                    className: "hidden sm:inline",
                                    children: "Import Log"
                                }), (0,
                                r.jsx)("span", {
                                    className: "sm:hidden",
                                    children: "Logs"
                                })]
                            }), (0,
                            r.jsx)("div", {
                                className: "relative",
                                children: E && (0,
                                r.jsxs)("button", {
                                    onClick: () => eE(!0),
                                    className: S ? "inline-flex items-center justify-center px-3 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg shadow-sm" : "inline-flex items-center justify-center px-3 py-1.5 bg-gradient-to-r from-purple-500 to-purple-600 text-white text-sm font-medium rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-sm hover:shadow-md",
                                    title: "Altice CSG Import",
                                    children: [(0,
                                    r.jsx)("svg", {
                                        className: "w-4 h-4 mr-1",
                                        fill: "none",
                                        stroke: "currentColor",
                                        viewBox: "0 0 24 24",
                                        children: (0,
                                        r.jsx)("path", {
                                            strokeLinecap: "round",
                                            strokeLinejoin: "round",
                                            strokeWidth: 2,
                                            d: "M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"
                                        })
                                    }), (0,
                                    r.jsx)("span", {
                                        className: "hidden sm:inline",
                                        children: "Altice CSG Import"
                                    }), (0,
                                    r.jsx)("span", {
                                        className: "sm:hidden",
                                        children: "CSG Import"
                                    })]
                                })
                            }), (0,
                            r.jsxs)("button", {
                                onClick: () => {
                                    {
                                        let e = new URLSearchParams({
                                            date: P || "",
                                            from: "fieldOps"
                                        });
                                        j && e.set("provider", j),
                                        J.push("/map?".concat(e.toString()))
                                    }
                                }
                                ,
                                className: S ? "inline-flex items-center justify-center px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg shadow-sm" : "inline-flex items-center justify-center px-3 py-1.5 bg-gradient-to-r from-indigo-500 to-indigo-600 text-white text-sm font-medium rounded-lg hover:from-indigo-600 hover:to-indigo-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-sm hover:shadow-md",
                                title: "View on Map",
                                children: [(0,
                                r.jsx)("svg", {
                                    className: "w-4 h-4 mr-1",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: (0,
                                    r.jsx)("path", {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"
                                    })
                                }), (0,
                                r.jsx)("span", {
                                    className: "hidden sm:inline",
                                    children: "View on Map"
                                }), (0,
                                r.jsx)("span", {
                                    className: "sm:hidden",
                                    children: "Map"
                                })]
                            }), (0,
                            r.jsxs)("button", {
                                onClick: () => {
                                    {
                                        let e = new URLSearchParams({
                                            date: P || "",
                                            from: "fieldOps"
                                        });
                                        j && e.set("provider", encodeURIComponent(j)),
                                        J.push("/todays-routes?".concat(e.toString()))
                                    }
                                }
                                ,
                                className: S ? "inline-flex items-center justify-center px-3 py-2 bg-green-600 text-white text-sm font-medium rounded-lg shadow-sm" : "inline-flex items-center justify-center px-3 py-1.5 bg-gradient-to-r from-green-500 to-green-600 text-white text-sm font-medium rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-sm hover:shadow-md",
                                title: "View as List",
                                children: [(0,
                                r.jsxs)("svg", {
                                    className: "w-4 h-4 mr-1",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: [(0,
                                    r.jsx)("rect", {
                                        x: "4",
                                        y: "3",
                                        width: "16",
                                        height: "18",
                                        rx: "2",
                                        ry: "2",
                                        strokeWidth: "2"
                                    }), (0,
                                    r.jsx)("path", {
                                        strokeWidth: "2",
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        d: "M8 7h8"
                                    }), (0,
                                    r.jsx)("path", {
                                        strokeWidth: "2",
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        d: "M6 11h12"
                                    }), (0,
                                    r.jsx)("path", {
                                        strokeWidth: "2",
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        d: "M6 15h12"
                                    }), (0,
                                    r.jsx)("path", {
                                        strokeWidth: "2",
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        d: "M6 19h12"
                                    })]
                                }), (0,
                                r.jsx)("span", {
                                    className: "hidden sm:inline",
                                    children: "View as List"
                                }), (0,
                                r.jsx)("span", {
                                    className: "sm:hidden",
                                    children: "List"
                                })]
                            }), (0,
                            r.jsxs)("button", {
                                onClick: ta,
                                disabled: ei,
                                className: S ? "inline-flex items-center justify-center px-3 py-2 bg-red-600 text-white text-sm font-medium rounded-lg shadow-sm disabled:opacity-60 disabled:cursor-not-allowed" : "inline-flex items-center justify-center px-3 py-1.5 bg-gradient-to-r from-red-500 to-red-600 text-white text-sm font-medium rounded-lg hover:from-red-600 hover:to-red-700 transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-sm hover:shadow-md disabled:opacity-60 disabled:cursor-not-allowed",
                                title: "Archive All Jobs",
                                children: [(0,
                                r.jsxs)("svg", {
                                    className: "w-4 h-4 mr-1",
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: [(0,
                                    r.jsx)("rect", {
                                        x: "6.5",
                                        y: "5.5",
                                        width: "11",
                                        height: "2.5",
                                        rx: "1",
                                        strokeWidth: "2"
                                    }), (0,
                                    r.jsx)("rect", {
                                        x: "5.5",
                                        y: "10.5",
                                        width: "13",
                                        height: "2.5",
                                        rx: "1",
                                        strokeWidth: "2"
                                    }), (0,
                                    r.jsx)("rect", {
                                        x: "4.5",
                                        y: "15.5",
                                        width: "15",
                                        height: "2.5",
                                        rx: "1",
                                        strokeWidth: "2"
                                    })]
                                }), (0,
                                r.jsx)("span", {
                                    className: "hidden sm:inline",
                                    children: ei ? "Archiving…" : "Archive All Jobs"
                                }), (0,
                                r.jsx)("span", {
                                    className: "sm:hidden",
                                    children: ei ? "Archiving…" : "Archive"
                                })]
                            })]
                        })]
                    }), (0,
                    r.jsx)("div", {
                        className: "space-y-6",
                        children: Object.entries(eK).map(e => {
                            let[t,s] = e
                              , n = Object.values(s).reduce( (e, t) => e + t.length, 0);
                            return (0,
                            r.jsxs)("div", {
                                className: "bg-white rounded-lg border border-gray-200 overflow-hidden",
                                children: [(0,
                                r.jsx)("div", {
                                    className: "bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-3 border-b border-gray-200",
                                    children: (0,
                                    r.jsxs)("h3", {
                                        className: "text-lg font-semibold text-gray-900 flex items-center",
                                        children: [(0,
                                        r.jsxs)("svg", {
                                            className: "w-5 h-5 mr-2 text-blue-600",
                                            fill: "none",
                                            stroke: "currentColor",
                                            viewBox: "0 0 24 24",
                                            children: [(0,
                                            r.jsx)("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                strokeWidth: 2,
                                                d: "M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                                            }), (0,
                                            r.jsx)("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                strokeWidth: 2,
                                                d: "M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                                            })]
                                        }), t, (0,
                                        r.jsxs)("span", {
                                            className: "ml-2 text-sm font-normal text-gray-600",
                                            children: ["(", n, " technicians)"]
                                        })]
                                    })
                                }), Object.entries(s).map(e => {
                                    let[t,s] = e;
                                    return (0,
                                    r.jsxs)("div", {
                                        children: [(0,
                                        r.jsx)("div", {
                                            className: "bg-gray-50 px-6 py-2 border-b border-gray-200",
                                            children: (0,
                                            r.jsxs)("h4", {
                                                className: "text-sm font-medium text-gray-700 flex items-center",
                                                children: [(0,
                                                r.jsx)("svg", {
                                                    className: "w-4 h-4 mr-2 text-gray-500",
                                                    fill: "none",
                                                    stroke: "currentColor",
                                                    viewBox: "0 0 24 24",
                                                    children: (0,
                                                    r.jsx)("path", {
                                                        strokeLinecap: "round",
                                                        strokeLinejoin: "round",
                                                        strokeWidth: 2,
                                                        d: "M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"
                                                    })
                                                }), t, (0,
                                                r.jsxs)("span", {
                                                    className: "ml-2 text-xs text-gray-500",
                                                    children: ["(", s.length, " technicians)"]
                                                })]
                                            })
                                        }), (0,
                                        r.jsx)("div", {
                                            className: "overflow-x-auto",
                                            children: (0,
                                            r.jsxs)("table", {
                                                className: "min-w-full divide-y divide-gray-200 table-fixed",
                                                children: [(0,
                                                r.jsx)("thead", {
                                                    className: "bg-gray-50",
                                                    children: (0,
                                                    r.jsxs)("tr", {
                                                        children: [(0,
                                                        r.jsx)("th", {
                                                            className: "px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                                            children: "Photo"
                                                        }), (0,
                                                        r.jsx)("th", {
                                                            className: "px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                                            children: "Name"
                                                        }), (0,
                                                        r.jsx)("th", {
                                                            className: "px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                                            children: "Status"
                                                        }), (0,
                                                        r.jsx)("th", {
                                                            className: "px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell",
                                                            children: "Tech #"
                                                        }), (0,
                                                        r.jsx)("th", {
                                                            className: "px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell",
                                                            children: "Work Skill"
                                                        }), (0,
                                                        r.jsx)("th", {
                                                            className: "px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell",
                                                            children: "CATV Provider"
                                                        }), (0,
                                                        r.jsx)("th", {
                                                            className: "px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden xl:table-cell",
                                                            children: "Last Activity"
                                                        }), (0,
                                                        r.jsx)("th", {
                                                            className: "px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",
                                                            children: "Actions"
                                                        })]
                                                    })
                                                }), (0,
                                                r.jsx)("tbody", {
                                                    className: "bg-white divide-y divide-gray-200",
                                                    children: s.map(e => {
                                                        let t = e.isClockedIn ? e.lastClockIn : e.lastClockOut
                                                          , s = R(e, P);
                                                        return (0,
                                                        r.jsxs)(a.Fragment, {
                                                            children: [(0,
                                                            r.jsxs)("tr", {
                                                                className: "hover:bg-gray-50 ".concat(S ? "" : "transition-all duration-300", " border-l-4 ").concat(q.has(e.id) ? "bg-yellow-50 border-yellow-400" : "border-transparent"),
                                                                children: [(0,
                                                                r.jsx)("td", {
                                                                    className: "px-3 sm:px-6 py-4 whitespace-nowrap",
                                                                    children: (0,
                                                                    r.jsx)("div", {
                                                                        className: "flex items-center",
                                                                        children: e.profilePicture ? (0,
                                                                        r.jsx)("img", {
                                                                            src: e.profilePicture,
                                                                            alt: "".concat(e.firstName, " ").concat(e.lastName),
                                                                            className: "h-8 w-8 sm:h-10 sm:w-10 rounded-full object-cover"
                                                                        }) : (0,
                                                                        r.jsx)("div", {
                                                                            className: "h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-gray-300 flex items-center justify-center",
                                                                            children: (0,
                                                                            r.jsxs)("span", {
                                                                                className: "text-xs sm:text-sm font-medium text-gray-600",
                                                                                children: [e.firstName.charAt(0), e.lastName.charAt(0)]
                                                                            })
                                                                        })
                                                                    })
                                                                }), (0,
                                                                r.jsx)("td", {
                                                                    className: "px-3 sm:px-6 py-4 whitespace-nowrap",
                                                                    children: (0,
                                                                    r.jsxs)("div", {
                                                                        className: "flex items-center space-x-2",
                                                                        children: [(0,
                                                                        r.jsxs)("div", {
                                                                            className: "text-xs sm:text-sm font-medium text-gray-900",
                                                                            children: [e.firstName, " ", e.lastName]
                                                                        }), (e.notes && e.notes.trim() || e.notesHistory && e.notesHistory.length > 0) && (0,
                                                                        r.jsxs)("div", {
                                                                            className: "flex items-center relative",
                                                                            title: "Has notes",
                                                                            children: [(0,
                                                                            r.jsx)("svg", {
                                                                                className: "w-4 h-4 text-blue-500",
                                                                                fill: "currentColor",
                                                                                viewBox: "0 0 20 20",
                                                                                children: (0,
                                                                                r.jsx)("path", {
                                                                                    fillRule: "evenodd",
                                                                                    d: "M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",
                                                                                    clipRule: "evenodd"
                                                                                })
                                                                            }), ( () => {
                                                                                let t = O(e, (null == w ? void 0 : w.id) || "");
                                                                                return t > 0 ? (0,
                                                                                r.jsx)("span", {
                                                                                    className: "absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-4 w-4 flex items-center justify-center font-bold",
                                                                                    children: t
                                                                                }) : null
                                                                            }
                                                                            )()]
                                                                        }), s.hasDayOff && (0,
                                                                        r.jsx)("div", {
                                                                            className: "flex items-center",
                                                                            title: "Day off: ".concat(s.reason).concat(s.notes ? " - ".concat(s.notes) : "").concat(s.status ? " (".concat(s.status, ")") : ""),
                                                                            children: "pending" === s.status ? (0,
                                                                            r.jsx)("svg", {
                                                                                className: "w-4 h-4 text-yellow-500",
                                                                                fill: "currentColor",
                                                                                viewBox: "0 0 20 20",
                                                                                children: (0,
                                                                                r.jsx)("path", {
                                                                                    fillRule: "evenodd",
                                                                                    d: "M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",
                                                                                    clipRule: "evenodd"
                                                                                })
                                                                            }) : "rejected" === s.status ? (0,
                                                                            r.jsx)("svg", {
                                                                                className: "w-4 h-4 text-red-600",
                                                                                fill: "currentColor",
                                                                                viewBox: "0 0 20 20",
                                                                                children: (0,
                                                                                r.jsx)("path", {
                                                                                    fillRule: "evenodd",
                                                                                    d: "M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",
                                                                                    clipRule: "evenodd"
                                                                                })
                                                                            }) : (0,
                                                                            r.jsx)("svg", {
                                                                                className: "w-4 h-4 text-red-500",
                                                                                fill: "currentColor",
                                                                                viewBox: "0 0 20 20",
                                                                                children: (0,
                                                                                r.jsx)("path", {
                                                                                    fillRule: "evenodd",
                                                                                    d: "M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",
                                                                                    clipRule: "evenodd"
                                                                                })
                                                                            })
                                                                        })]
                                                                    })
                                                                }), (0,
                                                                r.jsx)("td", {
                                                                    className: "px-3 sm:px-6 py-4 whitespace-nowrap",
                                                                    children: (0,
                                                                    r.jsxs)("div", {
                                                                        className: "flex items-center space-x-2 sm:space-x-3",
                                                                        children: [(0,
                                                                        r.jsx)("div", {
                                                                            className: "w-2 h-2 rounded-full ".concat(s.hasDayOff ? "pending" === s.status ? "bg-yellow-500" : "rejected" === s.status ? "bg-red-600" : "bg-orange-500" : e.isClockedIn ? "bg-green-500" : "bg-red-500")
                                                                        }), (0,
                                                                        r.jsx)("span", {
                                                                            className: "text-xs sm:text-sm font-medium ".concat(s.hasDayOff ? "pending" === s.status ? "text-yellow-600" : "rejected" === s.status ? "text-red-600" : "text-orange-600" : e.isClockedIn ? "text-green-600" : "text-red-600"),
                                                                            children: s.hasDayOff ? "pending" === s.status ? "Day Off Requested (".concat(s.reason, ")") : "rejected" === s.status ? "Day Off Rejected (".concat(s.reason, ")") : "Day Off (".concat(s.reason, ")") : e.isClockedIn ? "Working" : "Off Duty"
                                                                        }), ( () => {
                                                                            let t = eX(e, null == N ? void 0 : N.timezone)
                                                                              , s = null === t ? "Schedule N/A" : t ? "Working Day" : "Day Off";
                                                                            return (0,
                                                                            r.jsx)("span", {
                                                                                className: "px-2 py-0.5 rounded-full text-[10px] font-semibold ring-1 ring-inset ".concat(null === t ? "bg-gray-50 text-gray-500 ring-gray-200" : t ? "bg-blue-100 text-blue-700 ring-blue-200" : "bg-yellow-100 text-yellow-700 ring-yellow-200"),
                                                                                title: "".concat(s).concat(e.schedule ? " • Schedule: ".concat(e.schedule) : ""),
                                                                                children: s
                                                                            })
                                                                        }
                                                                        )()]
                                                                    })
                                                                }), (0,
                                                                r.jsx)("td", {
                                                                    className: "px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden sm:table-cell",
                                                                    children: e.techNumber || e.technumber || e.techId || "Not assigned"
                                                                }), (0,
                                                                r.jsx)("td", {
                                                                    className: "px-3 sm:px-6 py-4 whitespace-nowrap hidden md:table-cell",
                                                                    children: e.workskill ? (0,
                                                                    r.jsx)("div", {
                                                                        className: "flex flex-col items-center",
                                                                        children: e.workskill.toLowerCase().split(",").map( (e, t) => {
                                                                            let s = e.trim();
                                                                            return s ? (0,
                                                                            r.jsx)("div", {
                                                                                className: "flex items-center justify-center mb-2",
                                                                                children: "ftth" === s ? (0,
                                                                                r.jsx)("span", {
                                                                                    className: "text-xs font-medium text-blue-700 border-2 border-blue-500 rounded-sm bg-blue-50 px-2 py-0.5 w-12 text-center flex items-center justify-center",
                                                                                    children: "FTTH"
                                                                                }) : "coax" === s ? (0,
                                                                                r.jsx)("span", {
                                                                                    className: "text-xs font-medium text-green-700 border-2 border-green-500 rounded-sm bg-green-50 px-2 py-0.5 w-12 text-center flex items-center justify-center",
                                                                                    children: "COAX"
                                                                                }) : (0,
                                                                                r.jsx)("span", {
                                                                                    className: "text-xs text-gray-600 border border-gray-300 rounded-sm bg-gray-50 px-2 py-0.5 w-12 text-center flex items-center justify-center",
                                                                                    children: s
                                                                                })
                                                                            }, t) : null
                                                                        }
                                                                        )
                                                                    }) : (0,
                                                                    r.jsx)("div", {
                                                                        className: "flex items-center justify-center",
                                                                        children: (0,
                                                                        r.jsx)("span", {
                                                                            className: "text-gray-500 text-xs",
                                                                            children: "Not specified"
                                                                        })
                                                                    })
                                                                }), (0,
                                                                r.jsx)("td", {
                                                                    className: "px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-900 hidden lg:table-cell",
                                                                    children: e.catvProvider || "Not specified"
                                                                }), (0,
                                                                r.jsx)("td", {
                                                                    className: "px-3 sm:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-gray-500 hidden xl:table-cell",
                                                                    children: t ? (0,
                                                                    r.jsxs)("div", {
                                                                        children: [(0,
                                                                        r.jsx)("div", {
                                                                            children: e$(t)
                                                                        }), q.has(e.id) && (0,
                                                                        r.jsx)("div", {
                                                                            className: "text-xs text-yellow-600 font-medium",
                                                                            children: "Just now"
                                                                        })]
                                                                    }) : "N/A"
                                                                }), (0,
                                                                r.jsx)("td", {
                                                                    className: "px-3 sm:px-6 py-4 text-xs sm:text-sm font-medium",
                                                                    children: (0,
                                                                    r.jsxs)("div", {
                                                                        className: "inline-flex flex-col w-max space-y-1.5",
                                                                        children: [(0,
                                                                        r.jsxs)("button", {
                                                                            onClick: () => e0(e),
                                                                            className: "inline-flex items-center whitespace-nowrap w-full px-2.5 py-1 bg-purple-600 text-white text-[11px] font-medium rounded-full shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-300",
                                                                            title: "View Profile",
                                                                            children: [(0,
                                                                            r.jsx)("svg", {
                                                                                className: "w-3 h-3 mr-1",
                                                                                fill: "none",
                                                                                stroke: "currentColor",
                                                                                viewBox: "0 0 24 24",
                                                                                children: (0,
                                                                                r.jsx)("path", {
                                                                                    strokeLinecap: "round",
                                                                                    strokeLinejoin: "round",
                                                                                    strokeWidth: 2,
                                                                                    d: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                                                                                })
                                                                            }), "Profile"]
                                                                        }), ((null == w ? void 0 : w.role) === "admin" || (null == w ? void 0 : w.role) === "dispatcher") && (0,
                                                                        r.jsxs)("button", {
                                                                            onClick: () => e2(e),
                                                                            className: "inline-flex items-center whitespace-nowrap w-full px-2.5 py-1 bg-blue-600 text-white text-[11px] font-medium rounded-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-300",
                                                                            title: "Manage Working Days",
                                                                            children: [(0,
                                                                            r.jsx)("svg", {
                                                                                className: "w-3 h-3 mr-1",
                                                                                fill: "none",
                                                                                stroke: "currentColor",
                                                                                viewBox: "0 0 24 24",
                                                                                children: (0,
                                                                                r.jsx)("path", {
                                                                                    strokeLinecap: "round",
                                                                                    strokeLinejoin: "round",
                                                                                    strokeWidth: 2,
                                                                                    d: "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                                                                                })
                                                                            }), "Schedule"]
                                                                        }), (0,
                                                                        r.jsxs)("button", {
                                                                            onClick: t => {
                                                                                t.stopPropagation(),
                                                                                e1(e)
                                                                            }
                                                                            ,
                                                                            className: "inline-flex items-center whitespace-nowrap w-full px-2.5 py-1 bg-green-600 text-white text-[11px] font-medium rounded-full shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-300",
                                                                            title: "Add/Edit Notes",
                                                                            children: [(0,
                                                                            r.jsx)("svg", {
                                                                                className: "w-3 h-3 mr-1",
                                                                                fill: "none",
                                                                                stroke: "currentColor",
                                                                                viewBox: "0 0 24 24",
                                                                                children: (0,
                                                                                r.jsx)("path", {
                                                                                    strokeLinecap: "round",
                                                                                    strokeLinejoin: "round",
                                                                                    strokeWidth: 2,
                                                                                    d: "M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                                                                                })
                                                                            }), "Notes"]
                                                                        }), (0,
                                                                        r.jsxs)("button", {
                                                                            onClick: () => e7(e.id),
                                                                            className: "inline-flex items-center justify-between whitespace-nowrap w-full px-2.5 py-1 text-white text-[11px] font-medium rounded-full shadow-sm ".concat(ey[e.id] && ey[e.id].length > 0 ? "bg-blue-600 border border-blue-300" : "bg-blue-600 hover:bg-blue-700"),
                                                                            title: "View Route",
                                                                            children: [(0,
                                                                            r.jsx)("svg", {
                                                                                className: "w-3 h-3 mr-1 transition-transform duration-200 ".concat(ep.has(e.id) ? "rotate-180" : ""),
                                                                                fill: "none",
                                                                                stroke: "currentColor",
                                                                                viewBox: "0 0 24 24",
                                                                                children: (0,
                                                                                r.jsx)("path", {
                                                                                    strokeLinecap: "round",
                                                                                    strokeLinejoin: "round",
                                                                                    strokeWidth: 2,
                                                                                    d: "M19 9l-7 7-7-7"
                                                                                })
                                                                            }), "Route", (0,
                                                                            r.jsx)("span", {
                                                                                className: "ml-2 inline-flex items-center justify-center bg-white text-blue-700 text-[10px] font-semibold rounded-full shadow-sm px-1.5 py-0 min-w-[20px] ".concat(ey[e.id] && ey[e.id].length > 0 ? "" : "invisible"),
                                                                                children: ey[e.id] && ey[e.id].length > 0 ? ey[e.id].length : "0"
                                                                            })]
                                                                        })]
                                                                    })
                                                                })]
                                                            }), ep.has(e.id) && (0,
                                                            r.jsx)("tr", {
                                                                className: "bg-gray-50",
                                                                children: (0,
                                                                r.jsx)("td", {
                                                                    colSpan: 8,
                                                                    className: "px-6 py-4",
                                                                    children: (0,
                                                                    r.jsxs)("div", {
                                                                        className: "bg-white rounded-lg p-4 shadow-sm border border-gray-200",
                                                                        children: [(0,
                                                                        r.jsxs)("div", {
                                                                            className: "flex items-center justify-between mb-3",
                                                                            children: [(0,
                                                                            r.jsxs)("h4", {
                                                                                className: "text-sm font-semibold text-gray-900 flex items-center",
                                                                                children: [(0,
                                                                                r.jsx)("svg", {
                                                                                    className: "w-4 h-4 mr-2 text-gray-600",
                                                                                    fill: "none",
                                                                                    stroke: "currentColor",
                                                                                    viewBox: "0 0 24 24",
                                                                                    children: (0,
                                                                                    r.jsx)("path", {
                                                                                        strokeLinecap: "round",
                                                                                        strokeLinejoin: "round",
                                                                                        strokeWidth: 2,
                                                                                        d: "M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"
                                                                                    })
                                                                                }), "Daily Route - ", M(P)]
                                                                            }), (0,
                                                                            r.jsx)("div", {
                                                                                className: "flex items-center space-x-2",
                                                                                children: ((null == w ? void 0 : w.role) === "admin" || (null == w ? void 0 : w.role) === "dispatcher") && (0,
                                                                                r.jsxs)(r.Fragment, {
                                                                                    children: [E && (0,
                                                                                    r.jsxs)("button", {
                                                                                        onClick: () => {
                                                                                            ek(e),
                                                                                            ew(!0)
                                                                                        }
                                                                                        ,
                                                                                        className: "px-3 py-1.5 bg-green-600 text-white text-xs rounded-md hover:bg-green-700 transition-colors flex items-center space-x-1",
                                                                                        children: [(0,
                                                                                        r.jsx)("svg", {
                                                                                            className: "w-3 h-3",
                                                                                            fill: "none",
                                                                                            stroke: "currentColor",
                                                                                            viewBox: "0 0 24 24",
                                                                                            children: (0,
                                                                                            r.jsx)("path", {
                                                                                                strokeLinecap: "round",
                                                                                                strokeLinejoin: "round",
                                                                                                strokeWidth: 2,
                                                                                                d: "M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"
                                                                                            })
                                                                                        }), (0,
                                                                                        r.jsx)("span", {
                                                                                            children: "Import"
                                                                                        })]
                                                                                    }), (0,
                                                                                    r.jsxs)("button", {
                                                                                        onClick: () => tt(e),
                                                                                        className: "px-3 py-1.5 bg-blue-600 text-white text-xs rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-1",
                                                                                        children: [(0,
                                                                                        r.jsx)("svg", {
                                                                                            className: "w-3 h-3",
                                                                                            fill: "none",
                                                                                            stroke: "currentColor",
                                                                                            viewBox: "0 0 24 24",
                                                                                            children: (0,
                                                                                            r.jsx)("path", {
                                                                                                strokeLinecap: "round",
                                                                                                strokeLinejoin: "round",
                                                                                                strokeWidth: 2,
                                                                                                d: "M12 6v6m0 0v6m0-6h6m-6 0H6"
                                                                                            })
                                                                                        }), (0,
                                                                                        r.jsx)("span", {
                                                                                            children: "Add Stop"
                                                                                        })]
                                                                                    }), ey[e.id] && ey[e.id].length > 0 && (0,
                                                                                    r.jsxs)("button", {
                                                                                        onClick: () => {
                                                                                            eJ[e.id] ? eY(e.id) : eq(e.id)
                                                                                        }
                                                                                        ,
                                                                                        className: "px-3 py-1.5 text-xs rounded-md transition-colors flex items-center space-x-1 ".concat(eJ[e.id] ? "bg-orange-600 text-white hover:bg-orange-700" : "bg-purple-600 text-white hover:bg-purple-700"),
                                                                                        children: [(0,
                                                                                        r.jsx)("svg", {
                                                                                            className: "w-3 h-3",
                                                                                            fill: "none",
                                                                                            stroke: "currentColor",
                                                                                            viewBox: "0 0 24 24",
                                                                                            children: (0,
                                                                                            r.jsx)("path", {
                                                                                                strokeLinecap: "round",
                                                                                                strokeLinejoin: "round",
                                                                                                strokeWidth: 2,
                                                                                                d: "M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"
                                                                                            })
                                                                                        }), (0,
                                                                                        r.jsx)("span", {
                                                                                            children: eJ[e.id] ? "Reassign (".concat((eB[e.id] || []).length, ")") : "Reassign Jobs"
                                                                                        })]
                                                                                    }), eJ[e.id] && (0,
                                                                                    r.jsxs)("button", {
                                                                                        onClick: () => eq(e.id),
                                                                                        className: "px-3 py-1.5 bg-gray-500 text-white text-xs rounded-md hover:bg-gray-600 transition-colors flex items-center space-x-1",
                                                                                        children: [(0,
                                                                                        r.jsx)("svg", {
                                                                                            className: "w-3 h-3",
                                                                                            fill: "none",
                                                                                            stroke: "currentColor",
                                                                                            viewBox: "0 0 24 24",
                                                                                            children: (0,
                                                                                            r.jsx)("path", {
                                                                                                strokeLinecap: "round",
                                                                                                strokeLinejoin: "round",
                                                                                                strokeWidth: 2,
                                                                                                d: "M6 18L18 6M6 6l12 12"
                                                                                            })
                                                                                        }), (0,
                                                                                        r.jsx)("span", {
                                                                                            children: "Cancel"
                                                                                        })]
                                                                                    })]
                                                                                })
                                                                            })]
                                                                        }), (0,
                                                                        r.jsx)("div", {
                                                                            className: "space-y-2",
                                                                            children: ey[e.id] && ey[e.id].length > 0 ? ey[e.id].sort( (e, t) => {
                                                                                var s, r, a, n, l, o, i, c, d, m;
                                                                                let u = e => {
                                                                                    switch (e) {
                                                                                    case "completed":
                                                                                        return 1;
                                                                                    case "in-progress":
                                                                                        return 2;
                                                                                    case "assigned":
                                                                                    case "pending":
                                                                                    default:
                                                                                        return 3;
                                                                                    case "cancelled":
                                                                                    case "externally_unassigned":
                                                                                        return 4
                                                                                    }
                                                                                }
                                                                                  , x = u(e.status)
                                                                                  , p = u(t.status);
                                                                                if (x !== p)
                                                                                    return x - p;
                                                                                let h = e => {
                                                                                    if (!e)
                                                                                        return null;
                                                                                    if (null == e ? void 0 : e.seconds)
                                                                                        return 1e3 * e.seconds;
                                                                                    if (e instanceof Date)
                                                                                        return isNaN(e.getTime()) ? null : e.getTime();
                                                                                    if ("number" == typeof e)
                                                                                        return Number.isFinite(e) ? e : null;
                                                                                    if ("string" == typeof e) {
                                                                                        let t = new Date(e.length <= 10 ? e + "T00:00:00" : e).getTime();
                                                                                        return isNaN(t) ? null : t
                                                                                    }
                                                                                    return null
                                                                                }
                                                                                ;
                                                                                if ("completed" === e.status && "completed" === t.status) {
                                                                                    let i = null !== (a = null !== (r = null !== (s = h(e.completedAt)) && void 0 !== s ? s : h(e.routeDate)) && void 0 !== r ? r : h(e.createdAt)) && void 0 !== a ? a : Number.MAX_SAFE_INTEGER
                                                                                      , c = null !== (o = null !== (l = null !== (n = h(t.completedAt)) && void 0 !== n ? n : h(t.routeDate)) && void 0 !== l ? l : h(t.createdAt)) && void 0 !== o ? o : Number.MAX_SAFE_INTEGER;
                                                                                    if (i !== c)
                                                                                        return i - c
                                                                                } else if (("assigned" === e.status || "pending" === e.status) && ("assigned" === t.status || "pending" === t.status))
                                                                                    ;
                                                                                else {
                                                                                    let s = null !== (c = null !== (i = h(e.routeDate)) && void 0 !== i ? i : h(e.createdAt)) && void 0 !== c ? c : 0
                                                                                      , r = null !== (m = null !== (d = h(t.routeDate)) && void 0 !== d ? d : h(t.createdAt)) && void 0 !== m ? m : 0;
                                                                                    if (s !== r)
                                                                                        return r - s
                                                                                }
                                                                                if (("assigned" === e.status || "pending" === e.status) && ("assigned" === t.status || "pending" === t.status)) {
                                                                                    let s = e.timeFrame || "99-99"
                                                                                      , r = t.timeFrame || "99-99"
                                                                                      , a = e => {
                                                                                        let t = e.match(/^(\d+)/);
                                                                                        return t ? parseInt(t[1]) : 99
                                                                                    }
                                                                                      , n = a(s)
                                                                                      , l = a(r);
                                                                                    if (n !== l)
                                                                                        return n - l
                                                                                }
                                                                                return 0
                                                                            }
                                                                            ).map( (t, s) => (0,
                                                                            r.jsxs)("div", {
                                                                                onClick: () => !eJ[e.id] && ts(t),
                                                                                className: "flex items-center justify-between p-2 bg-gray-50 rounded-md transition-all duration-300 ease-in-out transform ".concat(eJ[e.id] ? "cursor-default" : "hover:bg-gray-100 cursor-pointer hover:scale-[1.02]"),
                                                                                style: {
                                                                                    animationDelay: "".concat(50 * s, "ms"),
                                                                                    animation: "slideInFromTop 0.3s ease-out forwards"
                                                                                },
                                                                                children: [(0,
                                                                                r.jsxs)("div", {
                                                                                    className: "flex items-center space-x-3 flex-1",
                                                                                    children: [eJ[e.id] && (0,
                                                                                    r.jsx)("input", {
                                                                                        type: "checkbox",
                                                                                        checked: (eB[e.id] || []).includes(t.id),
                                                                                        onChange: s => eG(e.id, t.id, s.target.checked),
                                                                                        className: "w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500 focus:ring-2",
                                                                                        onClick: e => e.stopPropagation()
                                                                                    }), (0,
                                                                                    r.jsx)("div", {
                                                                                        className: "w-10 h-10 rounded-full bg-blue-100 border-2 border-blue-300 flex items-center justify-center",
                                                                                        children: (0,
                                                                                        r.jsx)("span", {
                                                                                            className: "text-xs font-medium text-blue-700",
                                                                                            children: t.timeFrame
                                                                                        })
                                                                                    }), (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "text-sm font-medium text-gray-900",
                                                                                        children: (0,
                                                                                        k.mD)(t.jobId, t.catvProvider || e.catvProvider)
                                                                                    }), (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "text-sm font-medium text-gray-900",
                                                                                        children: t.type || t.jobType || "Unknown"
                                                                                    }), t.staticStatus && (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "text-[11px] font-normal px-1.5 py-0.5 rounded-sm ".concat("completed" === t.staticStatus ? "text-green-600 bg-green-50" : "in-progress" === t.staticStatus ? "text-blue-600 bg-blue-50" : "started" === t.staticStatus ? "text-blue-600 bg-blue-50" : "assigned" === t.staticStatus ? "text-orange-600 bg-orange-50" : "cancelled" === t.staticStatus ? "text-red-600 bg-red-50" : "externally_unassigned" === t.staticStatus ? "text-gray-600 bg-gray-50" : "unassigned" === t.staticStatus ? "text-gray-600 bg-gray-50" : "claimed" === t.staticStatus ? "text-yellow-600 bg-yellow-50" : "reference" === t.staticStatus ? "text-purple-600 bg-purple-50" : "text-gray-600 bg-gray-50"),
                                                                                        children: t.staticStatus.replace("-", " ").replace("_", " ")
                                                                                    }), (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold ring-1 ring-inset ".concat("completed" === t.status ? "bg-green-100 text-green-700 ring-green-200" : "in-progress" === t.status ? "bg-blue-100 text-blue-700 ring-blue-200" : "started" === t.status ? "bg-blue-100 text-blue-700 ring-blue-200" : "assigned" === t.status ? "bg-orange-100 text-orange-700 ring-orange-200" : "cancelled" === t.status ? "bg-red-100 text-red-700 ring-red-200" : "externally_unassigned" === t.status ? "bg-gray-100 text-gray-700 ring-gray-200" : "unassigned" === t.status ? "bg-gray-100 text-gray-700 ring-gray-200" : "claimed" === t.status ? "bg-yellow-100 text-yellow-700 ring-yellow-200" : "reference" === t.status ? "bg-purple-100 text-purple-700 ring-purple-200" : "bg-yellow-100 text-yellow-700 ring-yellow-200"),
                                                                                        children: t.status
                                                                                    }), t.jobOrigin && (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-indigo-100 text-indigo-700 ring-1 ring-indigo-200",
                                                                                        children: t.jobOrigin
                                                                                    }), ( () => {
                                                                                        let e = function(e) {
                                                                                            if (!e)
                                                                                                return {
                                                                                                    isRepeat: !1
                                                                                                };
                                                                                            if (!0 === e.isRepeat && e.repeatInfo)
                                                                                                return {
                                                                                                    isRepeat: !0,
                                                                                                    techNumber: e.repeatInfo.originalTechNumber,
                                                                                                    date: e.repeatInfo.originalJobDate ? ( () => {
                                                                                                        try {
                                                                                                            let t = e.repeatInfo.originalJobDate instanceof Date ? e.repeatInfo.originalJobDate : new Date(e.repeatInfo.originalJobDate);
                                                                                                            return isNaN(t.getTime()) ? void 0 : t.toLocaleDateString("en-US", {
                                                                                                                year: "numeric",
                                                                                                                month: "short",
                                                                                                                day: "numeric"
                                                                                                            })
                                                                                                        } catch (t) {
                                                                                                            console.error("Error parsing originalJobDate:", e.repeatInfo.originalJobDate, t);
                                                                                                            return
                                                                                                        }
                                                                                                    }
                                                                                                    )() : void 0
                                                                                                };
                                                                                            if (e.description) {
                                                                                                let t = e.description.match(/⚠️ REPEAT JOB:.*?by.*?\((\d+)\)/);
                                                                                                if (t)
                                                                                                    return {
                                                                                                        isRepeat: !0,
                                                                                                        techNumber: t[1]
                                                                                                    }
                                                                                            }
                                                                                            return {
                                                                                                isRepeat: !1
                                                                                            }
                                                                                        }(t);
                                                                                        if (e.isRepeat) {
                                                                                            var s, a;
                                                                                            let n = (null === (s = t.repeatInfo) || void 0 === s ? void 0 : s.originalTechName) || "Unknown Tech"
                                                                                              , l = null === (a = t.repeatInfo) || void 0 === a ? void 0 : a.originalJobDate
                                                                                              , o = "Unknown Date";
                                                                                            if (l)
                                                                                                try {
                                                                                                    let e = l instanceof Date ? l : new Date(l);
                                                                                                    isNaN(e.getTime()) || (o = e.toLocaleDateString("en-US", {
                                                                                                        year: "numeric",
                                                                                                        month: "short",
                                                                                                        day: "numeric"
                                                                                                    }))
                                                                                                } catch (e) {
                                                                                                    console.error("Error formatting repeat job date:", e)
                                                                                                }
                                                                                            let i = e.techNumber ? "⚠️ REPEAT ".concat(e.techNumber) : "⚠️ REPEAT"
                                                                                              , c = "⚠️ REPEAT: This job was completed on ".concat(o, " by ").concat(n).concat(e.techNumber ? " (".concat(e.techNumber, ")") : "");
                                                                                            return (0,
                                                                                            r.jsx)("span", {
                                                                                                className: "inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800 hidden md:inline-flex",
                                                                                                title: c,
                                                                                                children: i
                                                                                            })
                                                                                        }
                                                                                        return null
                                                                                    }
                                                                                    )(), t.isRepeatFixed && (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-semibold bg-green-100 text-green-700 ring-1 ring-green-200",
                                                                                        children: "Fixed"
                                                                                    }), t.completedByOtherCompanyTech && (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "inline-flex items-center px-1.5 py-0.5 rounded-full text-[10px] font-semibold bg-blue-100 text-blue-700 ring-1 ring-blue-200",
                                                                                        children: "Other Co. Tech"
                                                                                    }), t.isReference && (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-purple-100 text-purple-700 ring-1 ring-purple-200",
                                                                                        children: "Reference"
                                                                                    }), t.internalReassignment && !t.isReference && (0,
                                                                                    r.jsx)("span", {
                                                                                        className: "inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-blue-100 text-blue-700 ring-1 ring-blue-200",
                                                                                        children: "Internal"
                                                                                    })]
                                                                                }), (0,
                                                                                r.jsxs)("div", {
                                                                                    className: "flex flex-col text-xs text-gray-600 ml-4",
                                                                                    children: [(0,
                                                                                    r.jsx)("span", {
                                                                                        children: t.customerName
                                                                                    }), (0,
                                                                                    r.jsxs)("span", {
                                                                                        children: [t.address, t.unitNumber && ", ".concat(t.unitNumber), t.city && ", ".concat(t.city), t.customerPhone && " • ".concat(t.customerPhone)]
                                                                                    })]
                                                                                })]
                                                                            }, t.id)) : (0,
                                                                            r.jsxs)("div", {
                                                                                className: "text-center py-4 text-gray-500",
                                                                                children: [(0,
                                                                                r.jsx)("div", {
                                                                                    className: "w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-2",
                                                                                    children: (0,
                                                                                    r.jsx)("svg", {
                                                                                        className: "w-6 h-6 text-gray-400",
                                                                                        fill: "none",
                                                                                        stroke: "currentColor",
                                                                                        viewBox: "0 0 24 24",
                                                                                        children: (0,
                                                                                        r.jsx)("path", {
                                                                                            strokeLinecap: "round",
                                                                                            strokeLinejoin: "round",
                                                                                            strokeWidth: 2,
                                                                                            d: "M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"
                                                                                        })
                                                                                    })
                                                                                }), (0,
                                                                                r.jsx)("p", {
                                                                                    className: "text-sm font-medium mb-1",
                                                                                    children: "No stops in route"
                                                                                }), (0,
                                                                                r.jsx)("p", {
                                                                                    className: "text-xs",
                                                                                    children: 'Click "Add Stop" to add jobs to this route'
                                                                                })]
                                                                            })
                                                                        }), (0,
                                                                        r.jsx)("div", {
                                                                            className: "mt-3 pt-3 border-t border-gray-200",
                                                                            children: (0,
                                                                            r.jsxs)("div", {
                                                                                className: "flex items-center justify-between text-xs text-gray-600",
                                                                                children: [(0,
                                                                                r.jsxs)("span", {
                                                                                    children: ["Total Stops: ", ey[e.id] ? ey[e.id].length : 0]
                                                                                }), (0,
                                                                                r.jsxs)("span", {
                                                                                    children: ["Estimated Duration: ", ey[e.id] ? Math.ceil(1.5 * ey[e.id].length) : 0, " hours"]
                                                                                })]
                                                                            })
                                                                        })]
                                                                    })
                                                                })
                                                            })]
                                                        }, e.id)
                                                    }
                                                    )
                                                })]
                                            })
                                        })]
                                    }, t)
                                }
                                )]
                            }, t)
                        }
                        )
                    })]
                }), X && Y && (0,
                r.jsx)("div", {
                    className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
                    onClick: e => {
                        e.target === e.currentTarget && e3()
                    }
                    ,
                    children: (0,
                    r.jsx)("div", {
                        className: "bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto transform transition-all duration-300 scale-100",
                        children: (0,
                        r.jsxs)("div", {
                            className: "p-8",
                            children: [(0,
                            r.jsxs)("div", {
                                className: "flex justify-between items-start mb-8",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "flex items-center space-x-6",
                                    children: [Y.profilePicture ? (0,
                                    r.jsxs)("div", {
                                        className: "relative",
                                        children: [(0,
                                        r.jsx)("img", {
                                            src: Y.profilePicture,
                                            alt: "".concat(Y.firstName, " ").concat(Y.lastName),
                                            className: "h-24 w-24 rounded-2xl object-cover shadow-lg border-4 border-white"
                                        }), (0,
                                        r.jsx)("div", {
                                            className: "absolute -bottom-2 -right-2 w-8 h-8 rounded-full border-4 border-white flex items-center justify-center ".concat(Y.isClockedIn ? "bg-green-500" : "bg-red-500"),
                                            children: (0,
                                            r.jsx)("div", {
                                                className: "w-3 h-3 rounded-full ".concat(Y.isClockedIn ? "bg-green-400" : "bg-red-400")
                                            })
                                        })]
                                    }) : (0,
                                    r.jsxs)("div", {
                                        className: "relative",
                                        children: [(0,
                                        r.jsx)("div", {
                                            className: "h-24 w-24 rounded-2xl bg-gradient-to-br from-purple-400 to-blue-500 flex items-center justify-center shadow-lg border-4 border-white",
                                            children: (0,
                                            r.jsxs)("span", {
                                                className: "text-3xl font-bold text-white",
                                                children: [Y.firstName.charAt(0), Y.lastName.charAt(0)]
                                            })
                                        }), (0,
                                        r.jsx)("div", {
                                            className: "absolute -bottom-2 -right-2 w-8 h-8 rounded-full border-4 border-white flex items-center justify-center ".concat(Y.isClockedIn ? "bg-green-500" : "bg-red-500"),
                                            children: (0,
                                            r.jsx)("div", {
                                                className: "w-3 h-3 rounded-full ".concat(Y.isClockedIn ? "bg-green-400" : "bg-red-400")
                                            })
                                        })]
                                    }), (0,
                                    r.jsxs)("div", {
                                        children: [(0,
                                        r.jsxs)("h2", {
                                            className: "text-3xl font-bold text-gray-900 mb-2",
                                            children: [Y.firstName, " ", Y.lastName]
                                        }), (0,
                                        r.jsx)("p", {
                                            className: "text-gray-600 text-lg mb-3",
                                            children: Y.email
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex items-center space-x-3",
                                            children: [(0,
                                            r.jsx)("div", {
                                                className: "px-4 py-2 rounded-full text-sm font-semibold ".concat(Y.isClockedIn ? "bg-green-100 text-green-800 border border-green-200" : "bg-red-100 text-red-800 border border-red-200"),
                                                children: Y.isClockedIn ? "\uD83D\uDFE2 Currently Working" : "\uD83D\uDD34 Off Duty"
                                            }), (0,
                                            r.jsxs)("div", {
                                                className: "px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold border border-blue-200",
                                                children: ["Tech Number: ", Y.techNumber || Y.technumber || Y.techId || "Not assigned"]
                                            })]
                                        })]
                                    })]
                                }), (0,
                                r.jsx)("button", {
                                    onClick: e3,
                                    className: "text-gray-400 hover:text-gray-600 p-3 rounded-xl hover:bg-gray-100 transition-all duration-200 transform hover:scale-110",
                                    children: (0,
                                    r.jsx)("svg", {
                                        className: "w-6 h-6",
                                        fill: "none",
                                        stroke: "currentColor",
                                        viewBox: "0 0 24 24",
                                        children: (0,
                                        r.jsx)("path", {
                                            strokeLinecap: "round",
                                            strokeLinejoin: "round",
                                            strokeWidth: 2,
                                            d: "M6 18L18 6M6 6l12 12"
                                        })
                                    })
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",
                                children: [(0,
                                r.jsx)("div", {
                                    className: "bg-gradient-to-r from-blue-50 to-blue-100 p-3 rounded-lg border border-blue-200",
                                    children: (0,
                                    r.jsxs)("div", {
                                        className: "flex items-center space-x-2",
                                        children: [(0,
                                        r.jsx)("div", {
                                            className: "w-6 h-6 bg-blue-500 rounded-md flex items-center justify-center",
                                            children: (0,
                                            r.jsx)("svg", {
                                                className: "w-3 h-3 text-white",
                                                fill: "none",
                                                stroke: "currentColor",
                                                viewBox: "0 0 24 24",
                                                children: (0,
                                                r.jsx)("path", {
                                                    strokeLinecap: "round",
                                                    strokeLinejoin: "round",
                                                    strokeWidth: 2,
                                                    d: "M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                                                })
                                            })
                                        }), (0,
                                        r.jsxs)("div", {
                                            children: [(0,
                                            r.jsx)("p", {
                                                className: "text-xs text-blue-600 font-medium",
                                                children: "Work Time Today"
                                            }), (0,
                                            r.jsx)("p", {
                                                className: "text-sm font-bold text-blue-900",
                                                children: (s = (Y.totalWorkTimeToday || 0) + (e => {
                                                    let t;
                                                    if (!e.isClockedIn || !e.lastClockIn)
                                                        return 0;
                                                    let s = new Date;
                                                    return isNaN((t = e.lastClockIn.toDate && "function" == typeof e.lastClockIn.toDate ? e.lastClockIn.toDate() : e.lastClockIn instanceof Date ? e.lastClockIn : new Date(e.lastClockIn.seconds ? 1e3 * e.lastClockIn.seconds : e.lastClockIn)).getTime()) ? 0 : Math.floor((s.getTime() - t.getTime()) / 6e4)
                                                }
                                                )(Y),
                                                "".concat(Math.floor(s / 60), "h ").concat(s % 60, "m"))
                                            })]
                                        })]
                                    })
                                }), (0,
                                r.jsx)("div", {
                                    className: "bg-gradient-to-r from-green-50 to-green-100 p-3 rounded-lg border border-green-200",
                                    children: (0,
                                    r.jsxs)("div", {
                                        className: "flex items-center space-x-2",
                                        children: [(0,
                                        r.jsx)("div", {
                                            className: "w-6 h-6 bg-green-500 rounded-md flex items-center justify-center",
                                            children: (0,
                                            r.jsx)("svg", {
                                                className: "w-3 h-3 text-white",
                                                fill: "none",
                                                stroke: "currentColor",
                                                viewBox: "0 0 24 24",
                                                children: (0,
                                                r.jsx)("path", {
                                                    strokeLinecap: "round",
                                                    strokeLinejoin: "round",
                                                    strokeWidth: 2,
                                                    d: "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                                                })
                                            })
                                        }), (0,
                                        r.jsxs)("div", {
                                            children: [(0,
                                            r.jsx)("p", {
                                                className: "text-xs text-green-600 font-medium",
                                                children: "Last Clock In"
                                            }), (0,
                                            r.jsx)("p", {
                                                className: "text-sm font-bold text-green-900",
                                                children: Y.lastClockIn ? e$(Y.lastClockIn) : "N/A"
                                            })]
                                        })]
                                    })
                                }), (0,
                                r.jsx)("div", {
                                    className: "bg-gradient-to-r from-purple-50 to-purple-100 p-3 rounded-lg border border-purple-200",
                                    children: (0,
                                    r.jsxs)("div", {
                                        className: "flex items-center space-x-2",
                                        children: [(0,
                                        r.jsx)("div", {
                                            className: "w-6 h-6 bg-purple-500 rounded-md flex items-center justify-center",
                                            children: (0,
                                            r.jsx)("svg", {
                                                className: "w-3 h-3 text-white",
                                                fill: "none",
                                                stroke: "currentColor",
                                                viewBox: "0 0 24 24",
                                                children: (0,
                                                r.jsx)("path", {
                                                    strokeLinecap: "round",
                                                    strokeLinejoin: "round",
                                                    strokeWidth: 2,
                                                    d: "M6 18L18 6M6 6l12 12"
                                                })
                                            })
                                        }), (0,
                                        r.jsxs)("div", {
                                            children: [(0,
                                            r.jsx)("p", {
                                                className: "text-xs text-purple-600 font-medium",
                                                children: "Last Clock Out"
                                            }), (0,
                                            r.jsx)("p", {
                                                className: "text-sm font-bold text-purple-900",
                                                children: Y.lastClockOut ? e$(Y.lastClockOut) : "N/A"
                                            })]
                                        })]
                                    })
                                }), (0,
                                r.jsx)("div", {
                                    className: "bg-gradient-to-r from-orange-50 to-orange-100 p-3 rounded-lg border border-orange-200",
                                    children: (0,
                                    r.jsxs)("div", {
                                        className: "flex items-center space-x-2",
                                        children: [(0,
                                        r.jsx)("div", {
                                            className: "w-6 h-6 bg-orange-500 rounded-md flex items-center justify-center",
                                            children: (0,
                                            r.jsx)("svg", {
                                                className: "w-3 h-3 text-white",
                                                fill: "none",
                                                stroke: "currentColor",
                                                viewBox: "0 0 24 24",
                                                children: (0,
                                                r.jsx)("path", {
                                                    strokeLinecap: "round",
                                                    strokeLinejoin: "round",
                                                    strokeWidth: 2,
                                                    d: "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                                                })
                                            })
                                        }), (0,
                                        r.jsxs)("div", {
                                            children: [(0,
                                            r.jsx)("p", {
                                                className: "text-xs text-orange-600 font-medium",
                                                children: "Member Since"
                                            }), (0,
                                            r.jsx)("p", {
                                                className: "text-sm font-bold text-orange-900",
                                                children: (p = Y.createdAt) ? p.toLocaleDateString("en-US", {
                                                    year: "numeric",
                                                    month: "long",
                                                    day: "numeric"
                                                }) : "N/A"
                                            })]
                                        })]
                                    })
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "grid grid-cols-1 lg:grid-cols-2 gap-8",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "bg-gray-50 rounded-xl p-6",
                                    children: [(0,
                                    r.jsxs)("h3", {
                                        className: "text-xl font-bold text-gray-900 mb-4 flex items-center",
                                        children: [(0,
                                        r.jsx)("svg", {
                                            className: "w-5 h-5 mr-2 text-blue-600",
                                            fill: "none",
                                            stroke: "currentColor",
                                            viewBox: "0 0 24 24",
                                            children: (0,
                                            r.jsx)("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                strokeWidth: 2,
                                                d: "M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                                            })
                                        }), "Basic Information"]
                                    }), (0,
                                    r.jsxs)("div", {
                                        className: "space-y-4",
                                        children: [(0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Phone Number"
                                            }), (0,
                                            r.jsx)("span", {
                                                className: "text-gray-900 font-medium",
                                                children: Y.phoneNumber || "Not provided"
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Area of Work"
                                            }), (0,
                                            r.jsx)("div", {
                                                className: "flex items-center space-x-2",
                                                children: "areaOfWork" === Q ? (0,
                                                r.jsxs)("div", {
                                                    className: "flex flex-col items-end space-y-2",
                                                    children: [(0,
                                                    r.jsxs)("select", {
                                                        value: ee,
                                                        onChange: e => et(e.target.value),
                                                        className: "text-gray-900 font-medium bg-white border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 min-w-[150px]",
                                                        autoFocus: !0,
                                                        children: [(0,
                                                        r.jsx)("option", {
                                                            value: "",
                                                            children: "Select Area of Work"
                                                        }), null == N ? void 0 : null === (t = N.areasOfWork) || void 0 === t ? void 0 : t.map(e => (0,
                                                        r.jsx)("option", {
                                                            value: e,
                                                            children: e
                                                        }, e))]
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "flex space-x-2",
                                                        children: [(0,
                                                        r.jsx)("button", {
                                                            onClick: e6,
                                                            className: "text-green-600 hover:text-green-800 text-sm font-medium",
                                                            children: "✓ Save"
                                                        }), (0,
                                                        r.jsx)("button", {
                                                            onClick: e8,
                                                            className: "text-red-600 hover:text-red-800 text-sm font-medium",
                                                            children: "✕ Cancel"
                                                        })]
                                                    })]
                                                }) : (0,
                                                r.jsxs)(r.Fragment, {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "text-gray-900 font-medium",
                                                        children: Y.areaOfWork || "Not specified"
                                                    }), (0,
                                                    r.jsx)("button", {
                                                        onClick: () => e5("areaOfWork", Y.areaOfWork || ""),
                                                        className: "text-blue-600 hover:text-blue-800 text-sm font-medium ml-2",
                                                        children: "✏️"
                                                    })]
                                                })
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "CATV Provider"
                                            }), (0,
                                            r.jsx)("span", {
                                                className: "text-gray-900 font-medium",
                                                children: Y.catvProvider || "Not specified"
                                            })]
                                        })]
                                    })]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "bg-gray-50 rounded-xl p-6",
                                    children: [(0,
                                    r.jsxs)("h3", {
                                        className: "text-xl font-bold text-gray-900 mb-4 flex items-center",
                                        children: [(0,
                                        r.jsx)("svg", {
                                            className: "w-5 h-5 mr-2 text-green-600",
                                            fill: "none",
                                            stroke: "currentColor",
                                            viewBox: "0 0 24 24",
                                            children: (0,
                                            r.jsx)("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                strokeWidth: 2,
                                                d: "M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2V6"
                                            })
                                        }), "Work Information"]
                                    }), (0,
                                    r.jsxs)("div", {
                                        className: "space-y-4",
                                        children: [(0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Vendor"
                                            }), (0,
                                            r.jsx)("span", {
                                                className: "text-gray-900 font-medium",
                                                children: Y.vendor || "Not specified"
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Legal Entity"
                                            }), (0,
                                            r.jsx)("span", {
                                                className: "text-gray-900 font-medium",
                                                children: Y.legalEntity || "Not specified"
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Work Skill"
                                            }), (0,
                                            r.jsx)("div", {
                                                className: "flex items-center space-x-2",
                                                children: "workskill" === Q ? (0,
                                                r.jsxs)("div", {
                                                    className: "flex flex-col items-end space-y-2",
                                                    children: [(0,
                                                    r.jsx)("div", {
                                                        className: "flex gap-1 flex-wrap",
                                                        children: ((null == N ? void 0 : N.workSkills) && N.workSkills.length > 0 ? N.workSkills : ["FTTH", "COAX"]).map(e => {
                                                            let t = ee.toLowerCase().includes(e.toLowerCase());
                                                            return (0,
                                                            r.jsx)("button", {
                                                                type: "button",
                                                                onClick: () => {
                                                                    let s = ee.toLowerCase().split(",").map(e => e.trim());
                                                                    et((t ? s.filter(t => t !== e.toLowerCase()) : [...s.filter(e => "" !== e), e.toLowerCase()]).join(", "))
                                                                }
                                                                ,
                                                                className: "px-3 py-1 text-xs font-medium rounded border transition-colors ".concat(t ? "bg-blue-100 border-blue-300 text-blue-700" : "bg-gray-100 border-gray-300 text-gray-600 hover:bg-gray-200"),
                                                                children: e
                                                            }, e)
                                                        }
                                                        )
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "text-xs text-gray-500",
                                                        children: ["Selected: ", ee || "No skills selected"]
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "flex space-x-2",
                                                        children: [(0,
                                                        r.jsx)("button", {
                                                            onClick: e6,
                                                            className: "text-green-600 hover:text-green-800 text-sm font-medium",
                                                            children: "✓ Save"
                                                        }), (0,
                                                        r.jsx)("button", {
                                                            onClick: e8,
                                                            className: "text-red-600 hover:text-red-800 text-sm font-medium",
                                                            children: "✕ Cancel"
                                                        })]
                                                    })]
                                                }) : (0,
                                                r.jsxs)(r.Fragment, {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "text-gray-900 font-medium",
                                                        children: Y.workskill || "Not specified"
                                                    }), (0,
                                                    r.jsx)("button", {
                                                        onClick: () => e5("workskill", Y.workskill || ""),
                                                        className: "text-blue-600 hover:text-blue-800 text-sm font-medium ml-2",
                                                        children: "✏️"
                                                    })]
                                                })
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "English Level"
                                            }), (0,
                                            r.jsx)("span", {
                                                className: "text-gray-900 font-medium",
                                                children: Y.englishLevel || "Not specified"
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Work App Username"
                                            }), (0,
                                            r.jsx)("div", {
                                                className: "flex items-center space-x-2",
                                                children: "workAppUsername" === Q ? (0,
                                                r.jsxs)("div", {
                                                    className: "flex flex-col items-end space-y-2",
                                                    children: [(0,
                                                    r.jsx)("input", {
                                                        type: "text",
                                                        value: ee,
                                                        onChange: e => et(e.target.value),
                                                        className: "text-gray-900 font-medium bg-white border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",
                                                        autoFocus: !0
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "flex space-x-2",
                                                        children: [(0,
                                                        r.jsx)("button", {
                                                            onClick: e6,
                                                            className: "text-green-600 hover:text-green-800 text-sm font-medium",
                                                            children: "✓ Save"
                                                        }), (0,
                                                        r.jsx)("button", {
                                                            onClick: e8,
                                                            className: "text-red-600 hover:text-red-800 text-sm font-medium",
                                                            children: "✕ Cancel"
                                                        })]
                                                    })]
                                                }) : (0,
                                                r.jsxs)(r.Fragment, {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "text-gray-900 font-medium",
                                                        children: Y.workAppUsername || "Not specified"
                                                    }), (0,
                                                    r.jsx)("button", {
                                                        onClick: () => e5("workAppUsername", Y.workAppUsername || ""),
                                                        className: "text-blue-600 hover:text-blue-800 text-sm font-medium ml-2",
                                                        children: "✏️"
                                                    })]
                                                })
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Work App Password"
                                            }), (0,
                                            r.jsx)("div", {
                                                className: "flex items-center space-x-2",
                                                children: "workAppPassword" === Q ? (0,
                                                r.jsxs)("div", {
                                                    className: "flex flex-col items-end space-y-2",
                                                    children: [(0,
                                                    r.jsx)("input", {
                                                        type: "text",
                                                        value: ee,
                                                        onChange: e => et(e.target.value),
                                                        className: "text-gray-900 font-medium bg-white border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",
                                                        autoFocus: !0
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "flex space-x-2",
                                                        children: [(0,
                                                        r.jsx)("button", {
                                                            onClick: e6,
                                                            className: "text-green-600 hover:text-green-800 text-sm font-medium",
                                                            children: "✓ Save"
                                                        }), (0,
                                                        r.jsx)("button", {
                                                            onClick: e8,
                                                            className: "text-red-600 hover:text-red-800 text-sm font-medium",
                                                            children: "✕ Cancel"
                                                        })]
                                                    })]
                                                }) : (0,
                                                r.jsxs)(r.Fragment, {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "text-gray-900 font-medium",
                                                        children: Y.workAppPassword || "Not specified"
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "flex items-center space-x-1",
                                                        children: [(0,
                                                        r.jsx)("button", {
                                                            onClick: () => {
                                                                Y.workAppPassword && navigator.clipboard.writeText(Y.workAppPassword)
                                                            }
                                                            ,
                                                            className: "text-green-600 hover:text-green-800 text-sm font-medium",
                                                            title: "Copy password",
                                                            children: "\uD83D\uDCCB"
                                                        }), (0,
                                                        r.jsx)("button", {
                                                            onClick: () => e5("workAppPassword", Y.workAppPassword || ""),
                                                            className: "text-blue-600 hover:text-blue-800 text-sm font-medium",
                                                            title: "Edit password",
                                                            children: "✏️"
                                                        })]
                                                    })]
                                                })
                                            })]
                                        })]
                                    })]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "bg-gray-50 rounded-xl p-6",
                                    children: [(0,
                                    r.jsxs)("h3", {
                                        className: "text-xl font-bold text-gray-900 mb-4 flex items-center",
                                        children: [(0,
                                        r.jsx)("svg", {
                                            className: "w-5 h-5 mr-2 text-purple-600",
                                            fill: "none",
                                            stroke: "currentColor",
                                            viewBox: "0 0 24 24",
                                            children: (0,
                                            r.jsx)("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                strokeWidth: 2,
                                                d: "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                                            })
                                        }), "Schedule & Availability"]
                                    }), (0,
                                    r.jsxs)("div", {
                                        className: "space-y-4",
                                        children: [(0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Schedule"
                                            }), (0,
                                            r.jsx)("div", {
                                                className: "flex items-center space-x-2",
                                                children: "schedule" === Q ? (0,
                                                r.jsxs)("div", {
                                                    className: "flex flex-col items-end space-y-2",
                                                    children: [(0,
                                                    r.jsx)("div", {
                                                        className: "flex gap-1",
                                                        children: [{
                                                            key: "mon",
                                                            label: "Mon"
                                                        }, {
                                                            key: "tue",
                                                            label: "Tue"
                                                        }, {
                                                            key: "wed",
                                                            label: "Wed"
                                                        }, {
                                                            key: "thu",
                                                            label: "Thu"
                                                        }, {
                                                            key: "fri",
                                                            label: "Fri"
                                                        }, {
                                                            key: "sat",
                                                            label: "Sat"
                                                        }, {
                                                            key: "sun",
                                                            label: "Sun"
                                                        }].map(e => {
                                                            let t = ee.toLowerCase().split(",").map(e => e.trim()).includes(e.key);
                                                            return (0,
                                                            r.jsx)("button", {
                                                                type: "button",
                                                                onClick: () => {
                                                                    let s = ee.toLowerCase().split(",").map(e => e.trim());
                                                                    et((t ? s.filter(t => t !== e.key) : [...s.filter(e => "" !== e), e.key]).join(", "))
                                                                }
                                                                ,
                                                                className: "px-2 py-1 text-xs font-medium rounded border transition-colors ".concat(t ? "bg-blue-100 border-blue-300 text-blue-700" : "bg-gray-100 border-gray-300 text-gray-600 hover:bg-gray-200"),
                                                                children: e.label
                                                            }, e.key)
                                                        }
                                                        )
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "text-xs text-gray-500",
                                                        children: ["Selected: ", ee || "No days selected"]
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "flex space-x-2",
                                                        children: [(0,
                                                        r.jsx)("button", {
                                                            onClick: e6,
                                                            className: "text-green-600 hover:text-green-800 text-sm font-medium",
                                                            children: "✓ Save"
                                                        }), (0,
                                                        r.jsx)("button", {
                                                            onClick: e8,
                                                            className: "text-red-600 hover:text-red-800 text-sm font-medium",
                                                            children: "✕ Cancel"
                                                        })]
                                                    })]
                                                }) : (0,
                                                r.jsxs)(r.Fragment, {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "text-gray-900 font-medium",
                                                        children: Y.schedule || "Not specified"
                                                    }), (0,
                                                    r.jsx)("button", {
                                                        onClick: () => e5("schedule", Y.schedule || ""),
                                                        className: "text-blue-600 hover:text-blue-800 text-sm font-medium ml-2",
                                                        children: "✏️"
                                                    })]
                                                })
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Hours of Work"
                                            }), (0,
                                            r.jsx)("div", {
                                                className: "flex items-center space-x-2",
                                                children: "hoursOfWork" === Q ? (0,
                                                r.jsxs)("div", {
                                                    className: "flex flex-col items-end space-y-2",
                                                    children: [(0,
                                                    r.jsxs)("div", {
                                                        className: "grid grid-cols-2 gap-4",
                                                        children: [(0,
                                                        r.jsxs)("div", {
                                                            children: [(0,
                                                            r.jsx)("label", {
                                                                className: "block text-xs font-medium text-gray-600 mb-1",
                                                                children: "Start Time"
                                                            }), (0,
                                                            r.jsxs)("select", {
                                                                className: "block w-full px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-blue-500",
                                                                value: ee.split("-")[0] || "09:00",
                                                                onChange: e => {
                                                                    let t = ee.split("-")[1] || "17:00";
                                                                    et("".concat(e.target.value, "-").concat(t))
                                                                }
                                                                ,
                                                                children: [(0,
                                                                r.jsx)("option", {
                                                                    value: "06:00",
                                                                    children: "6:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "06:30",
                                                                    children: "6:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "07:00",
                                                                    children: "7:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "07:30",
                                                                    children: "7:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "08:00",
                                                                    children: "8:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "08:30",
                                                                    children: "8:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "09:00",
                                                                    children: "9:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "09:30",
                                                                    children: "9:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "10:00",
                                                                    children: "10:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "10:30",
                                                                    children: "10:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "11:00",
                                                                    children: "11:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "11:30",
                                                                    children: "11:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "12:00",
                                                                    children: "12:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "12:30",
                                                                    children: "12:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "13:00",
                                                                    children: "1:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "13:30",
                                                                    children: "1:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "14:00",
                                                                    children: "2:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "14:30",
                                                                    children: "2:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "15:00",
                                                                    children: "3:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "15:30",
                                                                    children: "3:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "16:00",
                                                                    children: "4:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "16:30",
                                                                    children: "4:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "17:00",
                                                                    children: "5:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "17:30",
                                                                    children: "5:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "18:00",
                                                                    children: "6:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "18:30",
                                                                    children: "6:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "19:00",
                                                                    children: "7:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "19:30",
                                                                    children: "7:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "20:00",
                                                                    children: "8:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "20:30",
                                                                    children: "8:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "21:00",
                                                                    children: "9:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "21:30",
                                                                    children: "9:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "22:00",
                                                                    children: "10:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "22:30",
                                                                    children: "10:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "23:00",
                                                                    children: "11:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "23:30",
                                                                    children: "11:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "00:00",
                                                                    children: "12:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "00:30",
                                                                    children: "12:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "01:00",
                                                                    children: "1:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "01:30",
                                                                    children: "1:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "02:00",
                                                                    children: "2:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "02:30",
                                                                    children: "2:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "03:00",
                                                                    children: "3:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "03:30",
                                                                    children: "3:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "04:00",
                                                                    children: "4:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "04:30",
                                                                    children: "4:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "05:00",
                                                                    children: "5:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "05:30",
                                                                    children: "5:30 AM"
                                                                })]
                                                            })]
                                                        }), (0,
                                                        r.jsxs)("div", {
                                                            children: [(0,
                                                            r.jsx)("label", {
                                                                className: "block text-xs font-medium text-gray-600 mb-1",
                                                                children: "End Time"
                                                            }), (0,
                                                            r.jsxs)("select", {
                                                                className: "block w-full px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-blue-500",
                                                                value: ee.split("-")[1] || "17:00",
                                                                onChange: e => {
                                                                    let t = ee.split("-")[0] || "09:00";
                                                                    et("".concat(t, "-").concat(e.target.value))
                                                                }
                                                                ,
                                                                children: [(0,
                                                                r.jsx)("option", {
                                                                    value: "08:00",
                                                                    children: "8:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "08:30",
                                                                    children: "8:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "09:00",
                                                                    children: "9:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "09:30",
                                                                    children: "9:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "10:00",
                                                                    children: "10:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "10:30",
                                                                    children: "10:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "11:00",
                                                                    children: "11:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "11:30",
                                                                    children: "11:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "12:00",
                                                                    children: "12:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "12:30",
                                                                    children: "12:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "13:00",
                                                                    children: "1:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "13:30",
                                                                    children: "1:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "14:00",
                                                                    children: "2:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "14:30",
                                                                    children: "2:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "15:00",
                                                                    children: "3:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "15:30",
                                                                    children: "3:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "16:00",
                                                                    children: "4:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "16:30",
                                                                    children: "4:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "17:00",
                                                                    children: "5:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "17:30",
                                                                    children: "5:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "18:00",
                                                                    children: "6:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "18:30",
                                                                    children: "6:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "19:00",
                                                                    children: "7:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "19:30",
                                                                    children: "7:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "20:00",
                                                                    children: "8:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "20:30",
                                                                    children: "8:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "21:00",
                                                                    children: "9:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "21:30",
                                                                    children: "9:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "22:00",
                                                                    children: "10:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "22:30",
                                                                    children: "10:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "23:00",
                                                                    children: "11:00 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "23:30",
                                                                    children: "11:30 PM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "00:00",
                                                                    children: "12:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "00:30",
                                                                    children: "12:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "01:00",
                                                                    children: "1:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "01:30",
                                                                    children: "1:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "02:00",
                                                                    children: "2:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "02:30",
                                                                    children: "2:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "03:00",
                                                                    children: "3:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "03:30",
                                                                    children: "3:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "04:00",
                                                                    children: "4:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "04:30",
                                                                    children: "4:30 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "05:00",
                                                                    children: "5:00 AM"
                                                                }), (0,
                                                                r.jsx)("option", {
                                                                    value: "05:30",
                                                                    children: "5:30 AM"
                                                                })]
                                                            })]
                                                        })]
                                                    }), (0,
                                                    r.jsxs)("div", {
                                                        className: "flex space-x-2",
                                                        children: [(0,
                                                        r.jsx)("button", {
                                                            onClick: e6,
                                                            className: "text-green-600 hover:text-green-800 text-sm font-medium",
                                                            children: "✓ Save"
                                                        }), (0,
                                                        r.jsx)("button", {
                                                            onClick: e8,
                                                            className: "text-red-600 hover:text-red-800 text-sm font-medium",
                                                            children: "✕ Cancel"
                                                        })]
                                                    })]
                                                }) : (0,
                                                r.jsxs)(r.Fragment, {
                                                    children: [(0,
                                                    r.jsx)("span", {
                                                        className: "text-gray-900 font-medium",
                                                        children: Y.hoursOfWork || "Not specified"
                                                    }), (0,
                                                    r.jsx)("button", {
                                                        onClick: () => e5("hoursOfWork", Y.hoursOfWork || ""),
                                                        className: "text-blue-600 hover:text-blue-800 text-sm font-medium ml-2",
                                                        children: "✏️"
                                                    })]
                                                })
                                            })]
                                        }), (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Availability Status"
                                            }), (0,
                                            r.jsx)("span", {
                                                className: "px-2 py-1 rounded-full text-xs font-medium ".concat("available" === Y.availability ? "bg-green-100 text-green-800" : "on-break" === Y.availability ? "bg-yellow-100 text-yellow-800" : "bg-red-100 text-red-800"),
                                                children: Y.availability || "Not specified"
                                            })]
                                        })]
                                    })]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "bg-gray-50 rounded-xl p-6",
                                    children: [(0,
                                    r.jsxs)("h3", {
                                        className: "text-xl font-bold text-gray-900 mb-4 flex items-center",
                                        children: [(0,
                                        r.jsx)("svg", {
                                            className: "w-5 h-5 mr-2 text-orange-600",
                                            fill: "none",
                                            stroke: "currentColor",
                                            viewBox: "0 0 24 24",
                                            children: (0,
                                            r.jsx)("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                strokeWidth: 2,
                                                d: "M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                                            })
                                        }), "Vehicle Information"]
                                    }), (0,
                                    r.jsx)("div", {
                                        className: "space-y-4",
                                        children: (0,
                                        r.jsxs)("div", {
                                            className: "flex justify-between items-center py-2 border-b border-gray-200",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-gray-600",
                                                children: "Vehicle"
                                            }), (0,
                                            r.jsx)("span", {
                                                className: "text-gray-900 font-medium",
                                                children: (e => {
                                                    if (!e || !I[e])
                                                        return "Not specified";
                                                    let t = I[e];
                                                    return "".concat(t.year, " ").concat(t.make, " ").concat(t.model, " - ").concat(t.plateNumber || "No Plate")
                                                }
                                                )(Y.vehicle)
                                            })]
                                        })
                                    })]
                                })]
                            }), ((null == w ? void 0 : w.role) === "admin" || (null == w ? void 0 : w.role) === "dispatcher") && (0,
                            r.jsxs)("div", {
                                className: "mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",
                                children: [(0,
                                r.jsxs)("h4", {
                                    className: "text-lg font-semibold text-red-900 mb-3 flex items-center",
                                    children: [(0,
                                    r.jsx)("svg", {
                                        className: "w-5 h-5 mr-2 text-red-600",
                                        fill: "none",
                                        stroke: "currentColor",
                                        viewBox: "0 0 24 24",
                                        children: (0,
                                        r.jsx)("path", {
                                            strokeLinecap: "round",
                                            strokeLinejoin: "round",
                                            strokeWidth: 2,
                                            d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
                                        })
                                    }), "Administrative Actions"]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "space-y-3",
                                    children: [(0,
                                    r.jsxs)("div", {
                                        className: "flex items-center justify-between",
                                        children: [(0,
                                        r.jsxs)("div", {
                                            className: "flex items-center space-x-2",
                                            children: [(0,
                                            r.jsx)("span", {
                                                className: "text-sm font-medium text-red-800",
                                                children: Y.isClockedIn ? "Force Clock Out" : "Force Clock In"
                                            }), Y.isClockedIn ? (0,
                                            r.jsx)("span", {
                                                className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",
                                                children: "Currently Clocked In"
                                            }) : (0,
                                            r.jsx)("span", {
                                                className: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",
                                                children: "Currently Clocked Out"
                                            })]
                                        }), (0,
                                        r.jsx)("button", {
                                            onClick: () => eo(!0),
                                            className: "px-4 py-2 rounded-md font-medium text-sm transition-all duration-200 ".concat(Y.isClockedIn ? "bg-red-600 text-white hover:bg-red-700" : "bg-blue-600 text-white hover:bg-blue-700"),
                                            children: Y.isClockedIn ? "Force Clock Out" : "Force Clock In"
                                        })]
                                    }), (0,
                                    r.jsx)("p", {
                                        className: "text-xs ".concat(Y.isClockedIn ? "text-red-700" : "text-blue-700"),
                                        children: Y.isClockedIn ? "This will immediately clock out the technician and log the action. Use only when necessary." : "This will immediately clock in the technician and log the action. Use only when necessary."
                                    })]
                                })]
                            }), (0,
                            r.jsx)("div", {
                                className: "mt-8 flex justify-end",
                                children: (0,
                                r.jsx)("button", {
                                    onClick: e3,
                                    className: "px-6 py-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white rounded-xl font-semibold hover:from-gray-700 hover:to-gray-800 transition-all duration-200 transform hover:scale-105 shadow-lg",
                                    children: "Close Profile"
                                })
                            })]
                        })
                    })
                }), el && Y && (0,
                r.jsx)("div", {
                    className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",
                    children: (0,
                    r.jsx)("div", {
                        className: "bg-white rounded-2xl shadow-2xl max-w-md w-full transform transition-all duration-300 scale-100",
                        children: (0,
                        r.jsx)("div", {
                            className: "p-6",
                            children: (0,
                            r.jsxs)("div", {
                                className: "text-center",
                                children: [(0,
                                r.jsx)("div", {
                                    className: "mx-auto flex items-center justify-center h-12 w-12 rounded-full mb-4 ".concat(Y.isClockedIn ? "bg-red-100" : "bg-blue-100"),
                                    children: (0,
                                    r.jsx)("svg", {
                                        className: "h-6 w-6 ".concat(Y.isClockedIn ? "text-red-600" : "text-blue-600"),
                                        fill: "none",
                                        stroke: "currentColor",
                                        viewBox: "0 0 24 24",
                                        children: (0,
                                        r.jsx)("path", {
                                            strokeLinecap: "round",
                                            strokeLinejoin: "round",
                                            strokeWidth: 2,
                                            d: "M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
                                        })
                                    })
                                }), (0,
                                r.jsx)("h3", {
                                    className: "text-lg font-medium text-gray-900 mb-2",
                                    children: Y.isClockedIn ? "Force Clock Out Technician" : "Force Clock In Technician"
                                }), (0,
                                r.jsxs)("div", {
                                    className: "mt-2 px-7 py-3",
                                    children: [(0,
                                    r.jsxs)("p", {
                                        className: "text-sm text-gray-500",
                                        children: ["Are you sure you want to force ", Y.isClockedIn ? "clock out" : "clock in", " ", (0,
                                        r.jsxs)("span", {
                                            className: "font-medium text-gray-900",
                                            children: [Y.firstName, " ", Y.lastName]
                                        }), "?"]
                                    }), (0,
                                    r.jsx)("p", {
                                        className: "text-sm text-gray-500 mt-2",
                                        children: "This action cannot be undone and will be logged for audit purposes."
                                    })]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "mt-5 flex space-x-3 justify-center",
                                    children: [(0,
                                    r.jsx)("button", {
                                        onClick: () => eo(!1),
                                        className: "px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors duration-200 font-medium",
                                        children: "Cancel"
                                    }), (0,
                                    r.jsx)("button", {
                                        onClick: e4,
                                        className: "px-4 py-2 text-white rounded-md transition-colors duration-200 font-medium ".concat(Y.isClockedIn ? "bg-red-600 hover:bg-red-700" : "bg-blue-600 hover:bg-blue-700"),
                                        children: Y.isClockedIn ? "Force Clock Out" : "Force Clock In"
                                    })]
                                })]
                            })
                        })
                    })
                }), (0,
                r.jsx)(u.Z, {
                    isOpen: eg,
                    onClose: () => {
                        ef(!1),
                        ej(null)
                    }
                    ,
                    onJobUpdated: () => {
                        eb && te(eb)
                    }
                    ,
                    mode: "create",
                    context: "tech-route",
                    selectedTech: eb,
                    forceDefaultFields: !E
                }), (0,
                r.jsx)(u.Z, {
                    isOpen: eM,
                    onClose: () => {
                        eR(!1)
                    }
                    ,
                    onJobUpdated: e => {
                        e && (eF(e),
                        ev(t => {
                            let s = {
                                ...t
                            };
                            return Object.keys(s).forEach(t => {
                                let r = s[t];
                                if (r && r.jobs) {
                                    let a = r.jobs.findIndex(t => t.jobId === e.jobId);
                                    if (-1 !== a) {
                                        let n = [...r.jobs];
                                        n[a] = {
                                            ...n[a],
                                            ...e
                                        },
                                        s[t] = {
                                            ...r,
                                            jobs: n
                                        }
                                    }
                                }
                            }
                            ),
                            s
                        }
                        ))
                    }
                    ,
                    mode: "manage",
                    context: "tech-route",
                    selectedJob: eO,
                    selectedTech: eO && W.find(e => e.id === eO.assignedTechId) || null,
                    forceDefaultFields: !E
                }), (0,
                r.jsx)(m.Z, {
                    user: ea,
                    isOpen: es,
                    onClose: () => {
                        er(!1),
                        en(null)
                    }
                    ,
                    onUpdate: () => {
                        eQ()
                    }
                }), ed && eu && (0,
                r.jsx)("div", {
                    className: "fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",
                    children: (0,
                    r.jsx)("div", {
                        className: "relative mx-auto border shadow-lg rounded-md bg-white top-10 p-6 w-4/5 max-w-4xl",
                        children: (0,
                        r.jsxs)("div", {
                            className: "mt-3",
                            children: [(0,
                            r.jsxs)("h3", {
                                className: "text-lg font-medium text-gray-900 mb-4",
                                children: ["Manage Working Days - ", eu.firstName, " ", eu.lastName]
                            }), (0,
                            r.jsxs)("div", {
                                className: "space-y-4",
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "bg-gray-50 p-4 rounded-lg",
                                    children: [(0,
                                    r.jsx)("h4", {
                                        className: "text-sm font-medium text-gray-700 mb-2",
                                        children: "Schedule & Availability"
                                    }), (0,
                                    r.jsx)("p", {
                                        className: "text-xs text-gray-600 mb-4",
                                        children: "Click on any day to mark it as a day off. Green days are working days, colored days are time off."
                                    }), (0,
                                    r.jsx)(x.Z, {
                                        user: eu,
                                        onWorkingDaysChange: e => {
                                            ex(t => t ? {
                                                ...t,
                                                workingDays: e
                                            } : null)
                                        }
                                        ,
                                        currentUserRole: null == w ? void 0 : w.role,
                                        companyId: null == N ? void 0 : N.companyId,
                                        currentUserId: null == w ? void 0 : w.id,
                                        currentUserName: w ? "".concat(w.firstName, " ").concat(w.lastName) : "",
                                        company: N
                                    })]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "flex justify-end space-x-3",
                                    children: [(0,
                                    r.jsx)("button", {
                                        onClick: () => {
                                            em(!1),
                                            ex(null)
                                        }
                                        ,
                                        className: "px-4 py-2 text-gray-600 hover:text-gray-800",
                                        children: "Cancel"
                                    }), (0,
                                    r.jsx)("button", {
                                        onClick: async () => {
                                            if (eu)
                                                try {
                                                    let e = {};
                                                    eu.workingDays && Object.entries(eu.workingDays).forEach(t => {
                                                        let[s,r] = t;
                                                        r && (e[s] = {
                                                            isWorking: r.isWorking,
                                                            ...r.reason && {
                                                                reason: r.reason
                                                            },
                                                            ...r.requestedBy && {
                                                                requestedBy: r.requestedBy
                                                            },
                                                            ...r.requestedAt && {
                                                                requestedAt: r.requestedAt
                                                            },
                                                            ...r.approvedBy && {
                                                                approvedBy: r.approvedBy
                                                            },
                                                            ...r.approvedAt && {
                                                                approvedAt: r.approvedAt
                                                            },
                                                            ...r.notes && {
                                                                notes: r.notes
                                                            }
                                                        })
                                                    }
                                                    );
                                                    let t = (0,
                                                    i.doc)(c.db, "companies", (null == N ? void 0 : N.companyId) || "", "users", eu.id);
                                                    await (0,
                                                    i.updateDoc)(t, {
                                                        workingDays: e,
                                                        updatedAt: new Date
                                                    }),
                                                    eQ(),
                                                    em(!1),
                                                    ex(null),
                                                    F({
                                                        title: "Working Days Updated",
                                                        body: "".concat(eu.firstName, " ").concat(eu.lastName, "'s working days have been updated."),
                                                        type: "success"
                                                    })
                                                } catch (e) {
                                                    console.error("Error updating working days:", e),
                                                    F({
                                                        title: "Update Failed",
                                                        body: "Failed to update working days. Please try again.",
                                                        type: "error"
                                                    })
                                                }
                                        }
                                        ,
                                        className: "px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",
                                        children: "Save Working Days"
                                    })]
                                })]
                            })]
                        })
                    })
                }), (0,
                r.jsx)(f, {
                    isOpen: eN,
                    onClose: () => {
                        ew(!1),
                        ek(null)
                    }
                    ,
                    onJobsImported: () => {}
                    ,
                    selectedTech: eD
                }), (0,
                r.jsx)(b, {
                    isOpen: eA,
                    onClose: () => eC(!1)
                }), (0,
                r.jsx)(y, {
                    isOpen: eS,
                    onClose: () => eE(!1),
                    selectedDate: P
                }), (0,
                r.jsx)(D, {
                    isOpen: eI,
                    onClose: () => eT(!1),
                    selectedDate: P
                }), (0,
                r.jsx)(A.Z, {
                    isOpen: eU,
                    onClose: () => eV(!1),
                    onJobReassigned: () => {
                        eW({}),
                        ez({}),
                        eV(!1),
                        e_([]),
                        F({
                            title: "Jobs Reassigned",
                            body: "Successfully reassigned ".concat(eH.length, " job(s)."),
                            type: "success"
                        })
                    }
                    ,
                    jobs: eH
                })]
            })
        }
        var E = s(3922)
          , I = s(1444);
        function T(e) {
            if (!e)
                return !1;
            let t = (e || "").toLowerCase().replace(/[^a-z0-9]+/g, " ").trim().replace(/\s+/g, " ");
            return "altice" === t || "optimum" === t || "altice optimum" === t
        }
        function P(e) {
            let {params: t} = e
              , s = (0,
            C.h)().isMobile
              , {user: o, company: d, signOut: m} = (0,
            l.a)()
              , u = (0,
            n.useRouter)()
              , x = (0,
            n.useSearchParams)().get("date") || void 0
              , [p,h] = (0,
            a.useState)("");
            (0,
            a.useEffect)( () => {
                let e = (0,
                g.RS)((0,
                g.fO)(d));
                h(x || e)
            }
            , [d, x]);
            let f = e => (e || "").toLowerCase().replace(/[^a-z0-9]+/g, " ").trim().replace(/\s+/g, " ")
              , b = (0,
            a.useMemo)( () => {
                let e = decodeURIComponent(t.provider || "")
                  , s = f(e);
                return ((null == d ? void 0 : d.catvProviders) || []).find(e => f(e) === s) || e
            }
            , [t.provider, null == d ? void 0 : d.catvProviders])
              , j = T(b)
              , y = (0,
            a.useMemo)( () => {
                let e = b || "";
                return /[A-Z]/.test(e) ? e : T(e) ? "Altice/Optimum" : e.replace(/[-_]+/g, " ").replace(/\s+/g, " ").trim().replace(/\b\w/g, e => e.toUpperCase()) || "Field Operations"
            }
            , [b])
              , [v,N] = (0,
            a.useState)(null);
            (0,
            a.useEffect)( () => {
                (async () => {
                    if (d)
                        try {
                            let e = await (0,
                            i.getDoc)((0,
                            i.doc)(c.db, "companies", d.companyId));
                            e.exists() && N(e.data())
                        } catch (e) {
                            console.error("Error loading company data:", e)
                        }
                }
                )()
            }
            , [d]);
            let[w,D] = (0,
            a.useState)([]);
            (0,
            a.useEffect)( () => {
                if (!d || !p)
                    return;
                let e = (0,
                i.collection)(c.db, "companies", d.companyId, "jobs")
                  , t = (0,
                i.query)(e, (0,
                i.where)("scheduleDate", "==", p), (0,
                i.orderBy)("createdDate", "desc"))
                  , s = (0,
                i.onSnapshot)(t, e => {
                    let t = e => (e || "").toLowerCase().replace(/[^a-z0-9]+/g, " ").trim()
                      , s = t(b);
                    D(e.docs.map(e => ({
                        id: e.id,
                        ...e.data()
                    })).filter(e => t(e.catvProvider) === s))
                }
                , e => {
                    console.warn("Error loading jobs for stats:", e)
                }
                );
                return () => s()
            }
            , [d, p, b]);
            let k = (0,
            a.useMemo)( () => {
                let e = {}
                  , t = new Set;
                return w.forEach(s => {
                    let r = s.jobId || s.id;
                    if (!r || t.has(r))
                        return;
                    t.add(r);
                    let a = s.type || s.jobType || "Unknown";
                    e[a] || (e[a] = {
                        total: 0,
                        pending: 0,
                        completed: 0,
                        cancelled: 0
                    }),
                    e[a].total += 1;
                    let n = s.status;
                    "completed" === n ? e[a].completed += 1 : "cancelled" === n || "externally_unassigned" === n ? e[a].cancelled += 1 : ("pending" === n || "assigned" === n) && (e[a].pending += 1)
                }
                ),
                e
            }
            , [w])
              , A = (0,
            a.useMemo)( () => {
                let e = 0
                  , t = 0
                  , s = 0
                  , r = 0;
                return Object.values(k).forEach(a => {
                    e += a.total,
                    t += a.pending,
                    s += a.completed,
                    r += a.cancelled
                }
                ),
                {
                    totalJobs: e,
                    totalPending: t,
                    totalCompleted: s,
                    totalCancelled: r
                }
            }
            , [k]);
            return (0,
            r.jsxs)("div", {
                className: "min-h-screen bg-gray-50",
                children: [(0,
                r.jsx)("header", {
                    className: "bg-white shadow",
                    children: (0,
                    r.jsx)("div", {
                        className: "mx-auto px-4 sm:px-6 lg:px-8",
                        style: {
                            maxWidth: "96rem"
                        },
                        children: (0,
                        r.jsxs)("div", {
                            className: "flex justify-between items-center py-3 sm:py-5",
                            children: [(0,
                            r.jsxs)("div", {
                                children: [(0,
                                r.jsxs)("div", {
                                    className: "flex items-center space-x-3",
                                    children: [(null == v ? void 0 : v.logo) && (0,
                                    r.jsx)("img", {
                                        src: v.logo,
                                        alt: "".concat(null == d ? void 0 : d.name, " Logo"),
                                        className: "w-8 h-8 sm:w-10 sm:h-10 rounded-md object-cover border border-gray-200 shadow-sm"
                                    }), (0,
                                    r.jsxs)("div", {
                                        children: [(0,
                                        r.jsxs)("h1", {
                                            className: "font-bold text-gray-900 text-xl sm:text-2xl",
                                            children: [y, " Field Operations"]
                                        }), (0,
                                        r.jsx)("p", {
                                            className: "text-gray-600 text-xs sm:text-sm",
                                            children: null == d ? void 0 : d.name
                                        })]
                                    })]
                                }), (0,
                                r.jsxs)("div", {
                                    className: "mt-2 flex items-center space-x-3 sm:space-x-4",
                                    children: [(0,
                                    r.jsx)(I.Z, {
                                        showButton: !0
                                    }), (0,
                                    r.jsxs)("div", {
                                        className: "flex items-center space-x-2",
                                        children: [(0,
                                        r.jsx)("label", {
                                            htmlFor: "date-selector",
                                            className: "text-xs sm:text-sm font-medium text-gray-700",
                                            children: "View Routes for:"
                                        }), (0,
                                        r.jsx)("input", {
                                            id: "date-selector",
                                            type: "date",
                                            value: p,
                                            onChange: e => {
                                                let t = e.target.value;
                                                h(t);
                                                let s = new URLSearchParams(window.location.search);
                                                t ? s.set("date", t) : s.delete("date"),
                                                u.replace("?".concat(s.toString()))
                                            }
                                            ,
                                            className: "px-2 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs sm:text-sm"
                                        })]
                                    })]
                                })]
                            }), (0,
                            r.jsxs)("div", {
                                className: "flex flex-col items-end space-y-1 sm:flex-row sm:items-center sm:space-x-4 sm:space-y-0",
                                children: [(0,
                                r.jsx)("button", {
                                    onClick: async () => {
                                        try {
                                            await m(),
                                            u.push("/")
                                        } catch (e) {
                                            console.error("Error signing out:", e)
                                        }
                                    }
                                    ,
                                    className: "order-1 sm:order-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors ".concat("px-4 py-2 text-sm"),
                                    children: "Sign Out"
                                }), o && (0,
                                r.jsxs)("div", {
                                    className: "order-2 sm:order-1 text-right",
                                    children: [(0,
                                    r.jsxs)("p", {
                                        className: "text-gray-700 font-medium text-sm",
                                        children: [o.firstName, " ", o.lastName]
                                    }), (0,
                                    r.jsx)("p", {
                                        className: "text-xs sm:text-sm text-gray-500 capitalize",
                                        children: o.role
                                    })]
                                })]
                            })]
                        })
                    })
                }), (0,
                r.jsx)("main", {
                    className: "mx-auto py-6 sm:px-6 lg:px-8",
                    style: {
                        maxWidth: "96rem"
                    },
                    children: (0,
                    r.jsxs)("div", {
                        className: "px-4 py-6 sm:px-0",
                        children: [(0,
                        r.jsx)("div", {
                            className: "mb-4",
                            children: (0,
                            r.jsxs)("button", {
                                onClick: () => u.push("/dispatcher"),
                                className: "inline-flex items-center gap-2 rounded-lg border border-gray-200 transition-all duration-200 hover:text-gray-900 hover:bg-gray-50 ".concat(s ? "px-4 py-3 text-base" : "px-3 py-2 text-sm"),
                                children: [(0,
                                r.jsx)("svg", {
                                    className: "".concat(s ? "w-5 h-5" : "w-4 h-4"),
                                    fill: "none",
                                    stroke: "currentColor",
                                    viewBox: "0 0 24 24",
                                    children: (0,
                                    r.jsx)("path", {
                                        strokeLinecap: "round",
                                        strokeLinejoin: "round",
                                        strokeWidth: 2,
                                        d: "M10 19l-7-7m0 0l7-7m-7 7h18"
                                    })
                                }), "Back to Dashboard"]
                            })
                        }), (0,
                        r.jsx)(E.Z, {}), (0,
                        r.jsxs)("div", {
                            className: "mb-6",
                            children: [(0,
                            r.jsx)("h3", {
                                className: "font-medium text-gray-900 mb-4 ".concat(s ? "text-xl" : "text-lg"),
                                children: "All Jobs by Type"
                            }), (0,
                            r.jsx)("div", {
                                className: "grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2",
                                children: Object.entries(k).length > 0 ? (0,
                                r.jsxs)(r.Fragment, {
                                    children: [Object.entries(k).map(e => {
                                        let[t,s] = e;
                                        return (0,
                                        r.jsx)("div", {
                                            className: "bg-white p-1 rounded-lg shadow-sm border border-gray-200 min-h-[92px]",
                                            children: (0,
                                            r.jsxs)("div", {
                                                className: "text-center",
                                                children: [(0,
                                                r.jsx)("p", {
                                                    className: "text-xs font-medium text-gray-600 mb-0.5",
                                                    children: t
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "mb-0.5",
                                                    children: [(0,
                                                    r.jsx)("p", {
                                                        className: "text-base font-bold text-blue-900",
                                                        children: s.total
                                                    }), (0,
                                                    r.jsx)("p", {
                                                        className: "text-xs text-gray-500",
                                                        children: "Total"
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "mb-0.5",
                                                    children: [(0,
                                                    r.jsx)("p", {
                                                        className: "text-xs font-semibold text-orange-600",
                                                        children: s.pending
                                                    }), (0,
                                                    r.jsx)("p", {
                                                        className: "text-xs text-gray-500",
                                                        children: "Pending"
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    className: "mb-0.5",
                                                    children: [(0,
                                                    r.jsx)("p", {
                                                        className: "text-xs font-semibold text-green-600",
                                                        children: s.completed
                                                    }), (0,
                                                    r.jsx)("p", {
                                                        className: "text-xs text-gray-500",
                                                        children: "Done"
                                                    })]
                                                }), (0,
                                                r.jsxs)("div", {
                                                    children: [(0,
                                                    r.jsx)("p", {
                                                        className: "text-xs font-semibold text-red-600",
                                                        children: s.cancelled
                                                    }), (0,
                                                    r.jsx)("p", {
                                                        className: "text-xs text-gray-500",
                                                        children: "Cancelled"
                                                    })]
                                                })]
                                            })
                                        }, t)
                                    }
                                    ), (0,
                                    r.jsx)("div", {
                                        className: "bg-gradient-to-br from-blue-50 to-indigo-100 p-1 rounded-lg shadow-sm border border-blue-200 min-h-[92px]",
                                        children: (0,
                                        r.jsxs)("div", {
                                            className: "text-center",
                                            children: [(0,
                                            r.jsx)("p", {
                                                className: "text-xs font-bold text-blue-800 mb-0.5",
                                                children: "SUMMARY"
                                            }), (0,
                                            r.jsxs)("div", {
                                                className: "mb-0.5",
                                                children: [(0,
                                                r.jsx)("p", {
                                                    className: "text-base font-bold text-blue-900",
                                                    children: A.totalJobs
                                                }), (0,
                                                r.jsx)("p", {
                                                    className: "text-xs text-gray-600",
                                                    children: "Total"
                                                })]
                                            }), (0,
                                            r.jsxs)("div", {
                                                className: "mb-0.5",
                                                children: [(0,
                                                r.jsx)("p", {
                                                    className: "text-xs font-semibold text-orange-600",
                                                    children: A.totalPending
                                                }), (0,
                                                r.jsx)("p", {
                                                    className: "text-xs text-gray-600",
                                                    children: "Pending"
                                                })]
                                            }), (0,
                                            r.jsxs)("div", {
                                                className: "mb-0.5",
                                                children: [(0,
                                                r.jsx)("p", {
                                                    className: "text-xs font-semibold text-green-600",
                                                    children: A.totalCompleted
                                                }), (0,
                                                r.jsx)("p", {
                                                    className: "text-xs text-gray-600",
                                                    children: "Done"
                                                })]
                                            }), (0,
                                            r.jsxs)("div", {
                                                children: [(0,
                                                r.jsx)("p", {
                                                    className: "text-xs font-semibold text-red-600",
                                                    children: A.totalCancelled
                                                }), (0,
                                                r.jsx)("p", {
                                                    className: "text-xs text-gray-600",
                                                    children: "Cancelled"
                                                })]
                                            })]
                                        })
                                    })]
                                }) : (0,
                                r.jsxs)("div", {
                                    className: "col-span-full bg-white p-8 rounded-lg shadow-sm border border-gray-200 text-center",
                                    children: [(0,
                                    r.jsx)("p", {
                                        className: "text-gray-500",
                                        children: "No jobs found"
                                    }), (0,
                                    r.jsx)("p", {
                                        className: "text-sm text-gray-400 mt-1",
                                        children: "Jobs will appear here once they are created"
                                    })]
                                })
                            })]
                        }), (0,
                        r.jsx)("div", {
                            className: "mb-6",
                            children: (0,
                            r.jsx)(S, {
                                selectedDate: p,
                                providerFilter: b,
                                enableAlticeFeatures: j
                            })
                        })]
                    })
                })]
            })
        }
    }
}]);
